(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6538],{63:(e,r,s)=>{"use strict";var t=s(7260);s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},6992:(e,r,s)=>{"use strict";s.d(r,{CreateUserForm:()=>o});var t=s(5155),a=s(2115),l=s(63),d=s(2619),i=s.n(d);function o(e){let{roles:r}=e,s=(0,l.useRouter)(),[d,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)({userId:"",email:"",displayName:"",role:"USER",method:"invite",temporaryPassword:""}),b=async e=>{e.preventDefault(),c(""),o(!0);try{let e=await fetch("/api/admin/users/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),r=await e.json();if(!e.ok){c(r.error||"Failed to create user"),o(!1);return}r.inviteLink?(u(r.inviteLink),h(!0)):s.push("/admin/users")}catch(e){c("An error occurred. Please try again."),o(!1)}};return x?(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 border border-gray-700",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"User Created Successfully"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Share this invite link with the user"})]}),(0,t.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Invite Link (expires in 72 hours)"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("input",{type:"text",value:m,readOnly:!0,className:"flex-1 px-4 py-2 bg-gray-600 border border-gray-500 rounded-md text-white text-sm"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(m),alert("Invite link copied to clipboard!")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:"Copy"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(i(),{href:"/admin/users",className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-md transition-colors text-center",children:"Back to Users"}),(0,t.jsx)("button",{onClick:()=>{h(!1),u(""),g({userId:"",email:"",displayName:"",role:"USER",method:"invite",temporaryPassword:""})},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:"Create Another User"})]})]}):(0,t.jsxs)("form",{onSubmit:b,className:"bg-gray-800 rounded-lg p-8 border border-gray-700 space-y-6",children:[n&&(0,t.jsx)("div",{className:"p-4 bg-red-900/50 border border-red-700 rounded-md",children:(0,t.jsx)("p",{className:"text-red-200 text-sm",children:n})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-300 mb-2",children:["User ID ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("input",{id:"userId",type:"text",required:!0,value:p.userId,onChange:e=>g({...p,userId:e.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., EMP001, PILOT123",disabled:d}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"This will be used for login (case-insensitive)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),(0,t.jsx)("input",{id:"displayName",type:"text",value:p.displayName,onChange:e=>g({...p,displayName:e.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., John Doe",disabled:d})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:p.email,onChange:e=>g({...p,email:e.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com",disabled:d}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"Optional. Used for password reset and notifications."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-300 mb-2",children:["Role ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("select",{id:"role",required:!0,value:p.role,onChange:e=>g({...p,role:e.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d,children:[(0,t.jsx)("option",{value:"",children:"Select a role..."}),r.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-4",children:["Password Setup Method ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex items-start p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"method",value:"invite",checked:"invite"===p.method,onChange:e=>g({...p,method:e.target.value}),className:"mt-1 mr-3",disabled:d}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-medium",children:"Send Invite Link (Recommended)"}),(0,t.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"User will receive a secure link to set their own password. Link expires in 72 hours."})]})]}),(0,t.jsxs)("label",{className:"flex items-start p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"method",value:"temporary",checked:"temporary"===p.method,onChange:e=>g({...p,method:e.target.value}),className:"mt-1 mr-3",disabled:d}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-medium",children:"Set Temporary Password"}),(0,t.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"You set a temporary password. User must change it on first login."})]})]})]})]}),"temporary"===p.method&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"temporaryPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:["Temporary Password ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("input",{id:"temporaryPassword",type:"password",required:"temporary"===p.method,value:p.temporaryPassword,onChange:e=>g({...p,temporaryPassword:e.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter temporary password",disabled:d}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"Must be at least 12 characters with uppercase, lowercase, number, and special character"})]}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-6",children:[(0,t.jsx)(i(),{href:"/admin/users",className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-md transition-colors text-center",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating User...":"Create User"})]})]})}},6996:(e,r,s)=>{Promise.resolve().then(s.bind(s,6992))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=6996)),_N_E=e.O()}]);