(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7732:(e,t,r)=>{Promise.resolve().then(r.bind(r,9981))},9981:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),a=r(2115),l=r(6199),n=r(63);function i(){let{data:e,status:t}=(0,l.wV)(),r=(0,n.useRouter)(),[i,d]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[x,b]=(0,a.useState)(null),[h,g]=(0,a.useState)(""),[N,p]=(0,a.useState)({username:"",email:"",password:"",role:"USER",firstName:"",lastName:""});(0,a.useEffect)(()=>{var s,a;if("unauthenticated"===t||(null==e||null==(s=e.user)?void 0:s.role)!=="ADMIN"&&(null==e||null==(a=e.user)?void 0:a.role)!=="SUPER_ADMIN")return void r.push("/login");j()},[t,e,r]);let j=async()=>{try{let e=[{id:"1",username:"admin",email:"admin@dfp-neo.com",role:"ADMIN",firstName:"System",lastName:"Administrator",isActive:!0,createdAt:"2024-01-01T00:00:00Z",lastLogin:new Date().toISOString()},{id:"2",username:"john.pilot",email:"john.pilot@dfp-neo.com",role:"PILOT",firstName:"John",lastName:"Smith",isActive:!0,createdAt:"2024-01-01T00:00:00Z",lastLogin:null},{id:"3",username:"jane.instructor",email:"jane.instructor@dfp-neo.com",role:"INSTRUCTOR",firstName:"Jane",lastName:"Wilson",isActive:!0,createdAt:"2024-01-01T00:00:00Z",lastLogin:null}];d(e)}catch(e){console.error("Error fetching users:",e),g("Error loading users")}finally{c(!1)}},v=async e=>{e.preventDefault(),g("");try{let e={id:Date.now().toString(),username:N.username,email:N.email,role:N.role,firstName:N.firstName,lastName:N.lastName,isActive:!0,createdAt:new Date().toISOString(),lastLogin:null};d([...i,e]),m(!1),p({username:"",email:"",password:"",role:"USER",firstName:"",lastName:""}),g("User added successfully!")}catch(e){g("Error adding user")}},y=async e=>{if(confirm("Are you sure you want to delete this user?"))try{d(i.filter(t=>t.id!==e)),g("User deleted successfully!")}catch(e){g("Error deleting user")}},f=async e=>{try{d(i.map(t=>t.id===e?{...t,isActive:!t.isActive}:t)),g("User status updated!")}catch(e){g("Error updating user status")}};return"loading"===t||o?(0,s.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-neutral-300 text-xl",children:"Loading..."})}):(0,s.jsx)("div",{className:"min-h-screen bg-black p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),(0,s.jsx)("p",{className:"text-neutral-400",children:"Manage DFP-NEO system users"})]}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"+ Add New User"})]}),h&&(0,s.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(h.includes("Error")?"bg-red-900/30 border border-red-500 text-red-200":"bg-green-900/30 border border-green-500 text-green-200"),children:h}),(u||x)&&(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-6 mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:x?"Edit User":"Add New User"}),(0,s.jsxs)("form",{onSubmit:v,className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"Username"}),(0,s.jsx)("input",{type:"text",value:N.username,onChange:e=>p({...N,username:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",required:!0,disabled:!!x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:N.email,onChange:e=>p({...N,email:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",required:!0})]}),!x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",value:N.password,onChange:e=>p({...N,password:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"Role"}),(0,s.jsxs)("select",{value:N.role,onChange:e=>p({...N,role:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,s.jsx)("option",{value:"USER",children:"User"}),(0,s.jsx)("option",{value:"INSTRUCTOR",children:"Instructor"}),(0,s.jsx)("option",{value:"PILOT",children:"Pilot"}),(0,s.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,s.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"First Name"}),(0,s.jsx)("input",{type:"text",value:N.firstName,onChange:e=>p({...N,firstName:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-neutral-300 mb-2",children:"Last Name"}),(0,s.jsx)("input",{type:"text",value:N.lastName,onChange:e=>p({...N,lastName:e.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),(0,s.jsxs)("div",{className:"col-span-2 flex gap-4",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded transition-colors",children:x?"Update User":"Add User"}),(0,s.jsx)("button",{type:"button",onClick:()=>{m(!1),b(null),p({username:"",email:"",password:"",role:"USER",firstName:"",lastName:""})},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded transition-colors",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"User"}),(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"Email"}),(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"Role"}),(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"Last Login"}),(0,s.jsx)("th",{className:"text-left p-4 text-neutral-300",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:i.map(e=>(0,s.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,s.jsxs)("td",{className:"p-4",children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.username}),(0,s.jsxs)("div",{className:"text-neutral-400 text-sm",children:[e.firstName," ",e.lastName]})]}),(0,s.jsx)("td",{className:"p-4 text-neutral-300",children:e.email}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("SUPER_ADMIN"===e.role?"bg-purple-900/30 text-purple-400 border border-purple-600":"ADMIN"===e.role?"bg-blue-900/30 text-blue-400 border border-blue-600":"PILOT"===e.role?"bg-green-900/30 text-green-400 border border-green-600":"INSTRUCTOR"===e.role?"bg-yellow-900/30 text-yellow-400 border border-yellow-600":"bg-gray-800 text-gray-400 border border-gray-600"),children:e.role})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.isActive?"bg-green-900/30 text-green-400 border border-green-600":"bg-red-900/30 text-red-400 border border-red-600"),children:e.isActive?"Active":"Inactive"})}),(0,s.jsx)("td",{className:"p-4 text-neutral-400 text-sm",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{b(e),p({username:e.username,email:e.email||"",password:"",role:e.role,firstName:e.firstName||"",lastName:e.lastName||""})},className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>f(e.id),className:"text-sm ".concat(e.isActive?"text-orange-400 hover:text-orange-300":"text-green-400 hover:text-green-300"),children:e.isActive?"Deactivate":"Activate"}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})})]},e.id))})]})})})]})})}}},e=>{e.O(0,[199,441,255,358],()=>e(e.s=7732)),_N_E=e.O()}]);