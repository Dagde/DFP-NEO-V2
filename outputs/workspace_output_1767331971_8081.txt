    const handleCancelEvent = (eventId: string, cancellationCode: string, manualCodeEntry?: string) => {
        console.log('ğŸš« ========== CANCELLATION STARTED ==========');
        console.log('ğŸš« Event ID:', eventId);
        console.log('ğŸš« Cancellation Code:', cancellationCode);
        console.log('ğŸš« Manual Entry:', manualCodeEntry);
        
        if (!selectedEvent) {
            console.error('âŒ No selected event!');
            return;
        }
        const eventDate = selectedEvent.date;
        console.log('ğŸ“… Event Date:', eventDate);
        console.log('ğŸ“‹ Selected Event:', selectedEvent);
        
        // Create cancellation record
        const personnelNames = [
            selectedEvent.instructor,
            selectedEvent.student,
            selectedEvent.pilot
        ].filter(Boolean).join(', ');
        
        const cancellationRecord: CancellationRecord = {
            eventId: selectedEvent.id,
            cancellationCode: cancellationCode,
            cancelledBy: `${currentUser}`,
            cancelledAt: new Date().toISOString(),
            manualCodeEntry: manualCodeEntry,
            eventDate: selectedEvent.date,
            eventType: selectedEvent.type === 'ftd' ? 'ftd' : 'flight',
            resourceType: selectedEvent.resourceId || 'Unknown',
            eventName: selectedEvent.flightNumber || selectedEvent.syllabusItem || 'N/A',
            personnelAffected: personnelNames || 'N/A',
            notes: selectedEvent.notes || '',
        };
        
        console.log('ğŸ“ Created cancellation record:', JSON.stringify(cancellationRecord, null, 2));
        
        // Save cancellation record
        const updatedRecords = [...cancellationRecords, cancellationRecord];
        setCancellationRecords(updatedRecords);
        localStorage.setItem('cancellationRecords', JSON.stringify(updatedRecords));
        console.log('ğŸ’¾ Saved cancellation records to localStorage. Total:', updatedRecords.length);
        
