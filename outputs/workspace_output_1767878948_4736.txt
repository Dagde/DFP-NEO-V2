const convertPersonnelToTrainee = (p: TraineeResponse): Trainee => ({
  id: p.id,
  idNumber: p.idNumber,
  fullName: p.fullName,
  name: p.name,
  rank: (p.rank as TraineeRank) || 'OCDT',
  service: p.service,
  course: p.course || '',
  lmpType: (p.lmpType as any) || 'BPC+IPC',
  traineeCallsign: p.traineeCallsign || '',
  seatConfig: (p.seatConfig as SeatConfig) || 'Normal',
  isPaused: p.isPaused || false,
  unit: p.unit || '',
  flight: p.flight || '',
  isAvailable: true, // Default to available if no unavailability
});

const convertAircraft = (a: AircraftResponse): Aircraft => ({
  id: a.id,
  aircraftNumber: a.aircraftNumber,
  type: a.type,
  status: a.status,
});

// Fetch wrapper with error handling
async function fetchAPI<T>(
  endpoint: string,
  options?: RequestInit
): Promise<ApiResponse<T>> {
  const url = `${API_BASE}${endpoint}`;
  
  console.log(`üåê API Request: ${url}`, {
    method: options?.method || 'GET',
    headers: options?.headers
  });
  
  try {
    const response = await fetch(url, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options?.headers,
      },
    });

    if (!response.ok) {
      console.error(`‚ùå HTTP ${response.status}: ${response.statusText}`);
      throw new Error(`API Error: ${response.status} ${response.statusText}`);
    }
