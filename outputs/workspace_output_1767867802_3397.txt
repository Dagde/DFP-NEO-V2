            completedEventIds.add(elce);
        }
    }

    let nextEvt: SyllabusItemDetail | null = null;
    let plusOneEvt: SyllabusItemDetail | null = null;
    let nextEventIndex = -1;

    // Find Next Event
    for (let i = 0; i < individualLMP.length; i++) {
        const item = individualLMP[i];
        if (completedEventIds.has(item.id) || item.code.includes(' MB')) {
            continue;
        }

        const prereqsMet = item.prerequisites.every(p => completedEventIds.has(p));
        if (prereqsMet) {
            nextEvt = item;
            nextEventIndex = i;
            
            // Debug logging for remedial events
            if (item.isRemedial) {
                console.log(`âœ… [${trainee.fullName}] Next event is REMEDIAL: ${item.code}`);
            }
            break;
        }
    }
    
    // Find Next +1 Event (sequentially)
    if (nextEventIndex !== -1) {
        for (let i = nextEventIndex + 1; i < individualLMP.length; i++) {
            const item = individualLMP[i];
            // Skip non-schedulable events
            if (!item.code.includes(' MB')) {
                plusOneEvt = item;
                break;
            }
        }
    }

    return { next: nextEvt, plusOne: plusOneEvt };
};

// Helper for Trainee Priority Scoring
const calculateTraineePriorityScore = (
    trainee: Trainee,
    buildDate: string,
    courseMedian: number,
    traineeProgress: number,
    isRemedial: boolean
): number => {
