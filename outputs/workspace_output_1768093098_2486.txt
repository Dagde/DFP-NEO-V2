export async function initializeData() {
    console.log('ğŸ”§ initializeData() - Starting data initialization');

    // Load data source settings from localStorage
    const dataSourceSettings = JSON.parse(localStorage.getItem('dataSourceSettings') || '{"staff":false,"trainee":false,"course":false}');
    console.log('ğŸ›ï¸ Data source settings:', dataSourceSettings);

    let instructors: any[] = [];
    let trainees: any[] = [];
    let aircraft: any[] = [];
    let scores: Record<string, any[]> = {};
    let events: any[] = [];

    try {
        console.log('ğŸŒ Initializing data from API...');

        // Fetch instructors (Staff)
        console.log('ğŸ‘¨â€ğŸ« Fetching instructors from API...');
        const dbInstructors = await fetchInstructors();
        console.log('âœ… Database instructors loaded:', dbInstructors.length);

        if (dataSourceSettings.staff) {
            // Merge database + mock data for staff
            console.log('ğŸ”— Merging staff data (Database + Mock)...');
            const mockInstructors = ESL_DATA.instructors || [];
            instructors = mergeInstructorData(dbInstructors, mockInstructors);
            console.log('âœ… Merged instructors total:', instructors.length);
        } else {
            // Use only database data
            console.log('ğŸ“¦ Using database only for staff...');
            instructors = dbInstructors;
        }

        // Fetch trainees
        console.log('ğŸ‘¨â€ğŸ“ Fetching trainees from API...');
        trainees = await fetchTrainees();
        console.log('âœ… Trainees loaded:', trainees.length);

        // Fetch aircraft
        console.log('âœˆï¸ Fetching aircraft from API...');
        aircraft = await fetchAircraft();
        console.log('âœ… Aircraft loaded:', aircraft.length);

        // Fetch scores
        console.log('ğŸ“Š Fetching scores from API...');
        scores = await fetchScores();
        console.log('âœ… Scores loaded:', Object.keys(scores).length, 'trainees with scores');

        // Fetch schedule
        console.log('ğŸ“… Fetching schedule from API...');
        events = await fetchSchedule();
