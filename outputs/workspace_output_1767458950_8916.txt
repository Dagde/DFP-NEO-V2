                    </div>
                </div>
            </div>
            {showCancelConfirm && (
                <CancelEventFlyout 
                    eventId={event.id}
                    eventType={event.type === 'ftd' ? 'ftd' : 'flight'}
                    onConfirm={(eventId, cancellationCode, manualCodeEntry) => {
                        if (onCancelEvent) {
                            onCancelEvent(eventId, cancellationCode, manualCodeEntry);
                        } else {
                            // Fallback to old delete behavior if onCancelEvent not provided
                            onDeleteRequest();
                        }
                        setShowCancelConfirm(false);
                    }}
                    onClose={() => setShowCancelConfirm(false)}
                    cancellationCodes={cancellationCodes}
                />
            )}
            {showMassBriefComplete && (
                <MassBriefCompleteFlyout
                    isOpen={showMassBriefComplete}
                    onClose={() => setShowMassBriefComplete(false)}
                    event={event}
                    trainees={
                        (() => {
                            console.log('ğŸ” Processing trainees for MassBriefCompleteFlyout');
                            console.log('ğŸ” Event:', event);
                            console.log('ğŸ” Event.attendees:', event.attendees);
                            console.log('ğŸ” Event.group:', event.group);
