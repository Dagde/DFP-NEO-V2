    const handleDeleteEvent = () => {
        if (!selectedEvent) return;
        const eventDate = selectedEvent.date;

        setHighestPriorityEvents(prev => prev.filter(e => e.id !== selectedEvent.id));

        const isNextDay = eventDate === buildDfpDate && (activeView === 'NextDayBuild' || activeView === 'Priorities' || activeView === 'ProgramData');

        if (isNextDay) {
            setNextDayBuildEvents(prev => prev.filter(e => e.id !== selectedEvent.id));
        } else {
            setPublishedSchedules((prev: Record<string, ScheduleEvent[]>) => {
                const newScheduleForDate = (prev[eventDate] || []).filter(e => e.id !== selectedEvent.id);
                return { ...prev, [eventDate]: newScheduleForDate };
            });
        }
        
        // NEW APPROACH: Trigger PT-051 sync after deletion (only for Active DFP)
        if (!isNextDay) {
            console.log('ðŸ“‹ Triggering PT-051 sync after event deletion...');
            setTimeout(() => {
                console.log('â° Executing delayed PT-051 sync after deletion...');
                setPublishedSchedules(currentSchedules => {
                    setPt051Assessments(currentAssessments => {
                        syncPt051WithActiveDfp(currentSchedules, currentAssessments);
                        return currentAssessments;
                    });
                    return currentSchedules;
                });
            }, 500);
        }
           
           // Log the deletion to audit trail
           const pageName = isNextDay ? 'Next Day Build' : 'Program Schedule';
           const eventType = selectedEvent.type || 'event';
           const personName = selectedEvent.student || selectedEvent.pilot || selectedEvent.instructor || 'Unknown';
           const description = `Deleted ${eventType} event for ${personName}`;
           const changes = `Event: ${selectedEvent.syllabusItem || selectedEvent.flightNumber || eventType}, Time: ${selectedEvent.startTime}, Duration: ${selectedEvent.duration}hrs`;
           
           logAudit(pageName, "Delete", description, changes);
        setSelectedEvent(null);
    };
    
    // Visual Adjust handlers
