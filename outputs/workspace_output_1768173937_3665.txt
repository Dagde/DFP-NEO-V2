                                handleNavigation('Instructors');
                            } else {
                                setSelectedPersonForProfile(selectedPersonForLogbook as Trainee);
                                handleNavigation('CourseRoster');
                            }
                        }}
                    />;
                }
                return null;
            case 'AUTH':
                return <AuthorisationView />;
            default:
                return <div>View not found</div>;
        }
    };

    // Note: Debug code removed for production deployment

    

    const handleNavigateToProfile = (user: any) => {
       console.log('ðŸŽ¹ Navigating to profile:', user);
       console.log('user:', JSON.stringify(user));
       
       // Use setSelectedPersonForProfile to directly open the profile
       // This works the same way as clicking on a trainee name in CourseRoster
       if (user.userType === 'STAFF') {
          console.log('Opening staff profile:', user.name);
          setSelectedPersonForProfile({
             name: user.name,
             idNumber: user.pmkeysId,
             role: 'INSTRUCTOR'
          } as Instructor);
          setSuccessMessage(`Navigated to Staff Profile: ${user.name}`);
       } else if (user.userType === 'TRAINEE') {
          console.log('Opening trainee profile:', user.name);
          setSelectedPersonForProfile({
             name: user.name,
             idNumber: user.pmkeysId,
             role: 'TRAINEE'
          } as Trainee);
          setSuccessMessage(`Navigated to Trainee Profile: ${user.name}`);
       }
    };
    return (
        <div id="app-content" className="flex h-screen bg-gray-900 text-white">
            <Sidebar
                activeView={activeView}
                onNavigate={handleNavigation}
                courseColors={courseColors}
                onAddCourse={(data) => setCourseColors(prev => ({ ...prev, [data.number]: data.color }))}
                onArchiveCourse={(courseNumber) => {
                    const color = courseColors[courseNumber];
                    if (color) {
                        const newActive = { ...courseColors };
                        delete newActive[courseNumber];
                        setCourseColors(newActive);
                        setArchivedCourses(prev => ({ ...prev, [courseNumber]: color }));
                    }
                }}
                onNextDayBuildClick={() => {
                    handleNavigation('NextDayBuild');
                }}
                onBuildDfpClick={handleBuildDfp}
                isSupervisor={true}
                onPublish={handlePublish}
                currentUserName={currentUserName}
                currentUserRank={currentUser?.rank || 'FLTLT'}
                instructorsList={instructorsData.map(inst => ({
                    name: inst.name,
                    rank: inst.rank,
                    unit: inst.unit,
                    pin: inst.pin || '1111'
                }))}
                onUserChange={handleUserChange}
            />
            <div className="flex-1 flex flex-col overflow-hidden">
                {activeView !== 'PostFlight' && <Header
                    onAddTile={() => {
                        // Debug alert removed - Add Tile functionality working correctly
                        setIsAddingTile(true);
