  // Determine flyout direction based on segment type
  // 'start' segment means it starts today and ends tomorrow (renders at right edge) -> flyout left
  // 'end' segment means it started yesterday and ends today (renders at left edge) -> flyout right
  // Default to right for normal small tiles unless they are near the right edge (heuristic)
  const isEndSegment = segment.segmentType === 'start'; 
  const flyoutToLeft = isEndSegment || (effectiveStartTime + effectiveDuration > 22); // Logic: if it ends late in the day, flyout left

  const style: React.CSSProperties = {
    left: `${(effectiveStartTime - startHour) * pixelsPerHour}px`,
    top: `${row * rowHeight}px`,
    width: `${tileWidth}px`,
