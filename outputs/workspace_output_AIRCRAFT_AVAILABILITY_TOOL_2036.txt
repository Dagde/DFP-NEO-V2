{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "`),Math.round(y*10)/10}function Qx(n){return n.toISOString().split(\\\\"T\\\\")[0]}function Q5(n){return n.map(t=>({time:new Date(t.timestamp).toLocaleTimeString(\\\\"en-US\\\\",{hour12:!1,hour:\\\\"2-digit\\\\",minute:\\\\"2-digit\\\\"}),availability:t.available}))}const ew=({currentDate:n,totalAircraft:t,plannedAvailability:s,dayFlyingStart:i,dayFlyingEnd:o,gridHeight:l,rowHeight:d,pixelsPerHour:u,startHour:f,onAvailabilityChange:h})=>{const[m,v]=C.useState(s),[x,y]=C.useState([]),T=C.useRef(null);C.useEffect(()=>{var F;const Oe=Qx(n),se=localStorage.getItem(`aircraft-availability-${Oe}`);if(se){const J=JSON.parse(se);y(J.snapshots.map(X=>({...X,timestamp:new Date(X.timestamp)}))),v(((F=J.snapshots[J.snapshots.length-1])==null?void 0:F.available)||s)}else{const J={timestamp:(()=>{const K=new Date(n);return K.setHours(0,0,1,0),K})(),available:s,total:t,notes:\\\\"Initial planned availability at start of day\\\\"};y([J]),v(s);const X=`Aircraft availability initialized at ${s} (${t-s} aircraft unavailable)`,ee=`Time: ${new Date().toLocaleTimeString()} | Initial: ${s} | Total: ${t} | Type: Initial setup`;Pn({page:\\\\"Program Schedule\\\\",action:\\\\"Add\\\\",description:X,changes:ee})}},[n,s,t]),C.useEffect(()=>{if(x.length>0){const Oe=Q5(x),se=Z5(Oe,i.replace(\\\\":\\\\",\\\\"\\\\"),o.replace(\\\\":\\\\",\\\\"\\\\")),F={date:Qx(n),snapshots:x,averageAvailability:se,dayFlyingStart:i,dayFlyingEnd:o};localStorage.setItem(`aircraft-availability-${F.date}`,JSON.stringify(F)),h(F)}},[x,i,o,n,h]);const E=Oe=>Oe*d,A=Oe=>(Oe.getHours()+Oe.getMinutes()/60-f)*u,_=()=>{const Oe=new Date(n);return Oe.setHours(23,59,59),A(Oe)},[R,H]=C.useState(!1),[O,W]=C.useState(0),[ne,V]=C.useState(0),U=Oe=>{if(!T.current)return;Oe.preventDefault();const se=T.current.getBoundingClientRect(),F=Oe.clientY-se.top,J=Oe.clientX-se.left;console.log(\\\\"\\\\ud83d\\\\uddb1\\\\ufe0f DRAG START:\\\\",{timestamp:new Date().toISOString(),mouseY:F,mouseX:J,currentAvailable:m,snapshotsCount:x.length,snapshots:x.map(X=>({time:X.timestamp.toLocaleTimeString(),available:X.available}))}),H(!0),W(F),V(J)},D=Oe=>{if(!R||!T.current)return;const se=T.current.getBoundingClientRect(),F=Oe.clientY-se.top,J=Oe.clientX-se.left;W(F),V(J);const X=F/d,ee=X,K=Math.max(0,Math.min(t,ee));console.log(\\\\"\\\\ud83d\\\\udd04 DRAGGING:\\\\",{mouseY:F,rowsFromTop:X.toFixed(2),exactCount:ee.toFixed(2),clampedCount:K.toFixed(2),currentAvailable:m.toFixed(2)}),v(K)},$=()=>{var Oe;if(R){H(!1);const se=O/d,F=se,J=Math.round(Math.max(0,Math.min(t,F))),X=((Oe=x[x.length-1])==null?void 0:Oe.available)||s,ee=J!==X;console.log(\\\\"\\\\u2705 DRAG END:\\\\",{timestamp:new Date().toISOString(),dragY:O.toFixed(2),rowsFromTop:se.toFixed(2),exactCount:F.toFixed(2),snappedCount:J,previousAvailability:X,valueChanged:ee,snapshotsBeforeUpdate:x.length}),v(J);const K=`Aircraft availability changed from ${X} to ${J} (${t-J} aircraft unavailable)`,ue=`Time: ${new Date().toLocaleTimeString()} | Previous: ${X} | New: ${J} | Total: ${t}`;if(Pn({page:\\\\"Program Schedule\\\\",action:\\\\"Edit\\\\",description:K,changes:ue}),ee){const xe=new Date,Le=new Date(n.getFullYear(),n.getMonth(),n.getDate(),xe.getHours(),xe.getMinutes(),xe.getSeconds(),xe.getMilliseconds());console.log(\\\\"\\\\ud83d\\\\udd50 TIMESTAMP DEBUG:\\\\",{now:xe.toISOString(),nowLocal:xe.toLocaleString(),currentDate:n.toISOString(),currentDateLocal:n.toLocaleString(),snapshotTime:Le.toISOString(),snapshotTimeLocal:Le.toLocaleString(),nowHours:xe.getHours(),nowMinutes:xe.getMinutes(),snapshotHours:Le.getHours(),snapshotMinutes:Le.getMinutes()});const ye={timestamp:Le,available:J,total:t,notes:`Availability changed to ${J}`};console.log(\\\\"\\\\ud83d\\\\udcf8 CREATING NEW SNAPSHOT:\\\\",{newSnapshot:{time:ye.timestamp.toLocaleTimeString(),available:ye.available,total:ye.total},snapshotsAfterUpdate:x.length+1}),y(pe=>{const ce=[...pe,ye];return console.log(\\\\"\\\\ud83d\\\\udcca SNAPSHOTS UPDATED:\\\\",{count:ce.length,all:ce.map(He=>({time:He.timestamp.toLocaleTimeString(),available:He.available}))}),ce})}else console.log(\\\\"\\\\u23ed\\\\ufe0f NO SNAPSHOT CREATED - Value unchanged\\\\")}};C.useEffect(()=>{if(R)return window.addEventListener(\\\\"mousemove\\\\",D),window.addEventListener(\\\\"mouseup\\\\",$),()=>{window.removeEventListener(\\\\"mousemove\\\\",D),window.removeEventListener(\\\\"mouseup\\\\",$)}},[R,m,t,d,x]);const[,M]=C.useState(new Date);C.useEffect(()=>{const Oe=setInterval(()=>{M(new Date)},6e4);return()=>clearInterval(Oe)},[]);const P=R?O:E(m),ae=_(),Q=()=>{if(x.length===0)return console.log(\\\\"\\\\ud83d\\\\udccf RENDER HISTORICAL LINES: No snapshots\\\\"),null;const se=A(new Date),F=x;console.log(\\\\"\\\\ud83d\\\\udccf RENDER HISTORICAL LINES:\\\\",{originalCount:x.length,filteredCount:F.length,isDragging:R,currentAvailable:m,currentTimeX:se.toFixed(2)});const J=[];for(let X=0;X<F.length;X++){const ee=F[X],K=A(ee.timestamp);if(X===F.length-1&&K>=se){console.log(`  \\\\u23ed\\\\ufe0f Skipping Line ${X} (most recent, at/after current time)`);continue}const ue=X===0?0:K,xe=X===F.length-1?se:A(F[X+1].timestamp),Le=E(ee.available);if((X===0||X===5||X===F.length-1)&&console.log(`  \\\\ud83d\\\\udccd Line ${X}:`,{time:ee.timestamp.toLocaleTimeString(),available:ee.available,startX:ue.toFixed(2),endX:xe.toFixed(2),y:Le.toFixed(2),timestampRaw:ee.timestamp.toISOString()}),J.push(e.jsx(\\\\"line\\\\",{x1:ue,y1:Le,x2:xe,y2:Le,stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",strokeDasharray:\\\\"8 4\\\\",className:\\\\"pointer-events-none\\\\"},`history-${X}`)),X>0){const ye=F[X-1],pe=E(ye.available);ye.available!==ee.available&&J.push(e.jsx(\\\\"line\\\\",{x1:ue,y1:pe,x2:ue,y2:Le,stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",strokeDasharray:\\\\"8 4\\\\",className:\\\\"pointer-events-none\\\\"},`vertical-${X}`))}}return J},Te=x.length>0?x[x.length-1]:null,Y=Te?A(Te.timestamp):0,fe=new Date,ge=A(fe);Te&&console.log(\\\\"\\\\ud83d\\\\udd50 TIMESTAMP COMPARISON:\\\\",{now:fe.toISOString(),nowLocal:fe.toLocaleTimeString(),nowHours:fe.getHours(),nowMinutes:fe.getMinutes(),lastSnapshotTime:Te.timestamp.toISOString(),lastSnapshotLocal:Te.timestamp.toLocaleTimeString(),lastSnapshotHours:Te.timestamp.getHours(),lastSnapshotMinutes:Te.timestamp.getMinutes(),currentTimeX:ge.toFixed(2),lastChangeX:Y.toFixed(2),difference:(ge-Y).toFixed(2)});const Ne=Te&&ge>Y&&ge<ae;return console.log(\\\\"\\\\ud83c\\\\udfaf SOLID LINE CALCULATION:\\\\",{hasLastSnapshot:!!Te,lastSnapshotTime:Te==null?void 0:Te.timestamp.toLocaleTimeString(),lastSnapshotTimestamp:Te==null?void 0:Te.timestamp.toISOString(),lastSnapshotAvailable:Te==null?void 0:Te.available,lastChangeX:Y.toFixed(2),currentTimeX:ge.toFixed(2),endOfDayX:ae.toFixed(2),displayY:P.toFixed(2),isDragging:R,needsSplit:Ne,currentTime:fe.toISOString(),currentDate:n.toISOString()}),e.jsx(e.Fragment,{children:e.jsxs(\\\\"svg\\\\",{ref:T,className:\\\\"absolute top-0 left-0 w-full h-full\\\\",style:{zIndex:5,pointerEvents:\\\\"none\\\\"},children:[Q(),Te&&e.jsx(\\\\"g\\\\",{children:Ne?e.jsxs(e.Fragment,{children:[e.jsx(\\\\"line\\\\",{x1:ge,y1:P,x2:ae,y2:P,stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",className:\\\\"pointer-events-none\\\\"}),e.jsx(\\\\"line\\\\",{x1:ge,y1:P,x2:ae,y2:P,stroke:\\\\"transparent\\\\",strokeWidth:\\\\"20\\\\",style:{pointerEvents:\\\\"auto\\\\",cursor:\\\\"ns-resize\\\\"},onMouseDown:U})]}):e.jsx(e.Fragment,{children:ge<Y?e.jsxs(e.Fragment,{children:[e.jsx(\\\\"line\\\\",{x1:Y,y1:E(Te.available),x2:ge,y2:E(Te.available),stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",strokeDasharray:\\\\"8 4\\\\",className:\\\\"pointer-events-none\\\\"}),e.jsx(\\\\"line\\\\",{x1:ge,y1:P,x2:ae,y2:P,stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",className:\\\\"pointer-events-none\\\\"}),e.jsx(\\\\"line\\\\",{x1:ge,y1:P,x2:ae,y2:P,stroke:\\\\"transparent\\\\",strokeWidth:\\\\"20\\\\",style:{pointerEvents:\\\\"auto\\\\",cursor:\\\\"ns-resize\\\\"},onMouseDown:U})]}):e.jsxs(e.Fragment,{children:[e.jsx(\\\\"line\\\\",{x1:Y,y1:P,x2:ae,y2:P,stroke:\\\\"rgba(236, 72, 153, 0.4)\\\\",strokeWidth:\\\\"2\\\\",strokeDasharray:ge>=ae?\\\\"8 4\\\\":void 0,className:\\\\"pointer-events-none\\\\"}),ge<ae&&e.jsx(\\\\"line\\\\",{x1:Y,y1:P,x2:ae,y2:P,stroke:\\\\"transparent\\\\",strokeWidth:\\\\"20\\\\",style:{pointerEvents:\\\\"auto\\\\",cursor:\\\\"ns-resize\\\\"},onMouseDown:U})]})})})]})})},_v=({event:n,onTimeChange:t,scheduleStartHour:s=0,scheduleEndHour:i=24,pixelsPerHour:o=200,totalWidth:l})=>{console.log(\\\\"VisualAdjustGuide rendered with event:\\\\",n),console.log(\\\\"pixelsPerHour:\\\\",o);const[d,u]=C.useState(!1),[f,h]=C.useState(!1),[m,v]=C.useState(n.startTime),[x,y]=C.useState(n.startTime+n.duration),T=C.useRef(null),E=ne=>(ne-s)*o,A=ne=>{const V=ne/o,U=s+V;return Math.round(U*12)/12},_=ne=>V=>{V.preventDefault(),ne?u(!0):h(!0)},R=ne=>{if(!T.current||!d&&!f)return;const V=T.current.getBoundingClientRect(),U=ne.clientX-V.left,D=A(U);d?D<x&&(v(D),t(D,x)):f&&D>m&&(y(D),t(m,D))},H=()=>{u(!1),h(!1)};C.useEffect(()=>{if(d||f)return document.addEventListener(\\\\"mousemove\\\\",R),document.addEventListener(\\\\"mouseup\\\\",H),()=>{document.removeEventListener(\\\\"mousemove\\\\",R),document.removeEventListener(\\\\"mouseup\\\\",H)}},[d,f,m,x]);const O=E(m),W=E(x);return console.log(\\\\"Guide positions - startX:\\\\",O,\\\\"endX:\\\\",W),console.log(\\\\"Current times - start:\\\\",m,\\\\"end:\\\\",x),e.jsxs(\\\\"div\\\\",{ref:T,className:\\\\"absolute inset-0 pointer-events-none\\\\",style:{zIndex:100},children:[e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 bottom-0 w-0.5 border-l-2 border-dashed border-blue-500 pointer-events-auto cursor-ew-resize\\\\",style:{left:`${O}px`},onMouseDown:_(!0),children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-1 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-ew-resize\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -bottom-1 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-ew-resize\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 bottom-0 w-0.5 border-l-2 border-dashed border-red-500 pointer-events-auto cursor-ew-resize\\\\",style:{left:`${W}px`},onMouseDown:_(!1),children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-1 -left-2 w-4 h-4 bg-red-500 rounded-full cursor-ew-resize\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -bottom-1 -left-2 w-4 h-4 bg-red-500 rounded-full cursor-ew-resize\\\\"})]}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 bottom-0 bg-purple-500/20 pointer-events-none\\\\",style:{left:`${O}px`,width:`${W-O}px`}})]})},sr=200,zi=32,ur=0,El=24,tw=El-ur,ey=144,ty=40,nw=(n,t)=>{if(!n||!t||n.duration<=0||t.duration<=0)return!1;const s=n.startTime+n.duration,i=t.startTime+t.duration;return n.startTime<i&&s>t.startTime},Y0=n=>{const t=[];return n.flightType===\\\\"Solo\\\\"?n.pilot&&t.push(n.pilot):(n.instructor&&t.push(n.instructor),n.student&&t.push(n.student)),n.attendees&&t.push(...n.attendees),t},sw=(n,t)=>{if(!t)return!1;const s=t.find(o=>o.id===n.id);if(!s)return!0;const i=.001;return Math.abs(n.startTime-s.startTime)>i||Math.abs(n.duration-s.duration)>i?!0:n.resourceId!==s.resourceId||n.instructor!==s.instructor||n.student!==s.student||n.pilot!==s.pilot||(n.area||\\\\"\\\\")!==(s.area||\\\\"\\\\")},ny=n=>n.startsWith(\\\\"PC-21\\\\")||n.startsWith(\\\\"Deployed\\\\")?\\\\"PC-21\\\\":n.startsWith(\\\\"STBY\\\\")?\\\\"STBY\\\\":n===\\\\"Duty Sup\\\\"?\\\\"Duty Sup\\\\":n===\\\\"TWR DI\\\\"?\\\\"TWR DI\\\\":n.startsWith(\\\\"FTD\\\\")?\\\\"FTD\\\\":n.startsWith(\\\\"CPT\\\\")?\\\\"CPT\\\\":n.startsWith(\\\\"Ground\\\\")?\\\\"Ground\\\\":\\\\"Other\\\\",rw=({date:n,onDateChange:t,events:s,resources:i,instructors:o,traineesData:l,airframeCount:d,standbyCount:u,ftdCount:f,cptCount:h,onUpdateEvent:m,onSelectEvent:v,onReorderResources:x,zoomLevel:y,showValidation:T,showPrePost:E,syllabusDetails:A,personnelData:_,seatConfigs:R,daylightTimes:H,personnelConflicts:O,personnelConflictIds:W,unavailabilityConflicts:ne,onCptConflict:V,isMultiSelectMode:U,selectedEventIds:D,setSelectedEventIds:$,baselineEvents:M,isVisualAdjustMode:P=!1,visualAdjustEvent:ae=null,onVisualAdjustTimeChange:Q,isOracleMode:Te,oraclePreviewEvent:Y,onOracleMouseDown:fe,onOracleMouseMove:ge,onOracleMouseUp:Ne,detectConflictsForEvent:Oe,showDepartureDensityOverlay:se,showAircraftAvailability:F,plannedAvailability:J,dayFlyingStart:X,dayFlyingEnd:ee,onAvailabilityChange:K,timezoneOffset:ue=11})=>{const xe=C.useRef(null),Le=C.useRef(null),[ye,pe]=C.useState(()=>{const Tt=new Date,lt=ue*60*60*1e3;return new Date(Tt.getTime()+lt)}),ce=C.useRef(!0),He=C.useRef(y);C.useEffect(()=>{const Tt=()=>{const Et=new Date,Bt=ue*60*60*1e3,Kt=new Date(Et.getTime()+Bt);pe(Kt)};Tt();const lt=setInterval(Tt,1e3);return()=>clearInterval(lt)},[ue]);const[_e,Z]=C.useState(null),[Fe,Xe]=C.useState(null),[ft,tt]=C.useState(null),[We,Ke]=C.useState(null),nt=C.useRef(!1),Ct=C.useRef(null),[xt,dn]=C.useState(null),[on,st]=C.useState(null);C.useEffect(()=>{const Tt=setInterval(()=>{const Bt=new Date,Kt=ue*60*60*1e3,Mt=new Date(Bt.getTime()+Kt);pe(Mt)},1e3),lt=Bt=>{_e&&(console.log(\\\\"Global mouse move - drag state active\\\\"),vt(Bt))},Et=Bt=>{console.log(\\\\"Global mouse up called, draggingState exists:\\\\",!!_e),_e&&(console.log(\\\\"Global mouse up - ending drag\\\\"),document.body.classList.remove(\\\\"no-select\\\\"),Z(null),Xe(null),tt(null),Ke(null))};return document.addEventListener(\\\\"mousemove\\\\",lt),document.addEventListener(\\\\"mouseup\\\\",Et),()=>{clearInterval(Tt),document.removeEventListener(\\\\"mousemove\\\\",lt),document.removeEventListener(\\\\"mouseup\\\\",Et)}},[_e]);const kt=C.useMemo(()=>{const[Tt,lt,Et]=n.split(\\\\"-\\\\").map(Number);return new Date(Date.UTC(Tt,lt-1,Et)).toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\",timeZone:\\\\"UTC\\\\"})},[n]);C.useEffect(()=>{const Tt=xe.current;if(Tt){if(ce.current){const Et=(8-ur)*sr*y;Tt.scrollLeft=Et,ce.current=!1}else{const lt=He.current;if(lt===y)return;const{scrollLeft:Et,clientWidth:Bt}=Tt,Mt=(Et+Bt/2)/(sr*lt)*sr*y-Bt/2;Tt.scrollLeft=Mt}He.current=y}},[y]);const Ge=C.useCallback((Tt,lt)=>{for(const Et of Tt){const Bt=A.find(Ve=>Ve.id===Et.flightNumber);if(!Bt)continue;const Kt=Et.startTime-(Bt.preFlightTime||0),Mt=Et.startTime+Et.duration+(Bt.postFlightTime||0);for(const Ve of lt){const qt=A.find(je=>je.id===Ve.flightNumber);if(!qt)continue;const Mn=Ve.startTime-(qt.preFlightTime||0),jn=Ve.startTime+Ve.duration+(qt.postFlightTime||0);if(Kt<jn&&Mt>Mn){const je=Y0(Et),$e=Y0(Ve),Ye=je.find(Dt=>$e.includes(Dt));if(Ye)return{conflictingEvent:Ve,personName:Ye}}}}return null},[A]),ht=(Tt,lt)=>{if(console.log(\\\\"handleMouseDown called, event:\\\\",lt==null?void 0:lt.id,\\\\"isMultiSelectMode:\\\\",U),console.log(\\\\"Event target:\\\\",Tt.target),console.log(\\\\"Current target:\\\\",Tt.currentTarget),Tt.button===0){if(nt.current=!1,document.body.classList.add(\\\\"no-select\\\\"),Te&&!lt){if(!Le.current)return;const Et=Le.current.getBoundingClientRect(),Kt=(Tt.clientX-Et.left)/(sr*y)+ur,Mt=Tt.clientY-Et.top,Ve=Math.floor(Mt/zi),qt=i[Ve]||i[0];fe(Kt,qt);return}if(lt){const Bt=Tt.currentTarget.getBoundingClientRect(),Kt=new Map,Mt=new Map,Ve=qt=>{console.log(\\\\"\\\\ud83d\\\\udc0d Processing event for drag:\\\\",qt.id,\\\\"resourceId:\\\\",qt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Available resources:\\\\",i);const Mn=i.indexOf(qt.resourceId);console.log(\\\\"\\\\ud83d\\\\udc0d Found row index:\\\\",Mn),Mn!==-1?(Kt.set(qt.id,{startTime:qt.startTime,rowIndex:Mn}),Mt.set(qt.id,qt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Event added to initialPositions\\\\")):console.log(\\\\"\\\\ud83d\\\\udc0d Event NOT added - resourceId not found in resources\\\\")};U&&D.has(lt.id)?D.forEach(qt=>{const Mn=s.find(jn=>jn.id===qt);Mn&&Ve(Mn)}):Ve(lt),Kt.size>0?(console.log(\\\\"Setting dragging state with\\\\",Kt.size,\\\\"events for event:\\\\",lt.id),console.log(\\\\"initialPositions:\\\\",Kt),Z({mainEventId:lt.id,xOffset:(Tt.clientX-Bt.left)/y,yOffset:Tt.clientY-Bt.top,initialPositions:Kt,originalResourceIds:Mt}),console.log(\\\\"setDraggingState called with:\\\\",_e)):console.log(\\\\"No initial positions - drag state not set\\\\")}else{if(!U||!Le.current)return;const Et=Le.current.getBoundingClientRect(),Bt=Tt.clientX-Et.left,Kt=Tt.clientY-Et.top;Ct.current={x:Bt,y:Kt},dn({x:Bt,y:Kt,width:0,height:0})}}},vt=Tt=>{if(console.log(\\\\"handleMouseMove called, draggingState exists:\\\\",!!_e),!Le.current){console.log(\\\\"Early return: no scheduleGridRef\\\\");return}nt.current=!0;const lt=Le.current.getBoundingClientRect(),Et=Tt.clientX-lt.left,Bt=Tt.clientY-lt.top;if(T){const Kt=Et/(sr*y)+ur;st(Kt)}if(Te&&Y){console.log(\\\\"Early return: Oracle mode with preview event\\\\");const Kt=Et/(sr*y)+ur,Mt=i[Math.floor(Bt/zi)]||i[0];ge(Kt,Mt)}else{if(Ct.current){console.log(\\\\"Early return: selectionStartPoint active (marquee selection)\\\\");const Ye=Tt.clientX-lt.left,Dt=Tt.clientY-lt.top,St=Math.min(Ct.current.x,Ye),hn=Math.min(Ct.current.y,Dt),Ce=Math.abs(Ye-Ct.current.x),At=Math.abs(Dt-Ct.current.y);dn({x:St,y:hn,width:Ce,height:At});const B=St,Ae=St+Ce,rt=hn,yt=hn+At,et=new Set;s.forEach($t=>{const pn=i.indexOf($t.resourceId);if(pn===-1)return;const kn=pn*zi,ts=kn+zi,un=($t.startTime-ur)*sr*y,Nn=un+$t.duration*sr*y;B<Nn&&Ae>un&&rt<ts&&yt>kn&&et.add($t.id)}),$(et);return}if(!_e){console.log(\\\\"Early return: no draggingState\\\\");return}const Kt=_e.initialPositions.get(_e.mainEventId);if(!Kt)return;const Mt=(Et/y-_e.xOffset)/sr-Kt.startTime,Ve=Math.floor((Bt-_e.yOffset+zi/2)/zi)-Kt.rowIndex;console.log(\\\\"Drag calculation - timeShift:\\\\",Mt,\\\\"rowShift:\\\\",Ve,\\\\"xInGrid:\\\\",Et,\\\\"yInGrid:\\\\",Bt);const qt=[],Mn=[...s];let jn=null,je=null;for(const[Ye,Dt]of _e.initialPositions.entries()){const St=s.find(yt=>yt.id===Ye);if(!St)continue;let hn=Dt.startTime+Mt,Ce=Dt.rowIndex+Ve;Ce<0&&(Ce=0),Ce>=i.length&&(Ce=i.length-1),hn<ur&&(hn=ur),hn+St.duration>El&&(hn=El-St.duration);const At=Math.round(hn*12)/12,B=i[Ce];qt.push({eventId:Ye,newStartTime:At,newResourceId:B});const Ae=Mn.findIndex(yt=>yt.id===Ye);Ae!==-1&&(Mn[Ae]={...Mn[Ae],startTime:At,resourceId:B});const rt=s.find(yt=>yt.id!==Ye&&!_e.initialPositions.has(yt.id)&&yt.resourceId===B&&nw({...St,startTime:At},yt));rt&&(jn=rt.id)}if(qt.find(Ye=>Ye.eventId===_e.mainEventId)){const Ye=Mn.find(hn=>hn.id===_e.mainEventId),Dt=Mn.filter(hn=>!_e.initialPositions.has(hn.id));let St=null;if(Oe)if(St=Oe(Ye,Dt),console.log(\\\\"\\\\ud83d\\\\udd0d Drag conflict check:\\\\",{eventId:Ye.id,hasConflict:St.hasConflict,conflictType:St.conflictType}),St.hasConflict){if(Xe({conflictingEventId:St.conflictingEventId,conflictedPersonName:St.conflictedPersonnel||\\\\"\\\\"}),Ye.flightNumber.includes(\\\\"CPT\\\\")&&St.conflictType===\\\\"personnel\\\\"){const hn=Dt.find(Ce=>Ce.id===St.conflictingEventId);hn&&(je={conflictingEvent:hn,newEvent:Ye,conflictedPerson:\\\\"trainee\\\\"})}}else Xe(null);else{const hn=Ge([Ye],Dt);hn?(Xe({conflictingEventId:hn.conflictingEvent.id,conflictedPersonName:hn.personName}),Ye.flightNumber.includes(\\\\"CPT\\\\")&&(je={conflictingEvent:hn.conflictingEvent,newEvent:Ye,conflictedPerson:\\\\"trainee\\\\",personName:hn.personName})):Xe(null)}}tt(jn),Ke(je),console.log(\\\\"\\\\ud83d\\\\udc0d DRAG COMPLETE - Calling onUpdateEvent with\\\\",qt.length,\\\\"updates:\\\\"),console.log(\\\\"\\\\ud83d\\\\udc0d Updates:\\\\",qt),m(qt)}},Ht=Tt=>{if(console.log(\\\\"Local handleMouseUp called - ignoring when dragState exists:\\\\",!!_e),_e){console.log(\\\\"Ignoring local mouse up - global handler will manage\\\\");return}document.body.classList.remove(\\\\"no-select\\\\"),Te&&Ne(),We&&V(We),console.log(\\\\"Clearing drag state in local handleMouseUp\\\\"),Z(null),Xe(null),tt(null),Ke(null),st(null),Ct.current&&U&&(Ct.current=null,dn(null),!nt.current&&!Tt.shiftKey&&(Tt.target.closest(\\\'[data-is-flight-tile=\\\\"true\\\\"]\\\')||$(new Set))),setTimeout(()=>{nt.current=!1},0)},ze=C.useCallback(Tt=>{if(!Tt||!/^\\\\\\\\d{2}:\\\\\\\\d{2}$/.test(Tt))return null;const[lt,Et]=Tt.split(\\\\":\\\\").map(Number);return lt+Et/60},[]),we=()=>{const Tt=[];for(let Bt=ur;Bt<=El;Bt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-gray-500 flex items-center\\\\",style:{left:(Bt-ur)*sr*y},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`${String(Bt).padStart(2,\\\\"0\\\\")}:00`})},Bt));const lt=ze(H.firstLight),Et=ze(H.lastLight);if(lt!==null){const Bt=(lt-ur)*sr*y;Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:Bt},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`FL ${H.firstLight}`})},\\\\"fl-label\\\\"))}if(Et!==null){const Bt=(Et-ur)*sr*y;Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:Bt},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`LL ${H.lastLight}`})},\\\\"ll-label\\\\"))}return Tt},Re=()=>{const Tt=[];for(let lt=ur;lt<=El;lt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(lt-ur)*sr*y},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/50\\\\"})},`v-${lt}`)),lt<El&&Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(lt-ur+.5)*sr*y},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/25\\\\"})},`v-${lt}-30`));for(let lt=1;lt<=i.length;lt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full bg-gray-700/25\\\\",style:{top:lt*zi,height:\\\\"1px\\\\"}},`h-${lt}`));return Tt},be=()=>{const Tt=[];let lt=ny(i[0]);for(let Et=1;Et<i.length;Et++){const Bt=ny(i[Et]);Bt!==lt&&(Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full border-t-2 border-gray-500 z-10\\\\",style:{top:Et*zi}},`sep-${Et}`)),lt=Bt)}return Tt},Ze=()=>{const Tt=ze(H.firstLight),lt=ze(H.lastLight);return e.jsxs(e.Fragment,{children:[Tt!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(Tt-ur)*sr*y}px`}}),lt!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(lt-ur)*sr*y}px`}})]})},ot=()=>{const Tt=ze(H.firstLight),lt=ze(H.lastLight),Et=[];if(Tt!==null&&Tt>ur){const Bt=(Tt-ur)*sr*y;Et.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{width:`${Bt}px`}},\\\\"night-shade-morning\\\\"))}if(lt!==null&&lt<El){const Bt=(lt-ur)*sr*y,Kt=(El-lt)*sr*y;Et.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{left:`${Bt}px`,width:`${Kt}px`}},\\\\"night-shade-evening\\\\"))}return e.jsx(e.Fragment,{children:Et})},Vt=()=>{const lt=(Mt=>{const Ve=Mt.getUTCFullYear(),qt=String(Mt.getUTCMonth()+1).padStart(2,\\\\"0\\\\"),Mn=String(Mt.getUTCDate()).padStart(2,\\\\"0\\\\");return`${Ve}-${qt}-${Mn}`})(ye);if(n!==lt)return null;const Et=ye,Bt=Et.getUTCHours()+Et.getUTCMinutes()/60+Et.getUTCSeconds()/3600;if(Bt<ur||Bt>El)return null;const Kt=(Bt-ur)*sr*y;return e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[30] pointer-events-none\\\\",style:{left:`${Kt}px`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-0.5 h-full bg-white animate-pulse\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-2.5 -translate-x-1/2 w-0 h-0\\\\",style:{borderLeft:\\\\"5px solid transparent\\\\",borderRight:\\\\"5px solid transparent\\\\",borderTop:\\\\"7px solid white\\\\"}})]})},Pt=()=>{if(!T||on===null||!se)return null;const Tt=on-.5,lt=on+.5,Et=s.filter(Ve=>Ve.type!==\\\\"flight\\\\"?!1:Ve.startTime>=Tt&&Ve.startTime<lt).length,Bt=(Tt-ur)*sr*y,Kt=(lt-ur)*sr*y,Mt=Kt-Bt;return e.jsxs(e.Fragment,{children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/10 pointer-events-none z-[25]\\\\",style:{left:`${Bt}px`,width:`${Mt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full w-0.5 bg-white/40 pointer-events-none z-[26]\\\\",style:{left:`${Bt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full w-0.5 bg-white/40 pointer-events-none z-[26]\\\\",style:{left:`${Kt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-2 bg-gray-800/95 border border-white/30 rounded px-3 py-1.5 shadow-lg pointer-events-none z-[27]\\\\",style:{left:`${Bt+Mt/2}px`,transform:\\\\"translateX(-50%)\\\\"},children:e.jsxs(\\\\"div\\\\",{className:\\\\"text-white text-xs font-semibold whitespace-nowrap\\\\",children:[\\\\"Flights starting in this hour: \\\\",e.jsx(\\\\"span\\\\",{className:\\\\"text-sky-400\\\\",children:Et})]})})]})},yn=()=>i.flatMap((Tt,lt)=>s.filter(Bt=>Bt.resourceId===Tt).map(Bt=>{const Kt=!!(_e&&_e.initialPositions.has(Bt.id)),Mt=Bt.id===(Fe==null?void 0:Fe.conflictingEventId)||Bt.id===ft,Ve=T&&W.has(Bt.id)||Mt||Kt&&!!(Fe||ft),qt=ne.get(Bt.id),Mn=!!qt,jn=qt||[];let je=null;if(Fe){const Dt=Y0(Bt);(Kt||Mt)&&Dt.includes(Fe.conflictedPersonName)&&(je=Fe.conflictedPersonName)}const $e=D.has(Bt.id),Ye=sw(Bt,M);return e.jsx(Gc,{event:Bt,traineesData:l,onSelectEvent:()=>{if(!nt.current)if(U){const Dt=new Set(D);Dt.has(Bt.id)?Dt.delete(Bt.id):Dt.add(Bt.id),$(Dt)}else v(Bt)},onMouseDown:Dt=>ht(Dt,Bt),onMouseEnter:()=>{},onMouseLeave:()=>{},pixelsPerHour:sr*y,rowHeight:zi,startHour:ur,row:lt,isDragging:Kt,isConflicting:Ve,isUnavailabilityConflict:Mn,unavailablePersonnel:jn,conflictedPersonnelName:je,personnelData:_,seatConfigs:R,isDraggable:!0,currentTime:ye,isSelected:$e,isChanged:Ye},Bt.id)}));return e.jsx(\\\\"div\\\\",{ref:xe,className:\\\\"flex-1 overflow-auto relative bg-gray-900 select-none\\\\",children:e.jsxs(\\\\"div\\\\",{style:{width:`${ey+tw*sr*y}px`,height:`${ty+i.length*zi}px`,display:\\\\"grid\\\\",gridTemplateColumns:`${ey}px 1fr`,gridTemplateRows:`${ty}px 1fr`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"sticky top-0 left-0 z-40 bg-gray-800 border-r border-b border-gray-700 p-1\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-700 rounded-md w-full h-full flex items-center justify-center px-2 space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(-1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:\\\\"<\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"flex-grow min-w-0 text-center font-semibold text-white cursor-default truncate text-xs\\\\",children:kt}),e.jsx(\\\\"button\\\\",{onClick:()=>t(1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:\\\\">\\\\"})]})}),e.jsx(\\\\"div\\\\",{className:\\\\"sticky top-0 z-20 bg-gray-800 border-b border-gray-700 relative\\\\",children:we()}),e.jsx(\\\\"div\\\\",{className:\\\\"sticky left-0 z-30 bg-gray-800 border-r border-gray-700\\\\",children:e.jsx(Dv,{resources:i,onReorder:x,rowHeight:zi,airframeCount:d,standbyCount:u,ftdCount:f,cptCount:h,events:s})}),e.jsxs(\\\\"div\\\\",{ref:Le,className:\\\\"relative bg-gray-900\\\\",onMouseDown:Tt=>ht(Tt),onMouseMove:vt,onMouseUp:Ht,onMouseLeave:Ht,children:[Re(),ot(),Ze(),be(),Vt(),Pt(),F&&J!==void 0&&X&&ee&&K&&e.jsx(ew,{currentDate:new Date(n),totalAircraft:d,plannedAvailability:J,dayFlyingStart:X,dayFlyingEnd:ee,gridHeight:i.length*zi,rowHeight:zi,pixelsPerHour:sr*y,startHour:ur,onAvailabilityChange:K}),yn(),P&&ae&&Q&&e.jsx(_v,{event:ae,onTimeChange:Q,scheduleStartHour:ur,scheduleEndHour:El,pixelsPerHour:sr*y}),Te&&Y&&e.jsxs(e.Fragment,{children:[e.jsx(Gc,{isPreview:!0,event:Y,onSelectEvent:()=>{},onMouseDown:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},pixelsPerHour:sr*y,rowHeight:zi,startHour:ur,row:i.indexOf(Y.resourceId),isDragging:!1,traineesData:l,personnelData:_,seatConfigs:new Map,currentTime:new Date}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1/2 -translate-y-1/2 h-1 bg-sky-300/40 pointer-events-none z-50\\\\",style:{left:`${(Y.startTime-(Y.preStart||1)-ur)*sr*y}px`,width:`${(Y.preStart||1)*sr*y}px`,top:`${i.indexOf(Y.resourceId)*zi+zi/2}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1/2 -translate-y-1/2 h-1 bg-sky-300/40 pointer-events-none z-50\\\\",style:{left:`${(Y.startTime+Y.duration-ur)*sr*y}px`,width:`${(Y.postEnd||.5)*sr*y}px`,top:`${i.indexOf(Y.resourceId)*zi+zi/2}px`}})]}),xt&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute bg-sky-500/20 border border-sky-400 z-50 pointer-events-none\\\\",style:{left:xt.x,top:xt.y,width:xt.width,height:xt.height}})]})]})})},sy=n=>{const t={\\\\"1FTS\\\\":\\\\"text-blue-300\\\\",\\\\"2FTS\\\\":\\\\"text-green-300\\\\",CFS:\\\\"text-purple-300\\\\",CFTS:\\\\"text-orange-300\\\\",RMC:\\\\"text-red-300\\\\",ARFTU:\\\\"text-yellow-300\\\\",AWMU:\\\\"text-teal-300\\\\",\\\\"No. 1 Squadron\\\\":\\\\"text-indigo-300\\\\",\\\\"No. 2 Squadron\\\\":\\\\"text-pink-300\\\\",\\\\"No. 3 Squadron\\\\":\\\\"text-cyan-300\\\\",\\\\"No. 75 Squadron\\\\":\\\\"text-amber-300\\\\",\\\\"No. 76 Squadron\\\\":\\\\"text-lime-300\\\\",\\\\"No. 77 Squadron\\\\":\\\\"text-emerald-300\\\\"};return console.log(\\\\"\\\\ud83c\\\\udfa8 UNIT COLOR DEBUG - Unit:\\\\",n,\\\\"Color:\\\\",t[n||\\\\"\\\\"]||\\\\"text-gray-300\\\\"),t[n||\\\\"\\\\"]||\\\\"text-gray-300\\\\"},iw=n=>({\\\\"1FTS\\\\":\\\\"bg-blue-500/20 border-blue-500/50 text-blue-300\\\\",\\\\"2FTS\\\\":\\\\"bg-green-500/20 border-green-500/50 text-green-300\\\\",CFS:\\\\"bg-purple-500/20 border-purple-500/50 text-purple-300\\\\",CFTS:\\\\"bg-orange-500/20 border-orange-500/50 text-orange-300\\\\",RMC:\\\\"bg-red-500/20 border-red-500/50 text-red-300\\\\",ARFTU:\\\\"bg-yellow-500/20 border-yellow-500/50 text-yellow-300\\\\",AWMU:\\\\"bg-teal-500/20 border-teal-500/50 text-teal-300\\\\",\\\\"No. 1 Squadron\\\\":\\\\"bg-indigo-500/20 border-indigo-500/50 text-indigo-300\\\\",\\\\"No. 2 Squadron\\\\":\\\\"bg-pink-500/20 border-pink-500/50 text-pink-300\\\\",\\\\"No. 3 Squadron\\\\":\\\\"bg-cyan-500/20 border-cyan-500/50 text-cyan-300\\\\",\\\\"No. 75 Squadron\\\\":\\\\"bg-amber-500/20 border-amber-500/50 text-amber-300\\\\",\\\\"No. 76 Squadron\\\\":\\\\"bg-lime-500/20 border-lime-500/50 text-lime-300\\\\",\\\\"No. 77 Squadron\\\\":\\\\"bg-emerald-500/20 border-emerald-500/50 text-emerald-300\\\\"})[n||\\\\"\\\\"]||\\\\"bg-gray-600/20 border-gray-500/50 text-gray-300\\\\",Iv=({personnel:n,rowHeight:t,onRowEnter:s,onRowLeave:i,onPersonClick:o,onRowRef:l,showUnits:d=!1,useUnitColors:u=!1})=>{console.log(\\\\"\\\\ud83d\\\\udd0d PERSONNEL COLUMN DEBUG - Props:\\\\",{personnelCount:n.length,showUnits:d,useUnitColors:u,samplePersonnel:n.slice(0,3).map(h=>({name:h.name,unit:h.unit}))});const f=Ua.useMemo(()=>{if(!d)return n;const h={};return h.Unassigned=n.filter(m=>!m.unit),n.forEach(m=>{m.unit&&(h[m.unit]||(h[m.unit]=[]),h[m.unit].push(m))}),h},[n,d]);return d?e.jsx(\\\\"div\\\\",{className:\\\\"w-48 bg-gray-800 flex-shrink-0 h-full\\\\",children:e.jsx(\\\\"ul\\\\",{children:Object.entries(f).map(([h,m])=>e.jsxs(Ua.Fragment,{children:[e.jsx(\\\\"li\\\\",{className:\\\\"bg-gray-900/80 border-b border-gray-600 px-3 py-1\\\\",children:e.jsxs(\\\\"span\\\\",{className:`text-xs font-semibold ${u&&iw(h).split(\\\\" \\\\").find(v=>v.startsWith(\\\\"text-\\\\"))||\\\\"text-gray-400\\\\"}`,children:[h,\\\\" (\\\\",m.length,\\\\")\\\\"]})}),m.map(({name:v,rank:x,unit:y},T)=>e.jsxs(\\\\"li\\\\",{ref:E=>l==null?void 0:l(v,E),className:`flex items-center justify-start pl-3 pr-2 py-1 text-xs transition-colors duration-150 border-b border-gray-700/50 bg-gray-800 ${o?\\\\"cursor-pointer hover:bg-gray-700\\\\":\\\\"\\\\"}`,style:{height:t,minHeight:t},onMouseEnter:()=>s==null?void 0:s(T),onMouseLeave:()=>i==null?void 0:i(),onClick:()=>o==null?void 0:o(v),children:[e.jsx(\\\\"span\\\\",{className:\\\\"font-mono text-gray-500 w-10 text-xs\\\\",children:x}),e.jsx(\\\\"span\\\\",{className:`truncate font-medium flex-1 ${u?sy(y):\\\\"text-gray-300\\\\"}`,children:v})]},`${h}-${v}`))]},h))})}):e.jsx(\\\\"div\\\\",{className:\\\\"w-40 bg-gray-800 flex-shrink-0 h-full\\\\",children:e.jsx(\\\\"ul\\\\",{children:n.map(({name:h,rank:m,unit:v},x)=>e.jsxs(\\\\"li\\\\",{ref:y=>l==null?void 0:l(h,y),className:`flex items-center justify-start pl-3 text-xs transition-colors duration-150 border-b border-gray-700/50 ${o?\\\\"cursor-pointer hover:bg-gray-700\\\\":\\\\"\\\\"}`,style:{height:t},onMouseEnter:()=>s==null?void 0:s(x),onMouseLeave:()=>i==null?void 0:i(),onClick:()=>o==null?void 0:o(h),children:[e.jsx(\\\\"span\\\\",{className:\\\\"font-mono text-gray-500 w-12 flex-shrink-0\\\\",children:m}),e.jsx(\\\\"span\\\\",{className:`truncate font-medium ${u?sy(v):\\\\"text-gray-300\\\\"}`,children:h})]},h))})})},Si=200,Cl=32,fi=0,ac=24,ry=ac-fi,iy=160,J0=40,X0=n=>{const t=[];return n.flightType===\\\\"Solo\\\\"?n.pilot&&t.push(n.pilot):(n.instructor&&t.push(n.instructor),n.student&&t.push(n.student)),t},aw=(n,t,s=!0)=>{const i=[];return t.forEach(o=>{(o.unavailability||[]).forEach(d=>{const u=new Date(n+\\\\"T00:00:00Z\\\\"),f=new Date(d.startDate+\\\\"T00:00:00Z\\\\"),h=new Date(d.endDate+\\\\"T00:00:00Z\\\\"),m=new Date(h);if(d.allDay&&m.setDate(m.getDate()-1),u>=f&&u<=m){let v=d.allDay?.0167:parseFloat(d.startTime)/100,x=d.allDay?23.983:parseFloat(d.endTime)/100;d.allDay||(u.getTime()===f.getTime()&&u.getTime()===m.getTime()?(v=d.startTime?parseFloat(d.startTime)/100:.0167,x=d.endTime?parseFloat(d.endTime)/100:23.983):u.getTime()===f.getTime()&&d.startTime?(v=parseFloat(d.startTime)/100,x=23.983):u.getTime()===m.getTime()&&d.endTime?(v=.0167,x=parseFloat(d.endTime)/100):u>f&&u<m&&(v=.0167,x=23.983));const y=x-v,T={id:`unavailability-${o.name||o.fullName}-${d.id}`,date:n,startTime:v,duration:y,type:\\\\"unavailability\\\\",instructor:s?o.name:void 0,student:s?void 0:o.fullName,pilot:s?void 0:o.fullName,flightNumber:\\\\"UNAVAIL\\\\",resourceName:s?o.name:o.fullName,resourceId:s?`INST-${o.name}`:`TRAINEE-${o.fullName}`,eventType:\\\\"UNAVAILABILITY\\\\",allDay:d.allDay,reason:d.reason,notes:d.notes};i.push(T)}})}),i},ow=({date:n,onDateChange:t,events:s,instructors:i,instructorsData:o,onSelectEvent:l,onUpdateEvent:d,zoomLevel:u,daylightTimes:f,personnelData:h,seatConfigs:m,syllabusDetails:v,conflictingEventIds:x,showValidation:y,unavailabilityConflicts:T,onSelectInstructor:E,traineesData:A})=>{console.log(\\\\"\\\\ud83d\\\\udd0d INSTRUCTOR SCHEDULE ERROR TRACKING - Props received:\\\\"),console.log(\\\\"  - date:\\\\",n),console.log(\\\\"  - events count:\\\\",s==null?void 0:s.length),console.log(\\\\"  - instructors count:\\\\",i==null?void 0:i.length),console.log(\\\\"  - instructorsData count:\\\\",o==null?void 0:o.length),console.log(\\\\"  - traineesData count:\\\\",A==null?void 0:A.length),console.log(\\\\"  - zoomLevel:\\\\",u),console.log(\\\\"  - daylightTimes:\\\\",f),console.log(\\\\"  - personnelData size:\\\\",h==null?void 0:h.size),console.log(\\\\"  - seatConfigs type:\\\\",typeof m),console.log(\\\\"  - seatConfigs value:\\\\",m),console.log(\\\\"  - seatConfigs === undefined:\\\\",m===void 0),console.log(\\\\"  - seatConfigs === null:\\\\",m===null),console.log(\\\\"  - syllabusDetails count:\\\\",v==null?void 0:v.length),console.log(\\\\"  - conflictingEventIds size:\\\\",x==null?void 0:x.size),console.log(\\\\"  - showValidation:\\\\",y),console.log(\\\\"  - unavailabilityConflicts size:\\\\",T==null?void 0:T.size),console.log(\\\\"  - Function props:\\\\"),console.log(\\\\"    - onDateChange type:\\\\",typeof t),console.log(\\\\"    - onSelectEvent type:\\\\",typeof l),console.log(\\\\"    - onUpdateEvent type:\\\\",typeof d),console.log(\\\\"    - onSelectInstructor type:\\\\",typeof E);try{const pe=m;console.log(\\\\"\\\\u2705 seatConfigs access successful in InstructorScheduleView\\\\")}catch(pe){console.error(\\\\"\\\\u274c seatConfigs access failed in InstructorScheduleView:\\\\",pe),console.error(\\\\"\\\\u274c Error stack:\\\\",pe.stack)}n||console.error(\\\\"\\\\u274c CRITICAL: date is undefined\\\\"),s||console.error(\\\\"\\\\u274c CRITICAL: events is undefined\\\\"),i||console.error(\\\\"\\\\u274c CRITICAL: instructors is undefined\\\\"),f||console.error(\\\\"\\\\u274c CRITICAL: daylightTimes is undefined\\\\"),(s==null?void 0:s.length)>0&&console.log(\\\\"\\\\ud83d\\\\udd0d Sample event structure:\\\\",s[0]),(i==null?void 0:i.length)>0&&console.log(\\\\"\\\\ud83d\\\\udd0d Sample instructor structure:\\\\",i[0]);const _=C.useRef(null),[R,H]=C.useState(new Date),[O,W]=C.useState(null),[ne,V]=C.useState(null),[U,D]=C.useState(null),[$,M]=C.useState(null),P=C.useRef(null),ae=C.useRef(!0),Q=C.useRef(u),Te=C.useRef(!1);C.useEffect(()=>{const pe=setInterval(()=>H(new Date),1e3);return()=>clearInterval(pe)},[]);const Y=C.useMemo(()=>{const[pe,ce,He]=n.split(\\\\"-\\\\").map(Number);return new Date(Date.UTC(pe,ce-1,He)).toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\",timeZone:\\\\"UTC\\\\"})},[n]),fe=C.useMemo(()=>{const pe=aw(n,o,!0);return[...s,...pe]},[n,s,o]);C.useEffect(()=>{const pe=_.current;if(pe){if(ae.current){const He=(8-fi)*Si*u;pe.scrollLeft=He,ae.current=!1}else{const ce=Q.current;if(ce===u)return;const{scrollLeft:He,clientWidth:_e}=pe,Fe=(He+_e/2)/(Si*ce)*Si*u-_e/2;pe.scrollLeft=Fe}Q.current=u}},[u]);const ge=C.useCallback((pe,ce)=>{for(const He of pe){const _e=v.find(Xe=>Xe.id===He.flightNumber);if(!_e)continue;const Z=He.startTime-_e.preFlightTime,Fe=He.startTime+He.duration+_e.postFlightTime;for(const Xe of ce){const ft=v.find(Ke=>Ke.id===Xe.flightNumber);if(!ft)continue;const tt=Xe.startTime-ft.preFlightTime,We=Xe.startTime+Xe.duration+ft.postFlightTime;if(Z<We&&Fe>tt){const Ke=X0(He),nt=X0(Xe),Ct=Ke.find(xt=>nt.includes(xt));if(Ct)return{conflictingEvent:Xe,personName:Ct}}}}return null},[v]),Ne=(pe,ce)=>{if(pe.button!==0)return;Te.current=!1,document.body.classList.add(\\\\"no-select\\\\");const _e=pe.currentTarget.getBoundingClientRect(),Z=new Map,Fe=ce.instructor||\\\\"\\\\",Xe=i.findIndex(ft=>ft.name===Fe);Xe!==-1&&Z.set(ce.id,{startTime:ce.startTime,rowIndex:Xe}),Z.size>0&&W({mainEventId:ce.id,xOffset:(pe.clientX-_e.left)/u,initialPositions:Z})},Oe=pe=>{if(!O||!P.current)return;Te.current=!0;const ce=P.current.getBoundingClientRect(),_e=((pe.clientX-ce.left)/u-O.xOffset)/Si+fi,Z=fe.find(nt=>nt.id===O.mainEventId);if(!Z)return;let Fe=_e;Fe<fi&&(Fe=fi),Fe+Z.duration>ac&&(Fe=ac-Z.duration);const Xe=Math.round(Fe*12)/12,ft={...Z,startTime:Xe},tt=fe.filter(nt=>nt.id!==O.mainEventId),We=ge([ft],tt);V(We?{conflictingEventId:We.conflictingEvent.id,conflictedPersonName:We.personName}:null),Xe!==Z.startTime&&d([{eventId:O.mainEventId,newStartTime:Xe}])},se=()=>{document.body.classList.remove(\\\\"no-select\\\\"),W(null),V(null),setTimeout(()=>{Te.current=!1},0)},F=i.length;console.log(\\\\"\\\\ud83d\\\\udccf CALCULATING DIMENSIONS:\\\\"),console.log(\\\\"  - TOTAL_HOURS:\\\\",ry),console.log(\\\\"  - PIXELS_PER_HOUR:\\\\",Si),console.log(\\\\"  - zoomLevel:\\\\",u),console.log(\\\\"  - ROW_HEIGHT:\\\\",Cl),console.log(\\\\"  - totalRows (instructors.length):\\\\",F);const J=ry*Si*u,X=F*Cl;console.log(\\\\"\\\\ud83d\\\\udccf CALCULATED VALUES:\\\\"),console.log(\\\\"  - timelineWidth:\\\\",J),console.log(\\\\"  - containerHeight:\\\\",X);const ee=C.useCallback(pe=>{if(!pe||!/^\\\\\\\\d{2}:\\\\\\\\d{2}$/.test(pe))return null;const[ce,He]=pe.split(\\\\":\\\\").map(Number);return ce+He/60},[]),K=()=>{const pe=[];for(let _e=fi;_e<=ac;_e++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-gray-500 flex items-center\\\\",style:{left:(_e-fi)*Si*u},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`${String(_e).padStart(2,\\\\"0\\\\")}:00`})},_e));const ce=ee(f.firstLight),He=ee(f.lastLight);if(ce!==null){const _e=(ce-fi)*Si*u;pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:_e},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`FL ${f.firstLight}`})},\\\\"fl-label\\\\"))}if(He!==null){const _e=(He-fi)*Si*u;pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:_e},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`LL ${f.lastLight}`})},\\\\"ll-label\\\\"))}return pe},ue=()=>{const pe=[];for(let ce=fi;ce<=ac;ce++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(ce-fi)*Si*u},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/50\\\\"})},`v-${ce}`)),ce<ac&&pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(ce-fi+.5)*Si*u},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/25\\\\"})},`v-${ce}-30`));for(let ce=1;ce<=F;ce++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full bg-gray-700/25\\\\",style:{top:ce*Cl,height:\\\\"1px\\\\"}},`h-${ce}`));return pe},xe=()=>{const pe=ee(f.firstLight),ce=ee(f.lastLight);return e.jsxs(e.Fragment,{children:[pe!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(pe-fi)*Si*u}px`}}),ce!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(ce-fi)*Si*u}px`}})]})},Le=()=>{const pe=ee(f.firstLight),ce=ee(f.lastLight),He=[];if(pe!==null&&pe>fi){const _e=(pe-fi)*Si*u;He.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{width:`${_e}px`}},\\\\"night-shade-morning\\\\"))}if(ce!==null&&ce<ac){const _e=(ce-fi)*Si*u,Z=(ac-ce)*Si*u;He.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{left:`${_e}px`,width:`${Z}px`}},\\\\"night-shade-evening\\\\"))}return e.jsx(e.Fragment,{children:He})},ye=()=>{const ce=parseFloat(localStorage.getItem(\\\\"timezoneOffset\\\\")||\\\\"0\\\\")*60*60*1e3,He=new Date(Date.now()+ce),_e=`${He.getUTCFullYear()}-${String(He.getUTCMonth()+1).padStart(2,\\\\"0\\\\")}-${String(He.getUTCDate()).padStart(2,\\\\"0\\\\")}`;if(n!==_e)return null;const Z=R,Fe=Z.getHours()+Z.getMinutes()/60+Z.getSeconds()/3600;if(Fe<fi||Fe>ac)return null;const Xe=(Fe-fi)*Si*u;return e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[30] pointer-events-none\\\\",style:{left:`${Xe}px`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-0.5 h-full bg-white animate-pulse\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-2.5 -translate-x-1/2 w-0 h-0\\\\",style:{borderLeft:\\\\"5px solid transparent\\\\",borderRight:\\\\"5px solid transparent\\\\",borderTop:\\\\"7px solid white\\\\"}})]})};return console.log(\\\\"\\\\ud83c\\\\udfaf INSTRUCTOR SCHEDULE VIEW - About to render\\\\"),console.log(\\\\"\\\\ud83c\\\\udfaf Final calculations:\\\\"),console.log(\\\\"  - totalRows:\\\\",i==null?void 0:i.length),console.log(\\\\"  - timelineWidth:\\\\",typeof J<\\\\"u\\\\"?J:\\\\"NOT_CALCULATED\\\\"),console.log(\\\\"  - containerHeight:\\\\",typeof X<\\\\"u\\\\"?X:\\\\"NOT_CALCULATED\\\\"),typeof J>\\\\"u\\\\"&&console.error(\\\\"\\\\u274c CRITICAL: timelineWidth is undefined - this will cause rendering failure\\\\"),typeof X>\\\\"u\\\\"&&console.error(\\\\"\\\\u274c CRITICAL: containerHeight is undefined - this will cause rendering failure\\\\"),console.log(\\\\"\\\\ud83c\\\\udfaf Returning JSX...\\\\"),e.jsx(\\\\"div\\\\",{ref:_,className:\\\\"flex-1 overflow-auto relative bg-gray-900\\\\",children:e.jsxs(\\\\"div\\\\",{style:{width:`${iy+J}px`,height:`${J0+X}px`,display:\\\\"grid\\\\",gridTemplateColumns:`${iy}px 1fr`,gridTemplateRows:`${J0}px 1fr`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"sticky top-0 left-0 z-40 bg-gray-800 border-r border-b border-gray-700 p-1\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-700 rounded-md w-full h-full flex items-center justify-center px-2 space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(-1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"span\\\\",{className:\\\\"flex-grow min-w-0 text-center font-semibold text-white cursor-default truncate\\\\",children:Y}),e.jsx(\\\\"button\\\\",{onClick:()=>t(1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})})]})}),e.jsxs(\\\\"div\\\\",{className:\\\\"sticky top-0 z-20 bg-gray-800 border-b border-gray-700\\\\",children:[\\\\" \\\\",e.jsx(\\\\"div\\\\",{className:\\\\"relative\\\\",style:{width:J,height:J0},children:K()})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"sticky left-0 z-30 bg-gray-800 border-r border-gray-700\\\\",children:[\\\\" \\\\",e.jsx(Iv,{personnel:i,rowHeight:Cl,onPersonClick:E,onRowEnter:M,onRowLeave:()=>M(null),showUnits:!1,useUnitColors:!0})]}),e.jsxs(\\\\"div\\\\",{ref:P,className:\\\\"relative\\\\",onMouseMove:Oe,onMouseUp:se,onMouseLeave:se,children:[ue(),Le(),xe(),ye(),i.flatMap((pe,ce)=>{const He=$===ce?e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 right-0 pointer-events-none z-10\\\\",style:{height:Cl,top:ce*Cl,backgroundColor:\\\\"rgba(255, 255, 255, 0.05)\\\\"}},`row-highlight-${ce}`):null,_e=[];if(y){const Xe=fe.filter(ft=>ft.instructor===pe.name).sort((ft,tt)=>ft.startTime-tt.startTime);for(let ft=0;ft<Xe.length;ft++){const tt=Xe[ft],We=Xe[ft-1],Ke=Xe[ft+1],nt=v.find(kt=>kt.id===tt.flightNumber);if(!nt)continue;const Ct=We&&(()=>{const kt=v.find(vt=>vt.id===We.flightNumber);if(!kt)return!1;const Ge=We.startTime+We.duration+kt.postFlightTime,ht=tt.startTime-nt.preFlightTime;return Ge>ht})(),xt=Ke&&(()=>{const kt=v.find(vt=>vt.id===Ke.flightNumber);if(!kt)return!1;const Ge=tt.startTime+tt.duration+nt.postFlightTime,ht=Ke.startTime-kt.preFlightTime;return Ge>ht})();if(!(U===tt.id)&&!(Ct||xt))continue;const st=(kt,Ge,ht,vt)=>{const Ht=kt*Si*u,ze=Cl*.25,we=ce*Cl+(Cl-ze)/2,Re=(Ge-fi)*Si*u,Ze=`absolute pointer-events-none z-20 rounded-full border shadow-lg backdrop-blur-sm transition-colors duration-200 ${ht?\\\\"bg-red-500/50 border-red-400/30\\\\":\\\\"bg-white/50 border-white/30\\\\"}`,ot={left:`${Re}px`,top:`${we}px`,width:`${Ht}px`,height:`${ze}px`};_e.push(e.jsx(\\\\"div\\\\",{style:ot,className:Ze},vt))};if(nt.preFlightTime>0){const kt=tt.startTime-nt.preFlightTime;st(nt.preFlightTime,kt,Ct||!1,`${tt.id}-pre-${ce}`)}if(nt.postFlightTime>0){const kt=tt.startTime+tt.duration;st(nt.postFlightTime,kt,xt||!1,`${tt.id}-post-${ce}`)}}}const Fe=fe.filter(Xe=>Xe.instructor===pe.name||Xe.flightType===\\\\"Dual\\\\"&&Xe.student===pe.name).sort((Xe,ft)=>Xe.startTime-ft.startTime).map(Xe=>{const ft=!!(O&&O.mainEventId===Xe.id),tt=Xe.id===(ne==null?void 0:ne.conflictingEventId),We=y&&x.has(Xe.id)||tt||ft&&!!ne,Ke=T.get(Xe.id),nt=!!Ke,Ct=Ke||[];let xt=null;if(ne){const dn=X0(Xe);(ft||tt)&&dn.includes(ne.conflictedPersonName)&&(xt=ne.conflictedPersonName)}return e.jsx(Gc,{event:Xe,traineesData:A,onSelectEvent:()=>{Te.current||l(Xe)},onMouseDown:dn=>Ne(dn,Xe),onMouseEnter:()=>D(Xe.id),onMouseLeave:()=>D(null),pixelsPerHour:Si*u,rowHeight:Cl,startHour:fi,row:ce,isDragging:ft,isConflicting:We,isUnavailabilityConflict:nt,unavailablePersonnel:Ct,conflictedPersonnelName:xt,personnelData:h,seatConfigs:m,isDraggable:!0,currentTime:R},`${Xe.id}-${pe.name}`)});return[He,..._e,...Fe]})]})]})})},Lv=({trainees:n,rowHeight:t,onRowEnter:s,onRowLeave:i,onTraineeClick:o,onRowRef:l,courseColors:d={}})=>{const u=h=>{const m=h.split(\\\\" \\\\u2013 \\\\");return{name:m[0]||h,course:m[1]||\\\\"\\\\"}},f=h=>({\\\\"bg-sky-400/50\\\\":\\\\"#38BDF8\\\\",\\\\"bg-purple-400/50\\\\":\\\\"#C084FC\\\\",\\\\"bg-yellow-400/50\\\\":\\\\"#FACC15\\\\",\\\\"bg-pink-400/50\\\\":\\\\"#F472B6\\\\",\\\\"bg-teal-400/50\\\\":\\\\"#2DD4BF\\\\",\\\\"bg-indigo-400/50\\\\":\\\\"#818CF8\\\\",\\\\"bg-cyan-400/50\\\\":\\\\"#22D3EE\\\\",\\\\"bg-blue-400/50\\\\":\\\\"#60A5FA\\\\",\\\\"bg-green-400/50\\\\":\\\\"#4ADE80\\\\",\\\\"bg-orange-400/50\\\\":\\\\"#FB923C\\\\",\\\\"bg-red-400/50\\\\":\\\\"#F87171\\\\",\\\\"bg-gray-400/50\\\\":\\\\"#9CA3AF\\\\"})[h]||\\\\"#9CA3AF\\\\";return e.jsx(\\\\"div\\\\",{className:\\\\"w-40 bg-gray-800 flex-shrink-0 h-full\\\\",children:e.jsx(\\\\"ul\\\\",{children:n.map((h,m)=>{const{name:v,course:x}=u(h);return e.jsx(\\\\"li\\\\",{ref:y=>l==null?void 0:l(h,y),className:`flex items-center justify-start pl-3 text-xs transition-colors duration-150 text-gray-300 border-b border-gray-700/50 ${o?\\\\"cursor-pointer hover:bg-gray-700\\\\":\\\\"\\\\"}`,style:{height:t},onMouseEnter:()=>s==null?void 0:s(m),onMouseLeave:()=>i==null?void 0:i(),onClick:()=>o==null?void 0:o(h),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex flex-col\\\\",children:[e.jsx(\\\\"span\\\\",{className:\\\\"truncate font-medium leading-tight\\\\",children:v}),x&&e.jsx(\\\\"span\\\\",{className:\\\\"font-mono leading-tight\\\\",style:{color:f(d[x]||\\\\"bg-gray-400/50\\\\")},children:x})]})})})})})},Di=200,ec=32,hi=0,oc=24,lw=oc-hi,ay=160,K0=40,Z0=n=>{const t=[];return n.flightType===\\\\"Solo\\\\"?n.pilot&&t.push(n.pilot):(n.instructor&&t.push(n.instructor),n.student&&t.push(n.student)),t},cw=(n,t)=>{const s=[];return t.forEach(i=>{(i.unavailability||[]).forEach(l=>{const d=new Date(n+\\\\"T00:00:00Z\\\\"),u=new Date(l.startDate+\\\\"T00:00:00Z\\\\"),f=new Date(l.endDate+\\\\"T00:00:00Z\\\\"),h=new Date(f);if(l.allDay&&h.setDate(h.getDate()-1),d>=u&&d<=h){let m=l.allDay?.0167:parseFloat(l.startTime)/100,v=l.allDay?23.983:parseFloat(l.endTime)/100;l.allDay||(d.getTime()===u.getTime()&&d.getTime()===h.getTime()?(m=l.startTime?parseFloat(l.startTime)/100:.0167,v=l.endTime?parseFloat(l.endTime)/100:23.983):d.getTime()===u.getTime()&&l.startTime?(m=parseFloat(l.startTime)/100,v=23.983):d.getTime()===h.getTime()&&l.endTime?(m=.0167,v=parseFloat(l.endTime)/100):d>u&&d<h&&(m=.0167,v=23.983));const x=v-m,y={id:`unavailability-${i.fullName}-${l.id}`,date:n,startTime:m,duration:x,type:\\\\"unavailability\\\\",student:i.fullName,pilot:i.fullName,flightNumber:\\\\"UNAVAIL\\\\",resourceName:i.fullName,resourceId:`TRAINEE-${i.fullName}`,eventType:\\\\"UNAVAILABILITY\\\\",allDay:l.allDay,reason:l.reason,notes:l.notes};s.push(y)}})}),s},dw=({date:n,onDateChange:t,events:s,trainees:i,onSelectEvent:o,onUpdateEvent:l,zoomLevel:d,daylightTimes:u,personnelData:f,seatConfigs:h,syllabusDetails:m,conflictingEventIds:v,showValidation:x,unavailabilityConflicts:y,onSelectTrainee:T,traineesData:E,courseColors:A})=>{const _=C.useRef(null),[R,H]=C.useState(new Date),[O,W]=C.useState(null),[ne,V]=C.useState(null),[U,D]=C.useState(null),[$,M]=C.useState(null),P=C.useRef(null),ae=C.useRef(!0),Q=C.useRef(d),Te=C.useRef(!1);C.useEffect(()=>{const pe=setInterval(()=>H(new Date),1e3);return()=>clearInterval(pe)},[]);const Y=C.useMemo(()=>{const[pe,ce,He]=n.split(\\\\"-\\\\").map(Number);return new Date(Date.UTC(pe,ce-1,He)).toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\",timeZone:\\\\"UTC\\\\"})},[n]),fe=C.useMemo(()=>{const pe=cw(n,E);return[...s,...pe]},[n,s,E]);C.useEffect(()=>{const pe=_.current;if(pe){if(ae.current){const He=(8-hi)*Di*d;pe.scrollLeft=He,ae.current=!1}else{const ce=Q.current;if(ce===d)return;const{scrollLeft:He,clientWidth:_e}=pe,Fe=(He+_e/2)/(Di*ce)*Di*d-_e/2;pe.scrollLeft=Fe}Q.current=d}},[d]);const ge=C.useCallback((pe,ce)=>{for(const He of pe){const _e=m.find(Xe=>Xe.id===He.flightNumber);if(!_e)continue;const Z=He.startTime-_e.preFlightTime,Fe=He.startTime+He.duration+_e.postFlightTime;for(const Xe of ce){const ft=m.find(Ke=>Ke.id===Xe.flightNumber);if(!ft)continue;const tt=Xe.startTime-ft.preFlightTime,We=Xe.startTime+Xe.duration+ft.postFlightTime;if(Z<We&&Fe>tt){const Ke=Z0(He),nt=Z0(Xe),Ct=Ke.find(xt=>nt.includes(xt));if(Ct)return{conflictingEvent:Xe,personName:Ct}}}}return null},[m]),Ne=(pe,ce)=>{if(pe.button!==0)return;Te.current=!1,document.body.classList.add(\\\\"no-select\\\\");const _e=pe.currentTarget.getBoundingClientRect(),Z=new Map,Fe=ce.student||ce.pilot||\\\\"\\\\",Xe=i.findIndex(ft=>ft===Fe);Xe!==-1&&Z.set(ce.id,{startTime:ce.startTime,rowIndex:Xe}),Z.size>0&&W({mainEventId:ce.id,xOffset:(pe.clientX-_e.left)/d,initialPositions:Z})},Oe=pe=>{if(!O||!P.current)return;Te.current=!0;const ce=P.current.getBoundingClientRect(),_e=((pe.clientX-ce.left)/d-O.xOffset)/Di+hi,Z=fe.find(nt=>nt.id===O.mainEventId);if(!Z)return;let Fe=_e;Fe<hi&&(Fe=hi),Fe+Z.duration>oc&&(Fe=oc-Z.duration);const Xe=Math.round(Fe*12)/12,ft={...Z,startTime:Xe},tt=fe.filter(nt=>nt.id!==O.mainEventId),We=ge([ft],tt);V(We?{conflictingEventId:We.conflictingEvent.id,conflictedPersonName:We.personName}:null),Xe!==Z.startTime&&l([{eventId:O.mainEventId,newStartTime:Xe}])},se=()=>{document.body.classList.remove(\\\\"no-select\\\\"),W(null),V(null),setTimeout(()=>{Te.current=!1},0)},F=i.length,J=lw*Di*d,X=F*ec,ee=C.useCallback(pe=>{if(!pe||!/^\\\\\\\\d{2}:\\\\\\\\d{2}$/.test(pe))return null;const[ce,He]=pe.split(\\\\":\\\\").map(Number);return ce+He/60},[]),K=()=>{const pe=[];for(let _e=hi;_e<=oc;_e++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-gray-500 flex items-center\\\\",style:{left:(_e-hi)*Di*d},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`${String(_e).padStart(2,\\\\"0\\\\")}:00`})},_e));const ce=ee(u.firstLight),He=ee(u.lastLight);if(ce!==null){const _e=(ce-hi)*Di*d;pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:_e},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`FL ${u.firstLight}`})},\\\\"fl-label\\\\"))}if(He!==null){const _e=(He-hi)*Di*d;pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:_e},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`LL ${u.lastLight}`})},\\\\"ll-label\\\\"))}return pe},ue=()=>{const pe=[];for(let ce=hi;ce<=oc;ce++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(ce-hi)*Di*d},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/50\\\\"})},`v-${ce}`)),ce<oc&&pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(ce-hi+.5)*Di*d},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/25\\\\"})},`v-${ce}-30`));for(let ce=1;ce<=F;ce++)pe.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full bg-gray-700/25\\\\",style:{top:ce*ec,height:\\\\"1px\\\\"}},`h-${ce}`));return pe},xe=()=>{const pe=ee(u.firstLight),ce=ee(u.lastLight);return e.jsxs(e.Fragment,{children:[pe!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(pe-hi)*Di*d}px`}}),ce!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(ce-hi)*Di*d}px`}})]})},Le=()=>{const pe=ee(u.firstLight),ce=ee(u.lastLight),He=[];if(pe!==null&&pe>hi){const _e=(pe-hi)*Di*d;He.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{width:`${_e}px`}},\\\\"night-shade-morning\\\\"))}if(ce!==null&&ce<oc){const _e=(ce-hi)*Di*d,Z=(oc-ce)*Di*d;He.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{left:`${_e}px`,width:`${Z}px`}},\\\\"night-shade-evening\\\\"))}return e.jsx(e.Fragment,{children:He})},ye=()=>{const ce=parseFloat(localStorage.getItem(\\\\"timezoneOffset\\\\")||\\\\"0\\\\")*60*60*1e3,He=new Date(Date.now()+ce),_e=`${He.getUTCFullYear()}-${String(He.getUTCMonth()+1).padStart(2,\\\\"0\\\\")}-${String(He.getUTCDate()).padStart(2,\\\\"0\\\\")}`;if(n!==_e)return null;const Z=R,Fe=Z.getHours()+Z.getMinutes()/60+Z.getSeconds()/3600;if(Fe<hi||Fe>oc)return null;const Xe=(Fe-hi)*Di*d;return e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[30] pointer-events-none\\\\",style:{left:`${Xe}px`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-0.5 h-full bg-white animate-pulse\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-2.5 -translate-x-1/2 w-0 h-0\\\\",style:{borderLeft:\\\\"5px solid transparent\\\\",borderRight:\\\\"5px solid transparent\\\\",borderTop:\\\\"7px solid white\\\\"}})]})};return e.jsx(\\\\"div\\\\",{ref:_,className:\\\\"flex-1 overflow-auto relative bg-gray-900\\\\",children:e.jsxs(\\\\"div\\\\",{style:{width:`${ay+J}px`,height:`${K0+X}px`,display:\\\\"grid\\\\",gridTemplateColumns:`${ay}px 1fr`,gridTemplateRows:`${K0}px 1fr`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"sticky top-0 left-0 z-40 bg-gray-800 border-r border-b border-gray-700 p-1\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-700 rounded-md w-full h-full flex items-center justify-center px-2 space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(-1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"span\\\\",{className:\\\\"flex-grow min-w-0 text-center font-semibold text-white cursor-default truncate\\\\",children:Y}),e.jsx(\\\\"button\\\\",{onClick:()=>t(1),className:\\\\"p-1 rounded-full hover:bg-gray-600 text-white flex-shrink-0\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})})]})}),e.jsx(\\\\"div\\\\",{className:\\\\"sticky top-0 z-20 bg-gray-800 border-b border-gray-700\\\\",children:e.jsx(\\\\"div\\\\",{className:\\\\"relative\\\\",style:{width:J,height:K0},children:K()})}),e.jsx(\\\\"div\\\\",{className:\\\\"sticky left-0 z-30 bg-gray-800 border-r border-gray-700\\\\",children:e.jsx(Lv,{trainees:i,rowHeight:ec,onTraineeClick:T,courseColors:A,onRowEnter:M,onRowLeave:()=>M(null)})}),e.jsxs(\\\\"div\\\\",{ref:P,className:\\\\"relative\\\\",onMouseMove:Oe,onMouseUp:se,onMouseLeave:se,children:[ue(),Le(),xe(),ye(),i.flatMap((pe,ce)=>{const He=$===ce?e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 right-0 pointer-events-none z-10\\\\",style:{height:ec,top:ce*ec,backgroundColor:\\\\"rgba(255, 255, 255, 0.05)\\\\"}},`row-highlight-${ce}`):null,_e=[];if(x){const Xe=s.filter(ft=>ft.student===pe||ft.flightType===\\\\"Solo\\\\"&&ft.pilot===pe).sort((ft,tt)=>ft.startTime-tt.startTime);for(let ft=0;ft<Xe.length;ft++){const tt=Xe[ft],We=Xe[ft-1],Ke=Xe[ft+1],nt=m.find(kt=>kt.id===tt.flightNumber);if(!nt)continue;const Ct=We&&(()=>{const kt=m.find(vt=>vt.id===We.flightNumber);if(!kt)return!1;const Ge=We.startTime+We.duration+kt.postFlightTime,ht=tt.startTime-nt.preFlightTime;return Ge>ht})(),xt=Ke&&(()=>{const kt=m.find(vt=>vt.id===Ke.flightNumber);if(!kt)return!1;const Ge=tt.startTime+tt.duration+nt.postFlightTime,ht=Ke.startTime-kt.preFlightTime;return Ge>ht})();if(!(U===tt.id)&&!(Ct||xt))continue;const st=(kt,Ge,ht,vt)=>{const Ht=kt*Di*d,ze=ec*.25,we=ce*ec+(ec-ze)/2,Re=(Ge-hi)*Di*d,Ze=`absolute pointer-events-none z-20 rounded-full border shadow-lg backdrop-blur-sm transition-colors duration-200 ${ht?\\\\"bg-red-500/50 border-red-400/30\\\\":\\\\"bg-white/50 border-white/30\\\\"}`,ot={left:`${Re}px`,top:`${we}px`,width:`${Ht}px`,height:`${ze}px`};_e.push(e.jsx(\\\\"div\\\\",{style:ot,className:Ze},vt))};if(nt.preFlightTime>0){const kt=tt.startTime-nt.preFlightTime;st(nt.preFlightTime,kt,Ct||!1,`${tt.id}-pre-${ce}`)}if(nt.postFlightTime>0){const kt=tt.startTime+tt.duration;st(nt.postFlightTime,kt,xt||!1,`${tt.id}-post-${ce}`)}}}const Fe=fe.filter(Xe=>Xe.student===pe||Xe.flightType===\\\\"Solo\\\\"&&Xe.pilot===pe).sort((Xe,ft)=>Xe.startTime-ft.startTime).map(Xe=>{const ft=!!(O&&O.mainEventId===Xe.id),tt=Xe.id===(ne==null?void 0:ne.conflictingEventId),We=x&&v.has(Xe.id)||tt||ft&&!!ne,Ke=y.get(Xe.id),nt=!!Ke,Ct=Ke||[];let xt=null;if(ne){const dn=Z0(Xe);(ft||tt)&&dn.includes(ne.conflictedPersonName)&&(xt=ne.conflictedPersonName)}return e.jsx(Gc,{event:Xe,traineesData:E,onSelectEvent:()=>{Te.current||o(Xe)},onMouseDown:dn=>Ne(dn,Xe),onMouseEnter:()=>D(Xe.id),onMouseLeave:()=>D(null),pixelsPerHour:Di*d,rowHeight:ec,startHour:hi,row:ce,isDragging:ft,isConflicting:We,isUnavailabilityConflict:nt,unavailablePersonnel:Ct,conflictedPersonnelName:xt,personnelData:f,seatConfigs:h,isDraggable:!0,currentTime:R},`${Xe.id}-${pe}`)});return[He,..._e,...Fe]})]})]})})};function oy(n,t,s,i,o,l){const d=[],u=[];n||d.push({type:\\\\"error\\\\",field:\\\\"startDate\\\\",message:\\\\"Start date is required\\\\",remediation:\\\\"Please select a start date from the calendar\\\\"}),t||d.push({type:\\\\"error\\\\",field:\\\\"endDate\\\\",message:\\\\"End date is required\\\\",remediation:\\\\"Please select an end date from the calendar\\\\"});const f=(E,A)=>{if(!E)return!0;if(E.length!==4)return d.push({type:\\\\"error\\\\",field:A,message:`Invalid ${A===\\\\"startTime\\\\"?\\\\"start\\\\":\\\\"end\\\\"} time format`,remediation:\\\\"Time must be exactly 4 digits in HHMM format (e.g., 0900 for 9:00 AM, 1400 for 2:00 PM)\\\\"}),!1;const _=parseInt(E.substring(0,2)),R=parseInt(E.substring(2,4));return isNaN(_)||isNaN(R)?(d.push({type:\\\\"error\\\\",field:A,message:`Invalid ${A===\\\\"startTime\\\\"?\\\\"start\\\\":\\\\"end\\\\"} time values`,remediation:\\\\"Time must contain only numbers. Hours (00-23) and minutes (00-59)\\\\"}),!1):_<0||_>23?(d.push({type:\\\\"error\\\\",field:A,message:`${A===\\\\"startTime\\\\"?\\\\"Start\\\\":\\\\"End\\\\"} hour out of range`,remediation:\\\\"Hours must be between 00 and 23. Use 24-hour format (e.g., 09 for 9 AM, 14 for 2 PM, 23 for 11 PM)\\\\"}),!1):R<0||R>59?(d.push({type:\\\\"error\\\\",field:A,message:`${A===\\\\"startTime\\\\"?\\\\"Start\\\\":\\\\"End\\\\"} minutes out of range`,remediation:\\\\"Minutes must be between 00 and 59 (e.g., 00, 15, 30, 45)\\\\"}),!1):!0},h=f(s,\\\\"startTime\\\\"),m=f(i,\\\\"endTime\\\\");if(d.some(E=>E.field===\\\\"startTime\\\\"||E.field===\\\\"endDate\\\\"||E.field===\\\\"startDate\\\\"))return{isValid:!1,errors:d,warnings:u};const v=new Date(n+\\\\"T00:00:00Z\\\\"),x=new Date(t+\\\\"T00:00:00Z\\\\");if(x<v)return d.push({type:\\\\"error\\\\",field:\\\\"endDate\\\\",message:\\\\"End date cannot be before start date\\\\",remediation:\\\\"Select an end date that is the same as or after the start date\\\\"}),{isValid:!1,errors:d,warnings:u};const y=!s&&!i;if(y&&x.getTime()===v.getTime()&&d.push({type:\\\\"error\\\\",field:\\\\"endDate\\\\",message:\\\\"All-day unavailability must span at least one full day\\\\",remediation:\\\\"For a single all-day unavailability, set the end date to the next day. Example: If unavailable on Dec 15, set start date to Dec 15 and end date to Dec 16.\\\\"}),!y&&h&&m){const E=parseFloat(s)/100,A=parseFloat(i)/100;E>=A&&v.getTime()===x.getTime()&&d.push({type:\\\\"error\\\\",field:\\\\"endTime\\\\",message:\\\\"End time must be after start time for same-day events\\\\",remediation:\\\\"Set an end time that is later than the start time. Example: Start 0900, End 1200\\\\"}),(E<6||A>22)&&u.push({type:\\\\"warning\\\\",field:\\\\"startTime\\\\",message:\\\\"Unavailability times are outside normal operating hours\\\\",remediation:\\\\"Consider if these times are correct. Normal operating hours are 0600-2200 (6:00 AM - 10:00 PM)\\\\"}),E>0&&A>0&&A-E<.5&&u.push({type:\\\\"warning\\\\",field:\\\\"startTime\\\\",message:\\\\"Very short unavailability period\\\\",remediation:\\\\"This is less than 30 minutes. Consider if this duration is correct or if it should be longer\\\\"}),v.getTime()!==x.getTime()&&E>0&&A<23.983&&u.push({type:\\\\"warning\\\\",field:\\\\"endTime\\\\",message:\\\\"Multi-day timed event with specific end time\\\\",remediation:\\\\"For multi-day unavailability, consider using full-day (0001-2359) or setting end time to 2359 for last day\\\\"})}if((!o||o.trim()===\\\\"\\\\")&&d.push({type:\\\\"error\\\\",field:\\\\"general\\\\",message:\\\\"Reason for unavailability is required\\\\",remediation:\\\\"Please select a reason from the dropdown menu\\\\"}),l&&l.length>0){const E=uw({startDate:n,endDate:t,allDay:y},l);E.length>0&&u.push({type:\\\\"warning\\\\",field:\\\\"overlap\\\\",message:`Overlaps with ${E.length} existing unavailability period(s)`,remediation:\\\\"Review existing unavailability periods to avoid duplication. Overlapping periods may not display correctly in the schedule.\\\\"})}return Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24))>30&&u.push({type:\\\\"warning\\\\",field:\\\\"endDate\\\\",message:\\\\"Very long unavailability period\\\\",remediation:\\\\"This unavailability spans more than 30 days. Please verify this is correct or consider breaking it into shorter periods\\\\"}),{isValid:d.length===0,errors:d,warnings:u}}function uw(n,t){const s=[];for(const i of t)fw(n,i)&&s.push(i);return s}function fw(n,t){const s=new Date(n.startDate+\\\\"T00:00:00Z\\\\"),i=new Date(n.endDate+\\\\"T00:00:00Z\\\\"),o=new Date(t.startDate+\\\\"T00:00:00Z\\\\"),l=new Date(t.endDate+\\\\"T00:00:00Z\\\\");return n.allDay&&i.setUTCDate(i.getUTCDate()-1),t.allDay&&l.setUTCDate(l.getUTCDate()-1),s<=l&&o<=i}const hw=({validation:n,className:t=\\\\"\\\\"})=>{if(n.isValid)return null;const s=()=>e.jsx(\\\\"svg\\\\",{className:\\\\"w-5 h-5 text-red-400 flex-shrink-0\\\\",fill:\\\\"currentColor\\\\",viewBox:\\\\"0 0 20 20\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\\\\",clipRule:\\\\"evenodd\\\\"})}),i=()=>e.jsx(\\\\"svg\\\\",{className:\\\\"w-5 h-5 text-yellow-400 flex-shrink-0\\\\",fill:\\\\"currentColor\\\\",viewBox:\\\\"0 0 20 20\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\\\\",clipRule:\\\\"evenodd\\\\"})}),o=()=>e.jsx(\\\\"svg\\\\",{className:\\\\"w-4 h-4 text-gray-400 flex-shrink-0\\\\",fill:\\\\"currentColor\\\\",viewBox:\\\\"0 0 20 20\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\\\\",clipRule:\\\\"evenodd\\\\"})});return e.jsxs(\\\\"div\\\\",{className:`space-y-3 ${t}`,children:[n.errors.length>0&&e.jsx(\\\\"div\\\\",{className:\\\\"bg-red-900/20 border border-red-700 rounded-lg p-4\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-start space-x-3\\\\",children:[e.jsx(s,{}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1\\\\",children:[e.jsxs(\\\\"h4\\\\",{className:\\\\"text-red-400 font-semibold mb-2\\\\",children:[\\\\"Data Entry Errors (\\\\",n.errors.length,\\\\")\\\\"]}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-2\\\\",children:n.errors.map((l,d)=>e.jsxs(\\\\"div\\\\",{className:\\\\"text-sm\\\\",children:[e.jsx(\\\\"p\\\\",{className:\\\\"text-red-300 font-medium\\\\",children:l.message}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-start mt-1 space-x-2\\\\",children:[e.jsx(o,{}),e.jsx(\\\\"p\\\\",{className:\\\\"text-red-200\\\\",children:l.remediation})]})]},d))})]})]})}),n.warnings.length>0&&e.jsx(\\\\"div\\\\",{className:\\\\"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-start space-x-3\\\\",children:[e.jsx(i,{}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1\\\\",children:[e.jsxs(\\\\"h4\\\\",{className:\\\\"text-yellow-400 font-semibold mb-2\\\\",children:[\\\\"Warnings (\\\\",n.warnings.length,\\\\")\\\\"]}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-2\\\\",children:n.warnings.map((l,d)=>e.jsxs(\\\\"div\\\\",{className:\\\\"text-sm\\\\",children:[e.jsx(\\\\"p\\\\",{className:\\\\"text-yellow-300 font-medium\\\\",children:l.message}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-start mt-1 space-x-2\\\\",children:[e.jsx(o,{}),e.jsx(\\\\"p\\\\",{className:\\\\"text-yellow-200\\\\",children:l.remediation})]})]},d))})]})]})})]})},Mv=({onClose:n,onTodayOnly:t,onSave:s,unavailabilityPeriods:i,onRemove:o})=>{const[l,d]=C.useState(\\\\"\\\\"),[u,f]=C.useState(\\\\"\\\\"),[h,m]=C.useState(\\\\"\\\\"),[v,x]=C.useState(\\\\"\\\\"),[y,T]=C.useState(\\\\"Appointment\\\\"),[E,A]=C.useState(null),[_,R]=C.useState(!1),H=[\\\\"TMUF\\\\",\\\\"TMUF - Ground Duties only\\\\",\\\\"Leave\\\\",\\\\"Appointment\\\\",\\\\"Other\\\\"],O=()=>{d(\\\\"\\\\"),f(\\\\"\\\\"),m(\\\\"\\\\"),x(\\\\"\\\\"),T(\\\\"Appointment\\\\"),A(null),R(!1)},W=()=>{if(l||u||h||v){const D=oy(l,u,h,v,y,i);A(D)}else A(null)};Ua.useEffect(()=>{_&&W()},[l,u,h,v,y,_]);const ne=()=>{console.log(\\\\"handleSave called\\\\",{startDate:l,endDate:u,startTime:h,endTime:v,reason:y});const D=oy(l,u,h,v,y,i);if(A(D),R(!0),!D.isValid){if(D.errors[0]){const P=document.getElementById(\\\\"validation-errors\\\\");P==null||P.scrollIntoView({behavior:\\\\"smooth\\\\",block:\\\\"nearest\\\\"})}return}if(D.warnings.length>0&&!window.confirm(`This unavailability has ${D.warnings.length} warning(s):\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "\\\\nimport React, { useState, useEffect, useMemo, useRef } from \\\'react\\\';\\\\nimport { ScheduleEvent, SyllabusItemDetail, Trainee, Instructor, OracleTraineeAnalysis, SctRequest, FormationCallsign, CancellationCode } from \\\'../types\\\';\\\\nimport { v4 as uuidv4 } from \\\'uuid\\\';\\\\nimport CancelEventFlyout from \\\'./CancelEventFlyout\\\';\\\\nimport MassBriefCompleteFlyout, { MassBriefConfirmationFlyout } from \\\'./MassBriefCompleteFlyout\\\';\\\\nimport { VisualAdjustModal } from \\\'./VisualAdjustModal\\\';\\\\n\\\\ninterface EventDetailModalProps {\\\\n  event: ScheduleEvent;\\\\n  onClose: () => void;\\\\n  onSave: (events: ScheduleEvent[]) => void;\\\\n  onDeleteRequest: () => void;\\\\n  isEditingDefault?: boolean;\\\\n  instructors: string[];\\\\n  trainees: string[];\\\\n  syllabus: string[];\\\\n  syllabusDetails: SyllabusItemDetail[];\\\\n  highlightedField?: \\\'startTime\\\' | \\\'instructor\\\' | \\\'student\\\' | null;\\\\n  onScoresCreated?: (scores: any[]) => void; // New callback for creating scores\\\\n  school: \\\'ESL\\\' | \\\'PEA\\\';\\\\n  traineesData: Trainee[];\\\\n  instructorsData: Instructor[];\\\\n  courseColors: { [key: string]: string };\\\\n  onNavigateToHateSheet: (trainee: Trainee) => void;\\\\n  onNavigateToSyllabus: (flightNumber: string) => void;\\\\n  onOpenPt051: (trainee: Trainee) => void;\\\\n  onOpenAuth: (event: ScheduleEvent) => void;\\\\n  onOpenPostFlight: (event: ScheduleEvent) => void;\\\\n  isConflict: boolean;\\\\n  onNeoClick: (event: ScheduleEvent) => void;\\\\n  traineeLMPs?: Map<string, SyllabusItemDetail[]>;\\\\n  oracleContextForModal?: {\\\\n      availableInstructors: string[];\\\\n      availableTraineesAnalysis: OracleTraineeAnalysis[];\\\\n  } | null;\\\\n  sctRequests?: SctRequest[];\\\\n  sctEvents?: string[];\\\\n     eventsForDate?: ScheduleEvent[];\\\\n  // New props for deployment functionality\\\\n  publishedSchedules?: Record<string, ScheduleEvent[]>;\\\\n  nextDayBuildEvents?: ScheduleEvent[];\\\\n  activeView?: string;\\\\n  isAddingTile?: boolean;\\\\n    formationCallsigns?: FormationCallsign[];\\\\n    currentLocation?: string;\\\\n    onVisualAdjustStart?: (event: ScheduleEvent) => void;\\\\n    onVisualAdjustEnd?: (event: ScheduleEvent) => void;\\\\n    onSavePT051Assessment?: (assessment: any) => void;\\\\n    cancellationCodes?: CancellationCode[];\\\\n    onCancelEvent?: (eventId: string, cancellationCode: string, manualCodeEntry?: string) => void;\\\\n}\\\\n\\\\ninterface CrewMember {\\\\n    flightType: \\\'Dual\\\' | \\\'Solo\\\';\\\\n    instructor: string;\\\\n    student: string;\\\\n    pilot: string;\\\\n    group: string;\\\\n    groupTraineeIds: number[]; // Added to track selected IDs\\\\n}\\\\n\\\\nconst getEventTypeFromSyllabus = (syllabusId: string, syllabusDetails: SyllabusItemDetail[]): \\\'flight\\\' | \\\'ftd\\\' | \\\'ground\\\' => {\\\\n    const detail = syllabusDetails.find(d => d.id === syllabusId);\\\\n    if (!detail) { // Fallback for items not in syllabus like \\\'SCT FORM\\\' or if data is missing\\\\n        if (syllabusId.includes(\\\'FTD\\\')) return \\\'ftd\\\';\\\\n        if (syllabusId.includes(\\\'CPT\\\') || syllabusId.includes(\\\'MB\\\') || syllabusId.includes(\\\'TUT\\\') || syllabusId.includes(\\\'QUIZ\\\')) return \\\'ground\\\';\\\\n        return \\\'flight\\\';\\\\n    }\\\\n    if (detail.type === \\\'FTD\\\') return \\\'ftd\\\';\\\\n    if (detail.type === \\\'Ground School\\\') return \\\'ground\\\';\\\\n    return \\\'flight\\\';\\\\n};\\\\n\\\\n\\\\nconst formatTime = (time: number) => {\\\\n    const hours = Math.floor(time);\\\\n    const minutes = Math.round((time % 1) * 60);\\\\n    return `${String(hours).padStart(2, \\\'0\\\')}:${String(minutes).padStart(2, \\\'0\\\')}`;\\\\n};\\\\n\\\\nconst convertTimeToDecimal = (timeStr: string): number => {\\\\n    if (!timeStr) return 0;\\\\n    const [hours, minutes] = timeStr.split(\\\':\\\').map(Number);\\\\n    if (isNaN(hours) || isNaN(minutes)) return 0;\\\\n    return hours + (minutes / 60);\\\\n};\\\\n\\\\nexport const EventDetailModal: React.FC<EventDetailModalProps> = ({ event, onClose, onSave, onDeleteRequest, isEditingDefault = false, instructors, trainees, syllabus, syllabusDetails, highlightedField, school, traineesData, instructorsData, courseColors, onNavigateToHateSheet, onNavigateToSyllabus, onOpenPt051, onOpenAuth, onOpenPostFlight, isConflict, onNeoClick, traineeLMPs, oracleContextForModal, sctRequests = [], sctEvents = [], eventsForDate = [], onScoresCreated, publishedSchedules = {}, nextDayBuildEvents = [], activeView = \\\'\\\', isAddingTile = false, formationCallsigns = [], currentLocation = \\\'\\\', onVisualAdjustStart, onVisualAdjustEnd, onSavePT051Assessment, cancellationCodes = [], onCancelEvent }) => {\\\\n    \\\\n    console.log(\\\'EventDetailModal opened - isAddingTile:\\\', isAddingTile);\\\\n    console.log(\\\'Event data:\\\', {\\\\n        eventCategory: event.eventCategory,\\\\n        flightType: event.flightType,\\\\n        instructor: event.instructor,\\\\n        student: event.student,\\\\n        pilot: event.pilot,\\\\n        isSct: event.isSct\\\\n    });\\\\n\\\\n    const [isEditing, setIsEditing] = useState(isEditingDefault);\\\\n    const [localHighlight, setLocalHighlight] = useState(highlightedField);\\\\n    const [showCancelConfirm, setShowCancelConfirm] = useState(false);\\\\n    const [showMassBriefComplete, setShowMassBriefComplete] = useState(false);\\\\n    const [showMassBriefConfirmation, setShowMassBriefConfirmation] = useState(false);\\\\n    const [completedTrainees, setCompletedTrainees] = useState<Trainee[]>([]);\\\\n\\\\n    // Event Category State (New)\\\\n    const [eventCategory, setEventCategory] = useState<\\\'lmp_event\\\' | \\\'lmp_currency\\\' | \\\'sct\\\' | \\\'staff_cat\\\' | \\\'twr_di\\\'>(event.eventCategory || \\\'lmp_event\\\');\\\\n\\\\n    const [flightNumber, setFlightNumber] = useState(event.flightNumber);\\\\n    const [duration, setDuration] = useState<number | \\\'\\\'>(event.duration);\\\\n    const [eventType, setEventType] = useState(event.type);\\\\n    const [startTime, setStartTime] = useState(typeof event.startTime === \\\'string\\\' ? event.startTime : formatTime(event.startTime));\\\\n    const [area, setArea] = useState(event.area || \\\'A\\\');\\\\n    const [aircraftNumber, setAircraftNumber] = useState(event.aircraftNumber || \\\'001\\\');\\\\n    const [aircraftCount, setAircraftCount] = useState(1);\\\\n    const [isVisualAdjustMode, setIsVisualAdjustMode] = useState(false);\\\\n    const [visualAdjustStartTime, setVisualAdjustStartTime] = useState(event.startTime);\\\\n    const [visualAdjustEndTime, setVisualAdjustEndTime] = useState(event.startTime + event.duration);\\\\n    \\\\n    // Sync visual adjust times when event changes (from parent drag updates)\\\\n    useEffect(() => {\\\\n        if (isVisualAdjustMode) {\\\\n            setVisualAdjustStartTime(event.startTime);\\\\n            setVisualAdjustEndTime(event.startTime + event.duration);\\\\n        }\\\\n    }, [event.startTime, event.duration, isVisualAdjustMode]);\\\\n    const [crew, setCrew] = useState<CrewMember[]>([{\\\\n        flightType: event.flightType,\\\\n        instructor: event.instructor || \\\'\\\',\\\\n        student: event.student || \\\'\\\',\\\\n        pilot: event.pilot || \\\'\\\',\\\\n        group: event.group || \\\'\\\',\\\\n        groupTraineeIds: event.groupTraineeIds || [],\\\\n    }]);\\\\n    \\\\n    console.log(\\\'Initial crew state:\\\', crew);\\\\n\\\\n    // Helper function to get Dual/Solo status from Individual LMP\\\\n    // Helper function to get Dual/Solo status from Individual LMP\\\\n    const getDualSoloFromIndividualLMP = (flightNumber: string, traineeName: string): \\\'Dual\\\' | \\\'Solo\\\' => {\\\\n        console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Called with flightNumber: ${flightNumber}, traineeName: ${traineeName}`);\\\\n        console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] traineeLMPs available: ${!!traineeLMPs}, traineeLMPs size: ${traineeLMPs?.size || 0}`);\\\\n        \\\\n        if (!traineeLMPs || !traineeName) {\\\\n            console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Returning \\\'Dual\\\' - missing traineeLMPs or traineeName`);\\\\n            return \\\'Dual\\\'; // Default to Dual if no data available\\\\n        }\\\\n\\\\n        const individualLMP = traineeLMPs.get(traineeName);\\\\n        console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] individualLMP found for ${traineeName}:`, !!individualLMP, individualLMP ? individualLMP.length : 0, \\\'items\\\');\\\\n        \\\\n        if (!individualLMP) {\\\\n            console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Returning \\\'Dual\\\' - no Individual LMP found for ${traineeName}`);\\\\n            return \\\'Dual\\\'; // Default to Dual if no Individual LMP found\\\\n        }\\\\n\\\\n        const syllabusItem = individualLMP.find(item => \\\\n            item.id === flightNumber || item.code === flightNumber\\\\n        );\\\\n        \\\\n        console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Searching for flightNumber: ${flightNumber}, found item:`, !!syllabusItem);\\\\n        if (syllabusItem) {\\\\n            console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Found syllabus item:`, {\\\\n                id: syllabusItem.id,\\\\n                code: syllabusItem.code,\\\\n                sortieType: syllabusItem.sortieType\\\\n            });\\\\n        }\\\\n\\\\n        if (syllabusItem && syllabusItem.sortieType) {\\\\n            console.log(`ud83cudfaf [Dual/Solo] Found ${syllabusItem.sortieType} for ${traineeName} - ${flightNumber}`);\\\\n            return syllabusItem.sortieType;\\\\n        }\\\\n\\\\n        console.log(`ud83dudcdd [getDualSoloFromIndividualLMP] Returning \\\'Dual\\\' - no sortieType found for ${flightNumber}`);\\\\n        return \\\'Dual\\\'; // Default to Dual if not specified\\\\n    };\\\\n\\\\n    // Apply Solo logic (trainee as PIC, clear crew) when flightType changes to Solo\\\\n    const applySoloLogic = () => {\\\\n        // Check the first crew member\\\'s flightType\\\\n        if (crew[0]?.flightType === \\\'Solo\\\') {\\\\n            // For Solo events, set trainee as PIC\\\\n            const traineeName = crew[0]?.student || crew[0]?.pilot;\\\\n            if (traineeName) {\\\\n                // Update the first crew member: set trainee as pilot and clear instructor\\\\n                setCrew(prevCrew => {\\\\n                    const newCrew = [...prevCrew];\\\\n                    if (newCrew.length > 0) {\\\\n                        newCrew[0] = { \\\\n                            ...newCrew[0], \\\\n                            pilot: traineeName, \\\\n                            instructor: \\\'\\\' // Clear instructor for solo flights\\\\n                        };\\\\n                    }\\\\n                    return newCrew;\\\\n                });\\\\n                console.log(`\\\\u2708\\\\ufe0f [Solo Logic] Applied: ${traineeName} as PIC, flightType set to Solo`);\\\\n            }\\\\n        }\\\\n    };\\\\n\\\\n    const [locationType, setLocationType] = useState(event.locationType || \\\'Local\\\');\\\\n    const [origin, setOrigin] = useState(event.origin || school);\\\\n    const [destination, setDestination] = useState(event.destination || school);\\\\n    const [formationType, setFormationType] = useState(event.formationType || \\\'\\\');\\\\n    const [isDeploy, setIsDeploy] = useState(event.isDeploy || false);\\\\n    \\\\n    // Deployment Selection State\\\\n    const [selectedDeploymentId, setSelectedDeploymentId] = useState<string>(\\\'\\\');\\\\n    \\\\n    // Deployment Period State (Explicit)\\\\n    const [deploymentStartDate, setDeploymentStartDate] = useState(event.deploymentStartDate || event.date);\\\\n    const [deploymentStartTime, setDeploymentStartTime] = useState(event.deploymentStartTime || \\\'\\\');\\\\n    const [deploymentEndDate, setDeploymentEndDate] = useState(event.deploymentEndDate || event.date);\\\\n    const [deploymentEndTime, setDeploymentEndTime] = useState(event.deploymentEndTime || \\\'\\\');\\\\n    const [deploymentAircraftCount, setDeploymentAircraftCount] = useState(event.deploymentAircraftCount || 1);\\\\n    \\\\n    // Group Selection State\\\\n    const [activeGroupInput, setActiveGroupInput] = useState<number | null>(null);\\\\n    const groupInputRef = useRef<HTMLDivElement>(null);\\\\n    \\\\n    // Oracle state\\\\n    const [syllabusSelectionError, setSyllabusSelectionError] = useState(false);\\\\n    const isOracleContext = !!oracleContextForModal;\\\\n    const instructorList = oracleContextForModal?.availableInstructors || instructors;\\\\n    const traineeList = oracleContextForModal ? oracleContextForModal.availableTraineesAnalysis.map(t => t.trainee.fullName) : trainees;\\\\n    const [dynamicSyllabusOptions, setDynamicSyllabusOptions] = useState<string[]>(isOracleContext ? [] : syllabus);\\\\n\\\\n    // Filtered syllabus options based on event category\\\\n    const filteredSyllabusOptions = useMemo(() => {\\\\n        let options: string[] = [];\\\\n        \\\\n        if (eventCategory === \\\'sct\\\') {\\\\n            options = sctEvents;\\\\n        } else if (eventCategory === \\\'lmp_event\\\' || eventCategory === \\\'lmp_currency\\\') {\\\\n            // Filter for Master LMP events only\\\\n            options = syllabusDetails\\\\n                .filter(item => item.lmpType === \\\'Master LMP\\\' || !item.lmpType) // Include items without lmpType for backward compatibility\\\\n                .map(item => item.id);\\\\n        } else if (eventCategory === \\\'staff_cat\\\') {\\\\n            // Filter for Staff CAT LMP events only\\\\n            options = syllabusDetails\\\\n                .filter(item => item.lmpType === \\\'Staff CAT\\\')\\\\n                .map(item => item.id);\\\\n        } else if (eventCategory === \\\'twr_di\\\') {\\\\n            // TWR DI can use any syllabus items (no filtering)\\\\n            options = syllabusDetails.map(item => item.id);\\\\n        } else {\\\\n            options = dynamicSyllabusOptions;\\\\n        }\\\\n        \\\\n        // Always ensure SCT FORM is available when adding a tile\\\\n        if (isAddingTile && !options.includes(\\\'SCT FORM\\\')) {\\\\n            options = [...options, \\\'SCT FORM\\\'];\\\\n        }\\\\n        \\\\n        \\\\n        \\\\n        return options;\\\\n    }, [eventCategory, sctEvents, syllabusDetails, dynamicSyllabusOptions, isAddingTile]);\\\\n\\\\n    // Get staff-only instructors (exclude trainees) grouped by unit\\\\n    const staffInstructorsByUnit = useMemo(() => {\\\\n        const traineeNames = new Set(traineesData.map(t => t.fullName));\\\\n        \\\\n        // Filter out trainees to get staff only\\\\n        const staffOnly = instructorList.filter(name => !traineeNames.has(name));\\\\n        \\\\n        // Get instructor details to access unit and rank\\\\n        const staffWithDetails = staffOnly.map(name => {\\\\n            const instructor = instructorsData.find(i => i.name === name);\\\\n            return {\\\\n                name,\\\\n                unit: instructor?.unit || \\\'Unknown\\\',\\\\n                rank: instructor?.rank || \\\'FLGOFF\\\'\\\\n            };\\\\n        });\\\\n        \\\\n        // Group by unit\\\\n        const grouped = staffWithDetails.reduce((acc, instructor) => {\\\\n            if (!acc[instructor.unit]) {\\\\n                acc[instructor.unit] = [];\\\\n            }\\\\n            acc[instructor.unit].push(instructor);\\\\n            return acc;\\\\n        }, {} as Record<string, typeof staffWithDetails>);\\\\n        \\\\n        // Sort units by rank hierarchy\\\\n        const rankOrder = [\\\'WGCDR\\\', \\\'SQNLDR\\\', \\\'FLTLT\\\', \\\'FLGOFF\\\', \\\'PLTOFF\\\'];\\\\n        const sortedUnits = Object.keys(grouped).sort((a, b) => {\\\\n            const aHighestRank = Math.min(...grouped[a].map(i => rankOrder.indexOf(i.rank)));\\\\n            const bHighestRank = Math.min(...grouped[b].map(i => rankOrder.indexOf(i.rank)));\\\\n            return aHighestRank - bHighestRank;\\\\n        });\\\\n        \\\\n        return { grouped, sortedUnits };\\\\n    }, [instructorList, traineesData, instructorsData]);\\\\n\\\\n    // Group trainees by course for dropdown\\\\n    const traineesByCourse = useMemo(() => {\\\\n        // Get trainee details with course information\\\\n        const traineesWithCourse = traineeList.map(name => {\\\\n            const trainee = traineesData.find(t => t.name === name || t.fullName === name);\\\\n            return {\\\\n                name,\\\\n                course: trainee?.course || \\\'Unknown\\\'\\\\n            };\\\\n        });\\\\n        \\\\n        // Group by course\\\\n        const grouped = traineesWithCourse.reduce((acc, trainee) => {\\\\n            if (!acc[trainee.course]) {\\\\n                acc[trainee.course] = [];\\\\n            }\\\\n            acc[trainee.course].push(trainee);\\\\n            return acc;\\\\n        }, {} as Record<string, typeof traineesWithCourse>);\\\\n        \\\\n        // Sort courses alphabetically\\\\n        const sortedCourses = Object.keys(grouped).sort();\\\\n        \\\\n        return { grouped, sortedCourses };\\\\n    }, [traineeList, traineesData]);\\\\n\\\\n    // Calculate event statistics for each person\\\\n    interface PersonStats {\\\\n        name: string;\\\\n        rank: string;\\\\n        flightCount: number;\\\\n        ftdCount: number;\\\\n        cptCount: number;\\\\n        groundCount: number;\\\\n        startTime: string; // HHMM format\\\\n    }\\\\n\\\\n    const personStats = useMemo(() => {\\\\n        const stats: Record<string, PersonStats> = {};\\\\n        \\\\n        // Initialize stats for all instructors and trainees\\\\n        [...instructorList, ...traineeList].forEach(name => {\\\\n            const instructor = instructorsData.find(i => i.name === name);\\\\n            const trainee = traineesData.find(t => t.name === name || t.fullName === name);\\\\n            \\\\n            stats[name] = {\\\\n                name,\\\\n                rank: instructor?.rank || trainee?.rank || \\\'\\\',\\\\n                flightCount: 0,\\\\n                ftdCount: 0,\\\\n                cptCount: 0,\\\\n                groundCount: 0,\\\\n                startTime: \\\'\\\'\\\\n            };\\\\n        });\\\\n        \\\\n        // Calculate statistics from events\\\\n        eventsForDate.forEach(evt => {\\\\n            // Skip STBY and deployment events\\\\n            if (evt.resourceId?.startsWith(\\\'STBY\\\') || evt.resourceId?.startsWith(\\\'BNF-STBY\\\') || evt.type === \\\'deployment\\\') {\\\\n                return;\\\\n            }\\\\n            \\\\n            const people = new Set<string>();\\\\n            \\\\n            // Add instructor\\\\n            if (evt.instructor) people.add(evt.instructor);\\\\n            \\\\n            // Add student/trainee\\\\n            if (evt.student) people.add(evt.student);\\\\n            \\\\n            // Add group trainees\\\\n            if (evt.groupTraineeIds && evt.groupTraineeIds.length > 0) {\\\\n                evt.groupTraineeIds.forEach(id => {\\\\n                    const trainee = traineesData.find(t => t.idNumber === id);\\\\n                    if (trainee) people.add(trainee.name);\\\\n                });\\\\n            }\\\\n            \\\\n            // Update counts for each person involved\\\\n            people.forEach(person => {\\\\n                if (stats[person]) {\\\\n                    // Count by event type\\\\n                    if (evt.type === \\\'flight\\\') stats[person].flightCount++;\\\\n                    else if (evt.type === \\\'ftd\\\') stats[person].ftdCount++;\\\\n                    else if (evt.type === \\\'cpt\\\') stats[person].cptCount++;\\\\n                    else if (evt.type === \\\'ground\\\') stats[person].groundCount++;\\\\n                    \\\\n                    // Calculate start time (event start - pre-flight time)\\\\n                    const syllabusItem = syllabusDetails.find(s => s.id === evt.flightNumber);\\\\n                    const preFlightHours = syllabusItem?.preFlightTime || 0;\\\\n                    const eventStartTime = evt.startTime - preFlightHours;\\\\n                    \\\\n                    // Update earliest start time\\\\n                    if (!stats[person].startTime || eventStartTime < parseFloat(stats[person].startTime.replace(\\\':\\\', \\\'.\\\'))) {\\\\n                        const hours = Math.floor(eventStartTime);\\\\n                        const minutes = Math.round((eventStartTime % 1) * 60);\\\\n                        stats[person].startTime = `${String(hours).padStart(2, \\\'0\\\')}${String(minutes).padStart(2, \\\'0\\\')}`;\\\\n                    }\\\\n                }\\\\n            });\\\\n        });\\\\n        \\\\n        return stats;\\\\n    }, [eventsForDate, instructorList, traineeList, instructorsData, traineesData, syllabusDetails]);\\\\n\\\\n// Helper to render staff instructor dropdown with unit grouping and statistics\\\\n    const renderStaffInstructorDropdown = (value: string, onChange: (value: string) => void, label: string = \\\'Instructor\\\', disabled: boolean = false, includePax: boolean = false) => {\\\\n        return (\\\\n            <div>\\\\n                <label className=\\\\"block text-sm font-medium text-gray-400\\\\">{label}</label>\\\\n                <select \\\\n                    value={value} \\\\n                    onChange={e => onChange(e.target.value)} \\\\n                    disabled={disabled}\\\\n                    className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed appearance-none cursor-pointer z-10 \\\\"\\\\n                >\\\\n                    <option value=\\\\"\\\\" disabled>Select {label.toLowerCase()}</option>\\\\n                    {staffInstructorsByUnit.sortedUnits.map(unit => (\\\\n                        <optgroup key={unit} label={`\\\\u2500\\\\u2500\\\\u2500 ${unit} \\\\u2500\\\\u2500\\\\u2500`}>\\\\n                            {staffInstructorsByUnit.grouped[unit].map(instructor => {\\\\n                                const stats = personStats[instructor.name] || { rank: \\\'\\\' };\\\\n                                   const displayText = `${stats.rank} ${instructor.name}`;\\\\n                                return (\\\\n                                    <option key={instructor.name} value={instructor.name}>\\\\n                                        {displayText}\\\\n                                    </option>\\\\n                                );\\\\n                            })}\\\\n                        </optgroup>\\\\n                    ))}\\\\n                    {includePax && (\\\\n                        <optgroup label=\\\\"\\\\u2500\\\\u2500\\\\u2500 Other \\\\u2500\\\\u2500\\\\u2500\\\\">\\\\n                            <option value=\\\\"PAX\\\\">PAX</option>\\\\n                        </optgroup>\\\\n                    )}\\\\n                </select>\\\\n            </div>\\\\n        );\\\\n    };\\\\n// Helper to render trainee dropdown with course grouping and statistics\\\\n    const renderTraineeDropdown = (value: string, onChange: (value: string) => void, disabled: boolean = false, highlight: boolean = false) => {\\\\n        return (\\\\n            <div>\\\\n                <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Trainee</label>\\\\n                <select \\\\n                    value={value} \\\\n                    onChange={e => onChange(e.target.value)} \\\\n                    disabled={disabled}\\\\n                    className={`mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition-all duration-200 disabled:bg-gray-700/50 disabled:cursor-not-allowed ${highlight ? \\\'ring-2 ring-red-500\\\' : \\\'\\\'}`}\\\\n                    \\\\n                >\\\\n                    <option value=\\\\"\\\\" disabled>Select a trainee</option>\\\\n                    {traineesByCourse.sortedCourses.map(course => (\\\\n                        <optgroup key={course} label={`\\\\u2500\\\\u2500\\\\u2500 ${course} \\\\u2500\\\\u2500\\\\u2500`}>\\\\n                            {traineesByCourse.grouped[course].map(trainee => {\\\\n                                   // Get trainee details to access just the name without course\\\\n                                   const traineeData = traineesData.find(t => t.name === trainee.name || t.fullName === trainee.name);\\\\n                                   const stats = personStats[trainee.name] || { rank: \\\'\\\' };\\\\n                                   const displayText = `${stats.rank} ${traineeData?.name || trainee.name}`;\\\\n                                return (\\\\n                                    <option key={trainee.name} value={trainee.name}>\\\\n                                        {displayText}\\\\n                                    </option>\\\\n                                );\\\\n                            })}\\\\n                        </optgroup>\\\\n                    ))}\\\\n                </select>\\\\n            </div>\\\\n        );\\\\n    };    const formatDecimalHourToString = (decimalHour: number): string => {\\\\n        const hours = Math.floor(decimalHour);\\\\n        const minutes = Math.round((decimalHour % 1) * 60);\\\\n        return `${String(hours).padStart(2, \\\'0\\\')}:${String(minutes).padStart(2, \\\'0\\\')}`;\\\\n    };\\\\n\\\\n    // Auto-set Dual/Solo from Individual LMP when adding new events\\\\n    useEffect(() => {\\\\n        if (isAddingTile && flightNumber && crew[0]) {\\\\n            const traineeName = crew[0]?.student || crew[0]?.pilot;\\\\n            if (traineeName && traineeLMPs) {\\\\n                const individualLMPFlightType = getDualSoloFromIndividualLMP(flightNumber, traineeName);\\\\n                // Only update if the flightType is different to avoid infinite loop\\\\n                if (crew[0].flightType !== individualLMPFlightType) {\\\\n                    setCrew(prevCrew => {\\\\n                        const newCrew = [...prevCrew];\\\\n                        if (newCrew.length > 0) {\\\\n                            newCrew[0] = { ...newCrew[0], flightType: individualLMPFlightType };\\\\n                        }\\\\n                        return newCrew;\\\\n                    });\\\\n                    console.log(`\\\\ud83c\\\\udfaf [Auto Dual/Solo] Set to ${individualLMPFlightType} from Individual LMP for ${traineeName}`);\\\\n                }\\\\n            }\\\\n        }\\\\n    }, [isAddingTile, flightNumber, traineeLMPs]);\\\\n\\\\n    // Auto-set Dual/Solo from Individual LMP when creating new events (not just tiles)\\\\n    useEffect(() => {\\\\n        if (crew[0]?.flightType === \\\'Solo\\\') {\\\\n            const traineeName = crew[0]?.student || crew[0]?.pilot;\\\\n            // Only apply if pilot is not already set correctly\\\\n            if (traineeName && crew[0].pilot !== traineeName) {\\\\n                applySoloLogic();\\\\n            }\\\\n        }\\\\n    }, [crew[0]?.flightType, crew[0]?.student, crew[0]?.pilot]);\\\\n\\\\n    // Effect to set default values based on event category\\\\n    useEffect(() => {\\\\n        if (eventCategory === \\\'sct\\\') {\\\\n            // SCT defaults to Solo\\\\n            setCrew(prev => prev.map(c => ({ ...c, flightType: \\\'Solo\\\' })));\\\\n            // Set default duration to 1.2\\\\n            if (!duration) setDuration(1.2);\\\\n        } else if (eventCategory === \\\'lmp_event\\\' || eventCategory === \\\'lmp_currency\\\') {\\\\n            // Set default duration to 1.2 for LMP events\\\\n            if (!duration) setDuration(1.2);\\\\n        } else if (eventCategory === \\\'staff_cat\\\') {\\\\n            // Set default duration to 1.2 for Staff CAT\\\\n            if (!duration) setDuration(1.2);\\\\n        } else if (eventCategory === \\\'twr_di\\\') {\\\\n            // TWR DI defaults to Solo\\\\n            setCrew(prev => prev.map(c => ({ ...c, flightType: \\\'Solo\\\' })));\\\\n            // Set default duration to 1.2 for TWR DI\\\\n            if (!duration) setDuration(1.2);\\\\n            // Set default start time to 0800 only for new events\\\\n            if (isAddingTile || !event.startTime || event.startTime === 0) {\\\\n                setStartTime(\\\'08:00\\\');\\\\n            }\\\\n        }\\\\n    }, [eventCategory]);\\\\n\\\\n    // Effect to pull Type (Dual/Solo) from syllabus when flight number changes\\\\n    useEffect(() => {\\\\n        if (flightNumber && (eventCategory === \\\'lmp_event\\\' || eventCategory === \\\'lmp_currency\\\' || eventCategory === \\\'staff_cat\\\' || eventCategory === \\\'twr_di\\\')) {\\\\n            const syllabusItem = syllabusDetails.find(item => item.id === flightNumber);\\\\n            if (syllabusItem && syllabusItem.flightType) {\\\\n                setCrew(prev => prev.map(c => ({ ...c, flightType: syllabusItem.flightType as \\\'Dual\\\' | \\\'Solo\\\' })));\\\\n            }\\\\n        }\\\\n    }, [flightNumber, eventCategory, syllabusDetails]);\\\\n\\\\n    // Effect to set Dual/Solo from Individual LMP when flight number changes (before pilot selection)\\\\n    useEffect(() => {\\\\n        if (isAddingTile || (isEditingDefault && (!event.id || event.id.startsWith(\\\'2d1b6a22\\\')))) {\\\\n            // This is a new event or tile (check for generated IDs that start with our prefix)\\\\n            console.log(`\\\\\\\\ud83d\\\\\\\\udcdd [Flight Number Change] isAddingTile: ${isAddingTile}, isEditingDefault: ${isEditingDefault}, event.id: ${event.id}, flightNumber: ${flightNumber}`);\\\\n            \\\\n            if (flightNumber && crew[0] && traineeLMPs) {\\\\n                const traineeName = crew[0]?.student || crew[0]?.pilot;\\\\n                \\\\n                if (traineeName) {\\\\n                    // If pilot is selected, use their Individual LMP\\\\n                    console.log(`\\\\\\\\ud83d\\\\\\\\udcdd [Flight Number Change] Using selected trainee: ${traineeName}`);\\\\n                    const individualLMPFlightType = getDualSoloFromIndividualLMP(flightNumber, traineeName);\\\\n                    \\\\n                    if (crew[0].flightType !== individualLMPFlightType) {\\\\n                        setCrew(prevCrew => {\\\\n                            const newCrew = [...prevCrew];\\\\n                            if (newCrew.length > 0) {\\\\n                                newCrew[0] = { ...newCrew[0], flightType: individualLMPFlightType };\\\\n                            }\\\\n                            return newCrew;\\\\n                        });\\\\n                        console.log(`\\\\\\\\ud83c\\\\\\\\udfaf [Auto Dual/Solo] Set to ${individualLMPFlightType} from Individual LMP for selected trainee ${traineeName}`);\\\\n                    }\\\\n                } else {\\\\n                    // No pilot selected yet - find first trainee with this LMP and use their Individual LMP as default\\\\n                    console.log(`\\\\\\\\ud83d\\\\\\\\udcdd [Flight Number Change] No pilot selected - searching for default from any trainee with LMP ${flightNumber}`);\\\\n                    \\\\n                    let defaultFlightType: \\\'Dual\\\' | \\\'Solo\\\' = \\\'Dual\\\'; // Default to Dual if nothing found\\\\n                    let foundTrainee = \\\'\\\';\\\\n                    \\\\n                    // Search through all trainees to find someone who has this LMP in their Individual LMP\\\\n                    for (const [traineeName, individualLMP] of traineeLMPs.entries()) {\\\\n                        const syllabusItem = individualLMP.find(item => \\\\n                            item.id === flightNumber || item.code === flightNumber\\\\n                        );\\\\n                        \\\\n                        if (syllabusItem && syllabusItem.sortieType) {\\\\n                            defaultFlightType = syllabusItem.sortieType;\\\\n                            foundTrainee = traineeName;\\\\n                            console.log(`\\\\\\\\ud83d\\\\\\\\udcdd [Flight Number Change] Found default ${defaultFlightType} from ${foundTrainee}\\\'s Individual LMP`);\\\\n                            break; // Use the first one found\\\\n                        }\\\\n                    }\\\\n                    \\\\n                    if (crew[0].flightType !== defaultFlightType) {\\\\n                        setCrew(prevCrew => {\\\\n                            const newCrew = [...prevCrew];\\\\n                            if (newCrew.length > 0) {\\\\n                                newCrew[0] = { ...newCrew[0], flightType: defaultFlightType };\\\\n                            }\\\\n                            return newCrew;\\\\n                        });\\\\n                        console.log(`\\\\\\\\ud83c\\\\\\\\udfaf [Auto Dual/Solo] Set to ${defaultFlightType} as default from ${foundTrainee || \\\'system\\\'} for LMP ${flightNumber}`);\\\\n                    }\\\\n                }\\\\n            }\\\\n        }\\\\n    }, [flightNumber, traineeLMPs, isAddingTile, isEditingDefault, event.id]);\\\\n\\\\n    // Effect to update Dual/Solo from Individual LMP when trainee changes (after initial flight number selection)\\\\n    useEffect(() => {\\\\n        if (isAddingTile || (isEditingDefault && (!event.id || event.id.startsWith(\\\'2d1b6a22\\\')))) {\\\\n            if (flightNumber && crew[0] && traineeLMPs) {\\\\n                const traineeName = crew[0]?.student || crew[0]?.pilot;\\\\n                \\\\n                if (traineeName) {\\\\n                    // Update when specific trainee is selected (may override the default)\\\\n                    const individualLMPFlightType = getDualSoloFromIndividualLMP(flightNumber, traineeName);\\\\n                    \\\\n                    if (crew[0].flightType !== individualLMPFlightType) {\\\\n                        setCrew(prevCrew => {\\\\n                            const newCrew = [...prevCrew];\\\\n                            if (newCrew.length > 0) {\\\\n                                newCrew[0] = { ...newCrew[0], flightType: individualLMPFlightType };\\\\n                            }\\\\n                            return newCrew;\\\\n                        });\\\\n                        console.log(`\\\\\\\\ud83c\\\\\\\\udfaf [Trainee Change] Updated to ${individualLMPFlightType} from Individual LMP for selected trainee ${traineeName}`);\\\\n                    }\\\\n                }\\\\n            }\\\\n        }\\\\n    }, [crew[0]?.student, crew[0]?.pilot, flightNumber, traineeLMPs, isAddingTile, isEditingDefault, event.id]);\\\\n\\\\n    // Filter formation callsigns by current location\\\\n    const filteredCallsigns = useMemo(() => {\\\\n        if (formationCallsigns && formationCallsigns.length > 0 && currentLocation) {\\\\n            const filtered = formationCallsigns.filter(cs => cs.location === currentLocation);\\\\n            return filtered.length > 0 ? filtered : null;\\\\n        }\\\\n        return null;\\\\n    }, [formationCallsigns, currentLocation]);\\\\n\\\\n    // Backwards compatible formationTypes (just codes)\\\\n    const formationTypes = useMemo(() => {\\\\n        if (filteredCallsigns) {\\\\n            return filteredCallsigns.map(cs => cs.code);\\\\n        }\\\\n        return school === \\\'ESL\\\' ? [\\\'MERL\\\', \\\'VANG\\\'] : [\\\'COBR\\\', \\\'HAWK\\\'];\\\\n    }, [filteredCallsigns, school]);\\\\n    const areas = [\\\'A\\\', \\\'B\\\', \\\'C\\\', \\\'D\\\', \\\'E\\\', \\\'F\\\', \\\'G\\\', \\\'H\\\', \\\'S\\\', \\\'T\\\', \\\'U\\\', \\\'V\\\', \\\'W\\\', \\\'X\\\', \\\'Y\\\', \\\'Z\\\'];\\\\n\\\\n    const courses = useMemo(() => Object.keys(courseColors).sort(), [courseColors]);\\\\n    \\\\n    // Group trainees data by course for the flyout\\\\n    const coursesStruct = useMemo(() => {\\\\n        return courses.map(courseName => ({\\\\n            name: courseName,\\\\n            trainees: traineesData.filter(t => t.course === courseName).sort((a,b) => a.name.localeCompare(b.name))\\\\n        }));\\\\n    }, [courses, traineesData]);\\\\n\\\\n    const modalTitle = useMemo(() => {\\\\n        if (eventType === \\\'flight\\\') return \\\'Flight Details\\\';\\\\n        if (eventType === \\\'ftd\\\') return \\\'FTD Session Details\\\';\\\\n        return \\\'Ground Event Details\\\';\\\\n    }, [eventType]);\\\\n\\\\n    useEffect(() => {\\\\n        setFlightNumber(event.flightNumber);\\\\n        \\\\n        // Initialize duration as empty if creating a new event (and no pre-filled flight number), otherwise use event\\\'s duration\\\\n        if (isEditingDefault && !event.flightNumber) {\\\\n            setDuration(\\\'\\\');\\\\n        } else {\\\\n            setDuration(event.duration);\\\\n        }\\\\n\\\\n        setEventType(event.type);\\\\n        setStartTime(typeof event.startTime === \\\'string\\\' ? event.startTime : formatTime(event.startTime));\\\\n        setArea(event.area || \\\'A\\\');\\\\n        setAircraftNumber(event.aircraftNumber || \\\'001\\\');\\\\n        setAircraftCount(1);\\\\n        setCrew([{ \\\\n            flightType: event.flightType, \\\\n            instructor: event.instructor || \\\'\\\', \\\\n            student: event.student || \\\'\\\', \\\\n            pilot: event.pilot || \\\'\\\',\\\\n            group: event.group || \\\'\\\',\\\\n            groupTraineeIds: event.groupTraineeIds || []\\\\n        }]);\\\\n        setIsEditing(isEditingDefault);\\\\n        setLocalHighlight(highlightedField);\\\\n        setLocationType(event.locationType || \\\'Local\\\');\\\\n        setOrigin(event.origin || school);\\\\n        setDestination(event.destination || school);\\\\n        setFormationType(event.formationType || formationTypes[0]);\\\\n        setIsDeploy(event.isDeploy || false);\\\\n        \\\\n        setDeploymentStartDate(event.deploymentStartDate || event.date);\\\\n        setDeploymentStartTime(event.deploymentStartTime || \\\'\\\');\\\\n        // Default end date/time logic handled in effect below or initialized here if event exists\\\\n        setDeploymentEndDate(event.deploymentEndDate || event.date); \\\\n        setDeploymentEndTime(event.deploymentEndTime || \\\'\\\');\\\\n\\\\n    }, [event, isEditingDefault, highlightedField, school]);\\\\n    \\\\n    useEffect(() => {\\\\n        if (locationType === \\\'Local\\\') {\\\\n            setOrigin(school);\\\\n            setDestination(school);\\\\n        }\\\\n    }, [locationType, school]);\\\\n\\\\n    useEffect(() => {\\\\n        const isFormation = flightNumber === \\\'SCT FORM\\\';\\\\n        const newSize = isFormation ? aircraftCount : 1;\\\\n        if (crew.length !== newSize) {\\\\n             const newCrew = Array.from({ length: newSize }, (_, i) => {\\\\n                // For SCT FORM with SCT category, default to Solo\\\\n                const defaultFlightType = (isFormation && eventCategory === \\\'sct\\\') ? \\\'Solo\\\' : \\\'Dual\\\';\\\\n                return crew[i] || { flightType: defaultFlightType as \\\'Dual\\\' | \\\'Solo\\\', instructor: \\\'\\\', student: \\\'\\\', pilot: \\\'\\\', group: \\\'\\\', groupTraineeIds: [] };\\\\n            });\\\\n            setCrew(newCrew);\\\\n        }\\\\n    }, [aircraftCount, flightNumber, crew, eventCategory]);\\\\n\\\\n    useEffect(() => {\\\\n      setEventType(getEventTypeFromSyllabus(flightNumber, syllabusDetails));\\\\n    }, [flightNumber, syllabusDetails]);\\\\n\\\\n    // Helper function to get current deployments\\\\n    const getCurrentDeployments = (): ScheduleEvent[] => {\\\\n        const deployments: ScheduleEvent[] = [];\\\\n        \\\\n        // Get deployments from published schedules for Program Schedule view\\\\n        if ([\\\'Program Schedule\\\', \\\'DailyFlyingProgram\\\', \\\'InstructorSchedule\\\', \\\'TraineeSchedule\\\'].includes(activeView)) {\\\\n            Object.values(publishedSchedules).forEach(scheduleEvents => {\\\\n                const todayDeployments = scheduleEvents.filter(e => e.type === \\\'deployment\\\');\\\\n                deployments.push(...todayDeployments);\\\\n            });\\\\n        } \\\\n        // Get deployments from next day build for Next Day Build view\\\\n        else if ([\\\'NextDayBuild\\\', \\\'Priorities\\\', \\\'ProgramData\\\', \\\'NextDayInstructorSchedule\\\', \\\'NextDayTraineeSchedule\\\'].includes(activeView)) {\\\\n            const buildDeployments = nextDayBuildEvents.filter(e => e.type === \\\'deployment\\\');\\\\n            deployments.push(...buildDeployments);\\\\n        }\\\\n        \\\\n        // Filter deployments to show only those that could accommodate this event type\\\\n        const compatibleDeployments = deployments.filter(deployment => {\\\\n            if (eventType === \\\'flight\\\') {\\\\n                return deployment.resourceId?.startsWith(\\\'PC-21\\\') || deployment.resourceId?.startsWith(\\\'Deployed\\\');\\\\n            } else if (eventType === \\\'ftd\\\') {\\\\n                return deployment.resourceId?.startsWith(\\\'FTD\\\');\\\\n            } else if (eventType === \\\'cpt\\\') {\\\\n                return deployment.resourceId?.startsWith(\\\'CPT\\\');\\\\n            }\\\\n            return false;\\\\n        });\\\\n        \\\\n        return compatibleDeployments;\\\\n    };\\\\n\\\\n    // Helper function to format deployment title\\\\n    const formatDeploymentTitle = (deployment: ScheduleEvent): string => {\\\\n        const formatTime = (time: number): string => {\\\\n            const hours = Math.floor(time);\\\\n            const minutes = Math.round((time - hours) * 60);\\\\n            return `${hours.toString().padStart(2, \\\'0\\\')}${minutes.toString().padStart(2, \\\'0\\\')}`;\\\\n        };\\\\n        \\\\n        // Get start date and format it\\\\n        const startDate = deployment.date || \\\'\\\';\\\\n        const endDate = deployment.deploymentEndDate || startDate;\\\\n        \\\\n        // Format dates as DDMMMYY (e.g., 12May25)\\\\n        const formatDate = (dateStr: string): string => {\\\\n            if (!dateStr) return \\\'\\\';\\\\n            const date = new Date(dateStr);\\\\n            const day = date.getDate().toString().padStart(2, \\\'0\\\');\\\\n            const month = date.toLocaleDateString(\\\'en-US\\\', { month: \\\'short\\\' });\\\\n            const year = date.getFullYear().toString().slice(-2);\\\\n            return `${day}${month}${year}`;\\\\n        };\\\\n        \\\\n        const startTime = formatTime(deployment.startTime || 0);\\\\n        const endTime = formatTime((deployment.startTime || 0) + (deployment.duration || 0));\\\\n        \\\\n        return `${startTime}${formatDate(startDate)}\\\\u2013${endTime}${formatDate(endDate)}`;\\\\n    };\\\\n\\\\n    \\\\n    \\\\n    \\\\n\\\\n\\\\n    // Oracle Logic for SCT and Trainee next event\\\\n    useEffect(() => {\\\\n        const selectedTrainee = crew[0]?.student;\\\\n        const selectedInstructor = crew[0]?.instructor;\\\\n\\\\n        // Trainee selection always takes priority\\\\n        if (selectedTrainee) {\\\\n            if (isOracleContext && oracleContextForModal?.availableTraineesAnalysis) {\\\\n                const analysis = oracleContextForModal.availableTraineesAnalysis.find(t => t.trainee.fullName === selectedTrainee);\\\\n                if (analysis && analysis.nextSyllabusEvent) {\\\\n                    const nextEventId = analysis.nextSyllabusEvent.id;\\\\n                    setDynamicSyllabusOptions([nextEventId]);\\\\n                    setFlightNumber(nextEventId);\\\\n                    setDuration(analysis.nextSyllabusEvent.duration);\\\\n                    return;\\\\n                }\\\\n            }\\\\n            // Fallback for non-oracle or if analysis fails. Just show all syllabus items.\\\\n            setDynamicSyllabusOptions(syllabus);\\\\n            return;\\\\n        }\\\\n\\\\n        // No trainee selected, check for instructor (only in Oracle context)\\\\n        if (isOracleContext && selectedInstructor) {\\\\n            const instructorScts = sctRequests.filter(req => req.name === selectedInstructor);\\\\n            if (instructorScts.length > 0) {\\\\n                const sctOptions = instructorScts.map(req => req.event);\\\\n                setDynamicSyllabusOptions(sctOptions);\\\\n                setFlightNumber(sctOptions[0]); // Auto-select the first one\\\\n                const detail = syllabusDetails.find(d => d.id === sctOptions[0]);\\\\n                if (detail) {\\\\n                    setDuration(detail.duration);\\\\n                }\\\\n            } else {\\\\n                // Instructor selected, but no SCT requests. So, no options.\\\\n                setDynamicSyllabusOptions([]);\\\\n                setFlightNumber(\\\'\\\');\\\\n            }\\\\n            return;\\\\n        }\\\\n        \\\\n        // Fallback for all other cases (e.g., non-oracle, or oracle with no selections)\\\\n        setDynamicSyllabusOptions(isOracleContext ? [] : syllabus);\\\\n        if (!event.flightNumber && isOracleContext) {\\\\n            setFlightNumber(\\\'\\\');\\\\n        }\\\\n\\\\n    }, [crew, isOracleContext, oracleContextForModal, sctRequests, syllabus, syllabusDetails, event.flightNumber]);\\\\n\\\\n    // Close group flyout when clicking outside\\\\n    useEffect(() => {\\\\n        const handleClickOutside = (e: MouseEvent) => {\\\\n            if (groupInputRef.current && !groupInputRef.current.contains(e.target as Node)) {\\\\n                setActiveGroupInput(null);\\\\n            }\\\\n        };\\\\n        document.addEventListener(\\\\"mousedown\\\\", handleClickOutside as any);\\\\n        return () => document.removeEventListener(\\\\"mousedown\\\\", handleClickOutside as any);\\\\n    }, []);\\\\n    \\\\n    const personnel = useMemo(() => [...instructors, ...trainees].sort(), [instructors, trainees]);\\\\n    \\\\n    const handleCrewChange = (index: number, field: keyof CrewMember, value: any) => {\\\\n        const newCrew = [...crew];\\\\n        const memberToUpdate = { ...newCrew[index] };\\\\n\\\\n        if (field === \\\'flightType\\\') {\\\\n            const flightTypeValue = value as \\\'Dual\\\' | \\\'Solo\\\';\\\\n            memberToUpdate.flightType = flightTypeValue;\\\\n\\\\n            if (flightTypeValue === \\\'Solo\\\') {\\\\n                memberToUpdate.instructor = \\\'\\\';\\\\n                memberToUpdate.student = \\\'\\\';\\\\n                memberToUpdate.group = \\\'\\\';\\\\n                memberToUpdate.groupTraineeIds = [];\\\\n            } else {\\\\n                memberToUpdate.pilot = \\\'\\\';\\\\n            }\\\\n        } else {\\\\n            // @ts-ignore - dynamic assignment\\\\n            memberToUpdate[field] = value;\\\\n        }\\\\n\\\\n        newCrew[index] = memberToUpdate;\\\\n        setCrew(newCrew);\\\\n        setLocalHighlight(null);\\\\n    };\\\\n    \\\\n    const handleToggleTrainee = (index: number, traineeId: number) => {\\\\n        const member = crew[index];\\\\n        const currentIds = new Set(member.groupTraineeIds || []);\\\\n        \\\\n        if (currentIds.has(traineeId)) {\\\\n            currentIds.delete(traineeId);\\\\n        } else {\\\\n            currentIds.add(traineeId);\\\\n        }\\\\n        \\\\n        const newIds = Array.from(currentIds);\\\\n        \\\\n        // Update display string based on count\\\\n        const displayString = newIds.length > 0 \\\\n            ? `${newIds.length} Trainees Selected` \\\\n            : \\\'\\\';\\\\n\\\\n        const newCrew = [...crew];\\\\n        newCrew[index] = { ...member, groupTraineeIds: newIds, group: displayString };\\\\n        setCrew(newCrew);\\\\n    };\\\\n\\\\n    const handleToggleCourse = (index: number, courseTrainees: Trainee[]) => {\\\\n        const member = crew[index];\\\\n        const currentIds = new Set(member.groupTraineeIds || []);\\\\n        const courseIds = courseTrainees.map(t => t.idNumber);\\\\n        \\\\n        const allSelected = courseIds.every(id => currentIds.has(id));\\\\n        \\\\n        if (allSelected) {\\\\n            courseIds.forEach(id => currentIds.delete(id));\\\\n        } else {\\\\n            courseIds.forEach(id => currentIds.add(id));\\\\n        }\\\\n        \\\\n        const newIds = Array.from(currentIds);\\\\n        const displayString = newIds.length > 0 \\\\n            ? `${newIds.length} Trainees Selected` \\\\n            : \\\'\\\';\\\\n\\\\n        const newCrew = [...crew];\\\\n        newCrew[index] = { ...member, groupTraineeIds: newIds, group: displayString };\\\\n        setCrew(newCrew);\\\\n    };\\\\n\\\\n    const handleFlightNumberChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\\\\n        const newFlightNumber = e.target.value;\\\\n        const oldFlightNumber = flightNumber;\\\\n        setFlightNumber(newFlightNumber);\\\\n\\\\n        const detail = syllabusDetails.find(d => d.id === newFlightNumber);\\\\n        if (detail) {\\\\n            setDuration(detail.duration);\\\\n        }\\\\n\\\\n        console.log(\\\'Flight number changed to:\\\', newFlightNumber);\\\\n        if (newFlightNumber === \\\'SCT FORM\\\' && !formationType) {\\\\n            setFormationType(formationTypes[0]);\\\\n        }\\\\n        \\\\n           \\\\n           if (newFlightNumber === \\\'SCT FORM\\\' && eventCategory === \\\'sct\\\') {\\\\n               // Set defaults for SCT FORM\\\\n               setAircraftCount(2);\\\\n               // Update crew to Solo\\\\n               setCrew(crew.map(member => ({\\\\n                   ...member,\\\\n                   flightType: \\\'Solo\\\'\\\\n               })));\\\\n           } else if (newFlightNumber !== \\\'SCT FORM\\\') {\\\\n               setAircraftCount(1);\\\\n           }\\\\n    };\\\\n    const handleAircraftCountChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\\\\n        const newCount = parseInt(e.target.value);\\\\n        setAircraftCount(newCount);\\\\n        // When changing aircraft count for SCT FORM, ensure all existing crew are Solo\\\\n        if (flightNumber === \\\'SCT FORM\\\' && eventCategory === \\\'sct\\\') {\\\\n            setTimeout(() => {\\\\n                setCrew(prevCrew => prevCrew.map(member => ({\\\\n                    ...member,\\\\n                    flightType: \\\'Solo\\\' as \\\'Dual\\\' | \\\'Solo\\\'\\\\n                })));\\\\n            }, 100);\\\\n        }\\\\n    };\\\\n\\\\n    // Helper function to convert time string (HH:MM) to decimal hours\\\\n    const parseTimeStringToHours = (timeString: string): number => {\\\\n        if (!timeString) return 0;\\\\n        \\\\n        // Handle both formats: \\\\"HH:MM\\\\" and \\\\"HHMM\\\\"\\\\n        if (timeString.includes(\\\':\\\')) {\\\\n            const [hours, minutes] = timeString.split(\\\':\\\').map(Number);\\\\n            return (hours || 0) + ((minutes || 0) / 60);\\\\n        } else {\\\\n            // Handle 4-digit format without colon (e.g., \\\\"0800\\\\", \\\\"1330\\\\")\\\\n            const hours = parseInt(timeString.substring(0, 2)) || 0;\\\\n            const minutes = parseInt(timeString.substring(2, 4)) || 0;\\\\n            return hours + (minutes / 60);\\\\n        }\\\\n    };\\\\n\\\\n    const handleVisualAdjust = () => {\\\\n        console.log(\\\\"Visual Adjust clicked\\\\");\\\\n        // Call parent callback FIRST before changing local state\\\\n        if (onVisualAdjustStart) {\\\\n            onVisualAdjustStart(event);\\\\n        }\\\\n        // Then set local state\\\\n        setIsVisualAdjustMode(true);\\\\n    };\\\\n\\\\n    const handleVisualAdjustContinue = () => {\\\\n        setIsVisualAdjustMode(false);\\\\n        const updatedEvent = {\\\\n            ...event,\\\\n            startTime: visualAdjustStartTime,\\\\n            duration: visualAdjustEndTime - visualAdjustStartTime\\\\n        };\\\\n        if (onVisualAdjustEnd) {\\\\n            onVisualAdjustEnd(updatedEvent);\\\\n        }\\\\n        setStartTime(formatTime(visualAdjustStartTime));\\\\n        setDuration(visualAdjustEndTime - visualAdjustStartTime);\\\\n    };\\\\n    const handleSave = () => {\\\\n        const eventsToSave: ScheduleEvent[] = crew.map((c, index) => {\\\\n            let eventColor = event.color;\\\\n            \\\\n            const traineeName = c.student || c.pilot;\\\\n            if (traineeName) {\\\\n                const traineeDetails = traineesData.find(t => t.fullName === traineeName);\\\\n                if (traineeDetails && courseColors[traineeDetails.course]) {\\\\n                    eventColor = courseColors[traineeDetails.course];\\\\n                }\\\\n            }\\\\n            \\\\n            // Handle deployment assignment\\\\n            let resourceId = event.resourceId;\\\\n            if (selectedDeploymentId) {\\\\n                // Find the selected deployment and assign its resourceId\\\\n                const selectedDeployment = getCurrentDeployments().find(d => d.id === selectedDeploymentId);\\\\n                if (selectedDeployment) {\\\\n                    resourceId = selectedDeployment.resourceId;\\\\n                    console.log(`Assigning event to deployment: ${selectedDeployment.id} (${resourceId})`);\\\\n                }\\\\n            }\\\\n            \\\\n            // For SCT FORM events with multiple aircraft, generate unique IDs for each event\\\\n            const eventId = (flightNumber === \\\'SCT FORM\\\' && crew.length > 1) \\\\n                ? `${event.id}-${index}-${Date.now()}` \\\\n                : event.id;\\\\n            \\\\n            // For SCT FORM events with multiple aircraft, clear resourceId so findAvailableResourceId assigns them to different lines\\\\n            if (flightNumber === \\\'SCT FORM\\\' && crew.length > 1) {\\\\n                resourceId = \\\'\\\';\\\\n            }\\\\n            \\\\n            const savedEvent = {\\\\n                ...event,\\\\n                id: eventId,\\\\n                type: eventType,\\\\n                flightNumber,\\\\n                startTime: typeof startTime === \\\'string\\\' ? convertTimeToDecimal(startTime) : startTime,\\\\n                resourceId,\\\\n                duration: typeof duration === \\\'number\\\' ? duration : 0, // Ensure duration is a number\\\\n                area: eventType === \\\'flight\\\' ? area : undefined,\\\\n                aircraftNumber: eventType === \\\'flight\\\' ? aircraftNumber : undefined,\\\\n                color: eventColor,\\\\n                flightType: c.flightType,\\\\n                instructor: c.instructor,\\\\n                student: c.student,\\\\n                pilot: c.pilot,\\\\n                group: c.group,\\\\n                groupTraineeIds: c.groupTraineeIds,\\\\n                locationType,\\\\n                origin: locationType === \\\'Local\\\' ? school : origin,\\\\n                destination: locationType === \\\'Local\\\' ? school : destination,\\\\n                formationType: flightNumber === \\\'SCT FORM\\\' ? formationType : undefined,\\\\n                formationPosition: flightNumber === \\\'SCT FORM\\\' ? index + 1 : undefined,\\\\n                callsign: flightNumber === \\\'SCT FORM\\\' ? `${formationType}${index + 1}` : undefined,\\\\n                formationId: undefined,\\\\n                isDeploy: eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' ? isDeploy : undefined,\\\\n                \\\\n                // Explicit Deployment Period\\\\n                deploymentStartDate: (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy) ? deploymentStartDate : undefined,\\\\n                deploymentStartTime: (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy) ? deploymentStartTime : undefined,\\\\n                deploymentEndDate: (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy) ? deploymentEndDate : undefined,\\\\n                deploymentEndTime: (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy) ? deploymentEndTime : undefined,\\\\n                deploymentAircraftCount: (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy) ? deploymentAircraftCount : undefined,\\\\n                \\\\n                // Save event category for LMP Currency handling\\\\n                eventCategory: eventCategory,\\\\n            };\\\\n            \\\\n            // Debug logging for SCT events\\\\n            if (eventCategory === \\\'sct\\\') {\\\\n                console.log(\\\'\\\\ud83d\\\\udcbe Saving SCT event:\\\', {\\\\n                    id: savedEvent.id,\\\\n                    flightType: savedEvent.flightType,\\\\n                    pilot: savedEvent.pilot,\\\\n                    student: savedEvent.student,\\\\n                    instructor: savedEvent.instructor,\\\\n                    eventCategory: savedEvent.eventCategory,\\\\n                    crewData: c,\\\\n                    allCrew: crew\\\\n                });\\\\n            }\\\\n            \\\\n            return savedEvent;\\\\n        });\\\\n        \\\\n        // Create Deployment Tile if deployment period is populated and isDeploy is true\\\\n        console.log(\\\'Deployment Check:\\\', {\\\\n            eventType,\\\\n            locationType,\\\\n            isDeploy,\\\\n            deploymentStartDate,\\\\n            deploymentStartTime,\\\\n            deploymentEndDate,\\\\n            deploymentEndTime\\\\n        });\\\\n        \\\\n        if (eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && isDeploy && \\\\n            deploymentStartDate && deploymentStartTime && deploymentEndDate && deploymentEndTime) {\\\\n            \\\\n            console.log(\\\'Creating deployment tile...\\\');\\\\n            \\\\n            // Convert deployment time strings to hours\\\\n            const deployStartHour = parseTimeStringToHours(deploymentStartTime);\\\\n            const deployEndHour = parseTimeStringToHours(deploymentEndTime);\\\\n            \\\\n            // Calculate deployment duration in hours, accounting for multi-day deployments\\\\n            const startDate = new Date(deploymentStartDate);\\\\n            const endDate = new Date(deploymentEndDate);\\\\n            \\\\n            // Calculate the number of days between start and end dates\\\\n            const daysDifference = Math.floor((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\\\\n            \\\\n            // Calculate total duration including multiple days\\\\n            let deployDuration = (daysDifference * 24) + (deployEndHour - deployStartHour);\\\\n            \\\\n            // If duration is negative or zero, something is wrong with the dates/times\\\\n            if (deployDuration <= 0) {\\\\n                deployDuration = 1; // Default to 1 hour minimum\\\\n            }\\\\n            \\\\n            // Create multiple deployment tiles based on aircraft count\\\\n            console.log(`Creating ${deploymentAircraftCount} deployment tiles...`);\\\\n            \\\\n            for (let i = 0; i < deploymentAircraftCount; i++) {\\\\n                const deploymentTile: ScheduleEvent = {\\\\n                    id: `deployment-${event.id}-${i}-${Date.now()}`,\\\\n                    date: deploymentStartDate,\\\\n                    type: \\\'deployment\\\',\\\\n                    startTime: deployStartHour,\\\\n                    duration: deployDuration,\\\\n                    resourceId: \\\'Deployed\\\', // Will be reassigned by findAvailableResourceId\\\\n                    color: \\\'bg-gray-600/30\\\', // Base color, styling handled in FlightTile\\\\n                    flightNumber: \\\'DEPLOYMENT\\\',\\\\n                    flightType: \\\'Dual\\\',\\\\n                    locationType: \\\'Land Away\\\',\\\\n                    origin: \\\'DEPLOY\\\',\\\\n                    destination: \\\'DEPLOY\\\',\\\\n                    instructor: \\\'\\\',\\\\n                    student: \\\'\\\',\\\\n                    pilot: \\\'\\\',\\\\n                    isDeploy: true,\\\\n                    deploymentStartDate: deploymentStartDate,\\\\n                    deploymentStartTime: deploymentStartTime,\\\\n                    deploymentEndDate: deploymentEndDate,\\\\n                    deploymentEndTime: deploymentEndTime,\\\\n                    deploymentAircraftCount: deploymentAircraftCount,\\\\n                };\\\\n                \\\\n                console.log(`Deployment tile ${i + 1} created:`, deploymentTile);\\\\n                eventsToSave.push(deploymentTile);\\\\n            }\\\\n        }\\\\n        \\\\n        console.log(\\\'Events to save:\\\', eventsToSave);\\\\n        onSave(eventsToSave);\\\\n    }\\\\n\\\\n    const timeOptions = useMemo(() => {\\\\n        const options = [];\\\\n        for (let h = 0; h < 24; h++) {\\\\n            for (let m = 0; m < 60; m += 5) {\\\\n                const totalHours = h + m / 60;\\\\n                const label = `${String(h).padStart(2, \\\'0\\\')}${String(m).padStart(2, \\\'0\\\')}`; // 24-hour format without colon\\\\n                options.push({ label, value: totalHours });\\\\n            }\\\\n        }\\\\n        return options;\\\\n    }, []);\\\\n\\\\n    const traineeObject = useMemo(() => {\\\\n        const traineeFullName = event.flightType === \\\'Dual\\\' ? event.student : event.pilot;\\\\n        if (!traineeFullName) return null;\\\\n        return traineesData.find(t => t.fullName === traineeFullName) || null;\\\\n    }, [event.flightType, event.student, event.pilot, traineesData]);\\\\n\\\\n    const handleSyllabusFocus = () => {\\\\n        if (isOracleContext && !crew[0]?.student && !crew[0]?.instructor) {\\\\n            setSyllabusSelectionError(true);\\\\n            setTimeout(() => setSyllabusSelectionError(false), 2000);\\\\n        }\\\\n    };\\\\n    \\\\n    const handleTraineeScoresClick = () => {\\\\n        if (traineeObject) {\\\\n            onNavigateToHateSheet(traineeObject);\\\\n            onClose();\\\\n        }\\\\n    };\\\\n\\\\n    const handleLmpClick = () => {\\\\n        onNavigateToSyllabus(event.flightNumber);\\\\n        onClose();\\\\n    };\\\\n\\\\n    const handlePt051Click = () => {\\\\n        if (traineeObject) {\\\\n            onOpenPt051(traineeObject);\\\\n            onClose();\\\\n        }\\\\n    };\\\\n    \\\\n    const handleAuthClick = () => {\\\\n        onOpenAuth(event);\\\\n    };\\\\n\\\\n    const handlePostFlightClick = () => {\\\\n        onOpenPostFlight(event);\\\\n    };\\\\n\\\\n    const handleCompleteClick = () => {\\\\n        // Check if this is a Mass Brief event\\\\n        if (event.flightNumber.includes(\\\'MB\\\') || event.flightNumber.includes(\\\' MB\\\')) {\\\\n            setShowMassBriefComplete(true);\\\\n        } else {\\\\n            // For regular ground events, mark as complete and close\\\\n            // This would typically update the event status in the system\\\\n            if (traineeObject) {\\\\n                alert(`Ground event \\\\"${event.flightNumber}\\\\" marked as complete for ${traineeObject.rank} ${traineeObject.name}`);\\\\n            } else {\\\\n                alert(`Ground event \\\\"${event.flightNumber}\\\\" marked as complete`);\\\\n            }\\\\n            onClose();\\\\n        }\\\\n    };\\\\n\\\\n    const handleMassBriefComplete = (confirmedTrainees: Trainee[]) => {\\\\n        console.log(\\\'Mass Brief completed for trainees:\\\', confirmedTrainees.map(t => t.fullName));\\\\n        \\\\n        const currentDate = new Date().toISOString().split(\\\'T\\\')[0];\\\\n        const instructor = event.instructor || \\\'System\\\';\\\\n        \\\\n        // Create PT051 assessments for each trainee\\\\n        if (onSavePT051Assessment) {\\\\n            confirmedTrainees.forEach(trainee => {\\\\n                const assessment = {\\\\n                    id: `${trainee.idNumber}_${event.id}_${currentDate}`,\\\\n                    traineeName: trainee.name,\\\\n                    traineeFullName: trainee.fullName || `${trainee.rank} ${trainee.name}`,\\\\n                    eventId: event.id,\\\\n                    flightNumber: event.flightNumber,\\\\n                    date: currentDate,\\\\n                    instructorName: instructor,\\\\n                    dcoResult: \\\'DCO\\\', // Check DCO box\\\\n                    overallGrade: \\\'No Grade\\\', // Set to \\\\"No Grade\\\\"\\\\n                    overallResult: null, // null for ground events\\\\n                    overallComments: `Ground event completed via Mass Brief completion on ${currentDate}`, // String format for compatibility\\\\n                    scores: [], // Empty scores array for ground events\\\\n                    isCompleted: true,\\\\n                    groundSchoolAssessment: {\\\\n                        isAssessment: false,\\\\n                        result: 0\\\\n                    }\\\\n                };\\\\n                \\\\n                console.log(\\\'Saving PT051 assessment for:\\\', trainee.fullName, assessment);\\\\n                onSavePT051Assessment(assessment);\\\\n            });\\\\n            console.log(\\\'PT051 assessments saved successfully\\\');\\\\n        } else {\\\\n            console.warn(\\\'onSavePT051Assessment callback is not defined!\\\');\\\\n        }\\\\n        \\\\n        // Show styled confirmation\\\\n        setCompletedTrainees(confirmedTrainees);\\\\n        setShowMassBriefConfirmation(true);\\\\n    };\\\\n\\\\n    \\\\n\\\\nconst renderCrewFields = (crewMember: CrewMember, index: number) => {\\\\n    const isSctForm = flightNumber === \\\'SCT FORM\\\';\\\\n    const isSctGeneric = flightNumber.startsWith(\\\'SCT\\\');\\\\n    \\\\n    const formationCallsign = isSctForm && formationType\\\\n        ? `${formationType}${index + 1}` \\\\n        : `Aircraft ${index + 1}`;\\\\n    \\\\n    // Determine if we should use staff-only instructors\\\\n    const useStaffOnly = eventCategory === \\\'lmp_currency\\\' || eventCategory === \\\'sct\\\' || eventCategory === \\\'staff_cat\\\' || eventCategory === \\\'twr_di\\\';\\\\n    \\\\n    // Determine if we should show Trainee/Group fields (only for LMP Event and LMP Currency)\\\\n    const showTraineeFields = eventCategory === \\\'lmp_event\\\' || eventCategory === \\\'lmp_currency\\\';\\\\n    \\\\n    // Determine if we should show Crew field (only for SCT and Staff CAT when Dual)\\\\n    const showCrewField = (eventCategory === \\\'sct\\\' || eventCategory === \\\'staff_cat\\\' || eventCategory === \\\'twr_di\\\') && crewMember.flightType === \\\'Dual\\\';\\\\n    \\\\n    return (\\\\n        <div key={index} className={`space-y-4 ${crew.length > 1 ? \\\'p-3 bg-gray-700/50 rounded-lg\\\' : \\\'\\\'}`}>\\\\n            {crew.length > 1 && <h4 className=\\\\"text-sm font-bold text-sky-400\\\\">{formationCallsign}</h4>}\\\\n\\\\n            <div>\\\\n                <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Dual/Solo</label>\\\\n                <select value={crewMember.flightType} onChange={e => handleCrewChange(index, \\\'flightType\\\', e.target.value)} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                    <option value=\\\\"Dual\\\\">Dual</option>\\\\n                    <option value=\\\\"Solo\\\\">Solo</option>\\\\n                </select>\\\\n            </div>\\\\n\\\\n            {crewMember.flightType === \\\'Dual\\\' ? (\\\\n                <>\\\\n                    {/* Instructor/Pilot Field - Staff only for certain categories */}\\\\n                    {useStaffOnly ? (\\\\n                        renderStaffInstructorDropdown(\\\\n                            // For SCT, use pilot field; for others, use instructor field\\\\n                            eventCategory === \\\'sct\\\' ? crewMember.pilot : crewMember.instructor,\\\\n                            (value) => handleCrewChange(index, eventCategory === \\\'sct\\\' ? \\\'pilot\\\' : \\\'instructor\\\', value),\\\\n                            (eventCategory === \\\'sct\\\' || eventCategory === \\\'staff_cat\\\' || eventCategory === \\\'twr_di\\\') ? \\\'Pilot\\\' : \\\'Instructor\\\',\\\\n                            isDeploy\\\\n                        )\\\\n                       ) : (\\\\n                           renderStaffInstructorDropdown(\\\\n                               crewMember.instructor,\\\\n                               (value) => handleCrewChange(index, \\\'instructor\\\', value),\\\\n                               \\\'Instructor\\\',\\\\n                               isDeploy\\\\n                           )\\\\n                       )}\\\\n                    \\\\n                    {/* Trainee/Group Fields - Only for LMP Event and LMP Currency */}\\\\n                    {showTraineeFields && (\\\\n                        <>\\\\n                            {renderTraineeDropdown(\\\\n                                crewMember.student,\\\\n                                (value) => handleCrewChange(index, \\\'student\\\', value),\\\\n                                isDeploy,\\\\n                                localHighlight === \\\'student\\\'\\\\n                            )}\\\\n\\\\n                            <div className=\\\\"flex items-center justify-center my-3\\\\">\\\\n                                <span className=\\\\"text-base font-bold text-gray-500\\\\">- OR -</span>\\\\n                            </div>\\\\n\\\\n                            <div className=\\\\"p-4 border border-gray-600 rounded bg-gray-700/30 relative\\\\" ref={groupInputRef}>\\\\n                                <div className=\\\\"flex justify-between items-center mb-2\\\\">\\\\n                                    <h4 className=\\\\"text-sm font-medium text-gray-300\\\\">Group</h4>\\\\n                                    {crewMember.groupTraineeIds?.length > 0 && (\\\\n                                        <span className=\\\\"text-xs text-sky-400 font-mono bg-gray-800 px-2 py-0.5 rounded-full border border-gray-600\\\\">\\\\n                                            {crewMember.groupTraineeIds.length} Selected\\\\n                                        </span>\\\\n                                    )}\\\\n                                </div>\\\\n                                \\\\n                                <button\\\\n                                    type=\\\\"button\\\\"\\\\n                                    onClick={() => setActiveGroupInput(activeGroupInput === index ? null : index)}\\\\n                                    disabled={isDeploy}\\\\n                                    className=\\\\"w-full py-2 px-4 bg-gray-700 hover:bg-gray-600 border border-gray-500 text-white rounded-md text-sm font-medium transition-colors flex items-center justify-center shadow-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed disabled:opacity-50\\\\"\\\\n                                >\\\\n                                    <svg xmlns=\\\\"http://www.w3.org/2000/svg\\\\" className=\\\\"h-4 w-4 mr-2 text-sky-400\\\\" viewBox=\\\\"0 0 20 20\\\\" fill=\\\\"currentColor\\\\">\\\\n                                        <path d=\\\\"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z\\\\" />\\\\n                                    </svg>\\\\n                                    Add Names\\\\n                                </button>\\\\n                                \\\\n                                {/* Group Selection Flyout */}\\\\n                                {activeGroupInput === index && (\\\\n                                    <div className=\\\\"absolute z-10 mt-1 w-full bg-gray-800 border border-gray-600 rounded-md shadow-xl max-h-60 overflow-y-auto left-0\\\\">\\\\n                                        {coursesStruct.map(course => {\\\\n                                            const courseTraineeIds = course.trainees.map(t => t.idNumber);\\\\n                                            const currentIds = new Set(crewMember.groupTraineeIds || []);\\\\n                                            const isAllSelected = courseTraineeIds.length > 0 && courseTraineeIds.every(id => currentIds.has(id));\\\\n\\\\n                                            return (\\\\n                                                <div key={course.name}>\\\\n                                                    <div className=\\\\"flex items-center px-3 py-2 bg-gray-900/80 font-bold text-gray-300 sticky top-0 z-10 border-b border-gray-700\\\\">\\\\n                                                        <input \\\\n                                                            type=\\\\"checkbox\\\\"\\\\n                                                            checked={isAllSelected}\\\\n                                                            onChange={() => handleToggleCourse(index, course.trainees)}\\\\n                                                            className=\\\\"h-4 w-4 accent-sky-500 bg-gray-600 border-gray-500 rounded mr-2 cursor-pointer\\\\"\\\\n                                                        />\\\\n                                                        <span className=\\\\"uppercase text-xs\\\\">{course.name}</span>\\\\n                                                    </div>\\\\n                                                    <div className=\\\\"bg-gray-800\\\\">\\\\n                                                        {course.trainees.map(trainee => {\\\\n                                                            const isSelected = currentIds.has(trainee.idNumber);\\\\n                                                            return (\\\\n                                                                <div \\\\n                                                                    key={trainee.idNumber}\\\\n                                                                    className=\\\\"flex items-center px-3 py-2 pl-8 hover:bg-gray-700 cursor-pointer transition-colors border-b border-gray-700/50 last:border-0\\\\"\\\\n                                                                    onClick={() => handleToggleTrainee(index, trainee.idNumber)}\\\\n                                                                >\\\\n                                                                    <input \\\\n                                                                        type=\\\\"checkbox\\\\" \\\\n                                                                        checked={isSelected} \\\\n                                                                        readOnly \\\\n                                                                        className=\\\\"h-4 w-4 accent-sky-500 bg-gray-600 border-gray-500 rounded mr-3 pointer-events-none\\\\"\\\\n                                                                    />\\\\n                                                                    <span className=\\\\"text-sm text-gray-300\\\\">{trainee.name}</span>\\\\n                                                                </div>\\\\n                                                            );\\\\n                                                        })}\\\\n                                                    </div>\\\\n                                                </div>\\\\n                                            );\\\\n                                        })}\\\\n                                    </div>\\\\n                                )}\\\\n                            </div>\\\\n                        </>\\\\n                    )}\\\\n                    \\\\n                    {/* Crew Field - Only for SCT and Staff CAT when Dual */}\\\\n                    {showCrewField && (\\\\n                        renderStaffInstructorDropdown(\\\\n                            crewMember.student,\\\\n                            (value) => handleCrewChange(index, \\\'student\\\', value),\\\\n                            \\\'Crew\\\',\\\\n                            isDeploy,\\\\n                            eventCategory === \\\'sct\\\' // Include PAX option for SCT events\\\\n                        )\\\\n                    )}\\\\n                </>\\\\n               ) : (\\\\n                   // Solo - Use staff dropdown for SCT and Staff CAT\\\\n                   useStaffOnly ? (\\\\n                       <div>\\\\n                           <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Pilot</label>\\\\n                           <select \\\\n                               value={crewMember.pilot} \\\\n                               onChange={e => handleCrewChange(index, \\\'pilot\\\', e.target.value)} \\\\n                               disabled={isDeploy}\\\\n                               className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed appearance-none cursor-pointer z-10\\\\"\\\\n                           >\\\\n                               <option value=\\\\"\\\\" disabled>Select pilot</option>\\\\n                               {staffInstructorsByUnit.sortedUnits.map(unit => (\\\\n                                   <optgroup key={unit} label={`\\\\u2500\\\\u2500\\\\u2500 ${unit} \\\\u2500\\\\u2500\\\\u2500`}>\\\\n                                       {staffInstructorsByUnit.grouped[unit]\\\\n                                           .filter(instructor => {\\\\n                                               // For formations, filter out pilots already assigned to other aircraft\\\\n                                               if (crew.length > 1) {\\\\n                                                   const alreadyAssignedPilots = crew\\\\n                                                       .filter((c, i) => i !== index) // Exclude current aircraft\\\\n                                                       .map(c => c.pilot)\\\\n                                                       .filter(p => p); // Remove empty values\\\\n                                                   return !alreadyAssignedPilots.includes(instructor.name);\\\\n                                               }\\\\n                                               return true;\\\\n                                           })\\\\n                                           .map(instructor => {\\\\n                                               const stats = personStats[instructor.name] || { rank: \\\'\\\' };\\\\n                                               const displayText = `${stats.rank} ${instructor.name}`;\\\\n                                               return (\\\\n                                                   <option key={instructor.name} value={instructor.name}>\\\\n                                                       {displayText}\\\\n                                                   </option>\\\\n                                               );\\\\n                                           })}\\\\n                                   </optgroup>\\\\n                               ))}\\\\n                           </select>\\\\n                       </div>\\\\n                   ) : (\\\\n                       <div>\\\\n                           <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Pilot</label>\\\\n                           <select value={crewMember.pilot} onChange={e => handleCrewChange(index, \\\'pilot\\\', e.target.value)} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                               <option value=\\\\"\\\\" disabled>Select pilot</option>\\\\n                               {traineeList\\\\n                                   .filter(name => {\\\\n                                       // For formations, filter out pilots already assigned to other aircraft\\\\n                                       if (crew.length > 1) {\\\\n                                           const alreadyAssignedPilots = crew\\\\n                                               .filter((c, i) => i !== index) // Exclude current aircraft\\\\n                                               .map(c => c.pilot)\\\\n                                               .filter(p => p); // Remove empty values\\\\n                                           return !alreadyAssignedPilots.includes(name);\\\\n                                       }\\\\n                                       return true;\\\\n                                   })\\\\n                                   .map(name => <option key={name} value={name}>{name}</option>)}\\\\n                           </select>\\\\n                       </div>\\\\n                   )\\\\n               )}\\\\n        </div>\\\\n    );\\\\n};    \\\\n    if (isVisualAdjustMode) {\\\\n        return (\\\\n            <VisualAdjustModal\\\\n                event={event}\\\\n                startTime={visualAdjustStartTime}\\\\n                endTime={visualAdjustEndTime}\\\\n                onContinue={handleVisualAdjustContinue}\\\\n                onClose={() => setIsVisualAdjustMode(false)}\\\\n            />\\\\n        );\\\\n    }\\\\n\\\\n    return (\\\\n        <>\\\\n            <div className=\\\\"fixed inset-0 bg-black/60 z-50 flex items-center justify-center\\\\" onClick={onClose}>\\\\n                <div className=\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl border border-gray-700 transform transition-all animate-fade-in flex flex-col h-[90vh]\\\\" onClick={e => e.stopPropagation()}>\\\\n                    <div className={`p-4 border-b border-gray-700 flex justify-between items-center ${event.color} flex-shrink-0`}>\\\\n                        <h2 className=\\\\"text-xl font-bold text-white\\\\">{modalTitle}</h2>\\\\n                        <div className=\\\\"flex items-center space-x-4\\\\">\\\\n                            {isEditing && eventType === \\\'flight\\\' && (\\\\n                                <label className=\\\\"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-black/20\\\\">\\\\n                                    <input\\\\n                                        type=\\\\"checkbox\\\\"\\\\n                                        checked={isDeploy}\\\\n                                        onChange={e => {\\\\n                                            const checked = e.target.checked;\\\\n                                            setIsDeploy(checked);\\\\n                                            if (checked) {\\\\n                                                setLocationType(\\\'Land Away\\\');\\\\n                                            }\\\\n                                        }}\\\\n                                        className=\\\\"h-5 w-5 accent-sky-500 bg-gray-600 rounded border-gray-500 focus:ring-sky-500\\\\"\\\\n                                    />\\\\n                                    <span className=\\\\"text-sm font-semibold text-white\\\\">Add Deployment</span>\\\\n                                </label>\\\\n                            )}\\\\n                            <button onClick={() => setShowCancelConfirm(true)} className=\\\\"px-4 py-1 text-sm font-semibold rounded-md btn-red-brushed\\\\" aria-label=\\\\"Delete Event\\\\">\\\\n                                Delete\\\\n                            </button>\\\\n                        </div>\\\\n                    </div>\\\\n\\\\n                    <div className=\\\\"flex-1 flex flex-row overflow-hidden\\\\">\\\\n                        {/* Main Content */}\\\\n                        <div className=\\\\"flex-1 overflow-y-auto p-6\\\\">\\\\n                            {isEditing ? (\\\\n                                <div className=\\\\"space-y-4\\\\">\\\\n                                       {/* Event Category Selector */}\\\\n                                       <div className=\\\\"mb-6\\\\">\\\\n                                           <label className=\\\\"block text-sm font-medium text-gray-400 mb-3\\\\">Event Category</label>\\\\n                                           <div className=\\\\"grid grid-cols-5 gap-3\\\\">\\\\n                                               <button\\\\n                                                   type=\\\\"button\\\\"\\\\n                                                   onClick={() => setEventCategory(\\\'lmp_event\\\')}\\\\n                                                   className={`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${\\\\n                                                       eventCategory === \\\'lmp_event\\\'\\\\n                                                           ? \\\'bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\'\\\\n                                                           : \\\'bg-gray-700 text-gray-300 hover:bg-gray-600\\\'\\\\n                                                   }`}\\\\n                                               >\\\\n                                                   LMP Event\\\\n                                               </button>\\\\n                                               <button\\\\n                                                   type=\\\\"button\\\\"\\\\n                                                   onClick={() => setEventCategory(\\\'lmp_currency\\\')}\\\\n                                                   className={`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${\\\\n                                                       eventCategory === \\\'lmp_currency\\\'\\\\n                                                           ? \\\'bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\'\\\\n                                                           : \\\'bg-gray-700 text-gray-300 hover:bg-gray-600\\\'\\\\n                                                   }`}\\\\n                                               >\\\\n                                                   LMP Currency\\\\n                                               </button>\\\\n                                               <button\\\\n                                                   type=\\\\"button\\\\"\\\\n                                                   onClick={() => setEventCategory(\\\'sct\\\')}\\\\n                                                   className={`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${\\\\n                                                       eventCategory === \\\'sct\\\'\\\\n                                                           ? \\\'bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\'\\\\n                                                           : \\\'bg-gray-700 text-gray-300 hover:bg-gray-600\\\'\\\\n                                                   }`}\\\\n                                               >\\\\n                                                   SCT\\\\n                                               </button>\\\\n                                               <button\\\\n                  ",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "                                                onFocus={handleSyllabusFocus}\\\\n                                                disabled={isDeploy || (isOracleContext && filteredSyllabusOptions.length === 0)}\\\\n                                                className={`mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed`}\\\\n                                            >\\\\n                                                <option value=\\\\"\\\\" disabled>\\\\n                                                    {isOracleContext ? \\\'Select a crew member first\\\' : \\\'Select an item\\\'}\\\\n                                                </option>\\\\n                                                {isAddingTile && <option value=\\\\"SCT FORM\\\\">SCT FORM</option>}\\\\n                                                {filteredSyllabusOptions.filter(item => item !== \\\'SCT FORM\\\').map(item => <option key={item} value={item}>{item}</option>)}\\\\n                                            </select>\\\\n                                            {syllabusSelectionError && (\\\\n                                                <div className=\\\\"absolute -bottom-6 left-0 text-xs text-red-400 animate-fade-in\\\\">Select a crew member first.</div>\\\\n                                            )}\\\\n                                        </div>\\\\n                                        {eventType === \\\'flight\\\' && (\\\\n                                        <>\\\\n                                        <div>\\\\n                                            <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Area</label>\\\\n                                            <select value={area} onChange={e => setArea(e.target.value)} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                                                {areas.map(a => <option key={a} value={a}>{a}</option>)}\\\\n                                            </select>\\\\n                                        </div>\\\\n                                        <div>\\\\n                                            <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Aircraft Number</label>\\\\n                                            <select value={aircraftNumber} onChange={e => setAircraftNumber(e.target.value)} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                                                {Array.from({ length: 49 }, (_, i) => String(i + 1).padStart(3, \\\'0\\\')).map(num => <option key={num} value={num}>{num}</option>)}\\\\n                                            </select>\\\\n                                        </div>\\\\n                                        </>\\\\n                                        )}\\\\n                                        <div>\\\\n                                            <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Start Time</label>\\\\n                                            <select \\\\n                                                value={startTime} \\\\n                                                onChange={e => {\\\\n                                                    setStartTime(parseFloat(e.target.value));\\\\n                                                    setLocalHighlight(null);\\\\n                                                }} \\\\n                                                disabled={isDeploy}\\\\n                                                className={`mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition-all duration-200 disabled:bg-gray-700/50 disabled:cursor-not-allowed ${localHighlight === \\\'startTime\\\' ? \\\'ring-2 ring-red-500\\\' : \\\'\\\'}`}\\\\n                                            >\\\\n                                                {timeOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\\\\n                                            </select>\\\\n                                        </div>\\\\n                                        <div>\\\\n                                            <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Duration</label>\\\\n                                            <input \\\\n                                                type=\\\\"number\\\\" \\\\n                                                step=\\\\"0.1\\\\" \\\\n                                                min=\\\\"0.1\\\\"\\\\n                                                value={duration} \\\\n                                                onChange={e => setDuration(e.target.value === \\\'\\\' ? \\\'\\\' : parseFloat(e.target.value))}\\\\n                                                disabled={isDeploy}\\\\n                                                className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\"\\\\n                                            />\\\\n                                        </div>\\\\n                                    </div>\\\\n        \\\\n                                    {eventType === \\\'flight\\\' && (\\\\n                                        <div>\\\\n                                            <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Location</label>\\\\n                                            <select\\\\n                                                value={locationType}\\\\n                                                onChange={e => setLocationType(e.target.value as \\\'Local\\\' | \\\'Land Away\\\')}\\\\n                                                disabled={isDeploy}\\\\n                                                className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\"\\\\n                                            >\\\\n                                                <option value=\\\\"Local\\\\">Local</option>\\\\n                                                <option value=\\\\"Land Away\\\\">Land Away</option>\\\\n                                            </select>\\\\n                                        </div>\\\\n                                    )}\\\\n                                    {eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && !isDeploy && (\\\\n                                        <div className=\\\\"flex items-center gap-4\\\\">\\\\n                                            <div className=\\\\"flex-1\\\\">\\\\n                                                <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Origin</label>\\\\n                                                <input\\\\n                                                    type=\\\\"text\\\\"\\\\n                                                    value={origin}\\\\n                                                    onChange={e => setOrigin(e.target.value.toUpperCase())}\\\\n                                                    maxLength={3}\\\\n                                                    placeholder=\\\\"e.g. ESL\\\\"\\\\n                                                    className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"\\\\n                                                />\\\\n                                            </div>\\\\n                                            <div className=\\\\"flex-1\\\\">\\\\n                                                <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Destination</label>\\\\n                                                <input\\\\n                                                    type=\\\\"text\\\\"\\\\n                                                    value={destination}\\\\n                                                    onChange={e => setDestination(e.target.value.toUpperCase())}\\\\n                                                    maxLength={3}\\\\n                                                    placeholder=\\\\"e.g. PEA\\\\"\\\\n                                                    className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"\\\\n                                                />\\\\n                                            </div>\\\\n                                        </div>\\\\n                                    )}\\\\n\\\\n                                    {eventType === \\\'flight\\\' && locationType === \\\'Land Away\\\' && (\\\\n                                        <>\\\\n                                            <fieldset className=\\\\"p-4 border border-gray-600 rounded-lg mb-4\\\\">\\\\n                                                <legend className=\\\\"px-2 text-sm font-semibold text-gray-300\\\\">Deployment Period</legend>\\\\n                                                <div className=\\\\"mt-2 grid grid-cols-4 gap-2 bg-gray-700/30 p-3 rounded-lg\\\\">\\\\n                                                    <div>\\\\n                                                        <label className=\\\\"block text-xs font-medium text-gray-400\\\\">Start Time</label>\\\\n                                                        <input type=\\\\"text\\\\" value={deploymentStartTime} onChange={e => {\\\\n                                                            // Remove colon and ensure 24-hour format\\\\n                                                            const value = e.target.value.replace(/:/g, \\\'\\\').replace(/\\\\\\\\D/g, \\\'\\\').slice(0, 4);\\\\n                                                            setDeploymentStartTime(value);\\\\n                                                        }} placeholder=\\\\"0800\\\\" className=\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"/>\\\\n                                                    </div>\\\\n                                                    <div>\\\\n                                                        <label className=\\\\"block text-xs font-medium text-gray-400\\\\">Start Date</label>\\\\n                                                        <input type=\\\\"date\\\\" value={deploymentStartDate} onChange={e => setDeploymentStartDate(e.target.value)} style={{colorScheme: \\\'dark\\\'}} className=\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm\\\\"/>\\\\n                                                    </div>\\\\n                                                    <div>\\\\n                                                        <label className=\\\\"block text-xs font-medium text-gray-400\\\\">End Time</label>\\\\n                                                        <input type=\\\\"text\\\\" value={deploymentEndTime} onChange={e => {\\\\n                                                            // Remove colon and ensure 24-hour format\\\\n                                                            const value = e.target.value.replace(/:/g, \\\'\\\').replace(/\\\\\\\\D/g, \\\'\\\').slice(0, 4);\\\\n                                                            setDeploymentEndTime(value);\\\\n                                                        }} placeholder=\\\\"1700\\\\" className=\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"/>\\\\n                                                    </div>\\\\n                                                    <div>\\\\n                                                        <label className=\\\\"block text-xs font-medium text-gray-400\\\\">End Date</label>\\\\n                                                        <input type=\\\\"date\\\\" value={deploymentEndDate} onChange={e => setDeploymentEndDate(e.target.value)} style={{colorScheme: \\\'dark\\\'}} className=\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm\\\\"/>\\\\n                                                    </div>\\\\n                                                </div>\\\\n                                                   <div className=\\\\"mt-2 bg-gray-700/30 p-3 rounded-lg\\\\">\\\\n                                                       <label className=\\\\"block text-xs font-medium text-gray-400 mb-1\\\\">Number of Aircraft</label>\\\\n                                                       <input \\\\n                                                           type=\\\\"number\\\\" \\\\n                                                           min=\\\\"1\\\\" \\\\n                                                           max=\\\\"20\\\\" \\\\n                                                           value={deploymentAircraftCount} \\\\n                                                           onChange={e => setDeploymentAircraftCount(parseInt(e.target.value) || 1)} \\\\n                                                           className=\\\\"w-24 bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"\\\\n                                                       />\\\\n                                                       <span className=\\\\"ml-2 text-xs text-gray-500\\\\">aircraft deploying</span>\\\\n                                                   </div>\\\\n                                            </fieldset>\\\\n\\\\n                                        </>\\\\n                                    )}\\\\n        \\\\n                                    {flightNumber === \\\'SCT FORM\\\' && (\\\\n                                        <div className=\\\\"p-3 bg-gray-900/50 rounded-lg space-y-4\\\\">\\\\n                                            <h3 className=\\\\"font-semibold text-gray-300\\\\">Formation Details</h3>\\\\n                                            <div className=\\\\"grid grid-cols-2 gap-4\\\\">\\\\n                                                <div>\\\\n                                                    <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Formation Callsign</label>\\\\n                                                    <select value={formationType} onChange={e => setFormationType(e.target.value)} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                                                           {filteredCallsigns ? (\\\\n                                                               filteredCallsigns.map(cs => (\\\\n                                                                   <option key={cs.code} value={cs.code}>\\\\n                                                                       {cs.name} ({cs.code}) - {cs.unit}\\\\n                                                                   </option>\\\\n                                                               ))\\\\n                                                           ) : (\\\\n                                                               formationTypes.map(type => <option key={type} value={type}>{type}</option>)\\\\n                                                           )}\\\\n                                                    </select>\\\\n                                                </div>\\\\n                                                <div>\\\\n                                                    <label className=\\\\"block text-sm font-medium text-gray-400\\\\">Aircraft Count</label>\\\\n                                                    <select value={aircraftCount} onChange={e => setAircraftCount(parseInt(e.target.value))} disabled={isDeploy} className=\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\">\\\\n                                                        {Array.from({length: 7}, (_, i) => i + 2).map(n => <option key={n} value={n}>{n}</option>)}\\\\n                                                    </select>\\\\n                                                </div>\\\\n                                            </div>\\\\n                                        </div>\\\\n                                    )}\\\\n                                    <div className=\\\\"space-y-4\\\\">{crew.map(renderCrewFields)}</div>\\\\n                                    \\\\n                                    {/* Add to Deployment Section */}\\\\n                                    {(eventType === \\\'flight\\\' || eventType === \\\'ftd\\\' || eventType === \\\'cpt\\\') && (\\\\n                                        <div className=\\\\"border-t border-gray-600 pt-6 mt-6\\\\">\\\\n                                            <h3 className=\\\\"text-lg font-semibold text-white mb-4\\\\">Add to Deployment</h3>\\\\n                                            <div className=\\\\"space-y-3\\\\">\\\\n                                                {getCurrentDeployments().length > 0 ? (\\\\n                                                    getCurrentDeployments().map(deployment => (\\\\n                                                        <label key={deployment.id} className=\\\\"flex items-center space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded\\\\">\\\\n                                                            <input\\\\n                                                                type=\\\\"checkbox\\\\"\\\\n                                                                checked={selectedDeploymentId === deployment.id}\\\\n                                                                onChange={(e) => {\\\\n                                                                    if (e.target.checked) {\\\\n                                                                        setSelectedDeploymentId(deployment.id);\\\\n                                                                    } else {\\\\n                                                                        setSelectedDeploymentId(\\\'\\\');\\\\n                                                                    }\\\\n                                                                }}\\\\n                                                                className=\\\\"h-4 w-4 text-sky-600 bg-gray-700 border-gray-600 rounded focus:ring-sky-500\\\\"\\\\n                                                            />\\\\n                                                            <span className=\\\\"text-sm text-gray-300\\\\">\\\\n                                                                {formatDeploymentTitle(deployment)}\\\\n                                                            </span>\\\\n                                                            <span className=\\\\"text-xs text-gray-500 ml-2\\\\">\\\\n                                                                ({deployment.resourceId})\\\\n                                                            </span>\\\\n                                                        </label>\\\\n                                                    ))\\\\n                                                ) : (\\\\n                                                    <p className=\\\\"text-sm text-gray-500 italic\\\\">\\\\n                                                        No deployments available for this event type\\\\n                                                    </p>\\\\n                                                )}\\\\n                                            </div>\\\\n                                        </div>\\\\n                                    )}\\\\n                                </div>\\\\n                            ) : (\\\\n                                <div className=\\\\"text-gray-300 space-y-2\\\\">\\\\n                                    <p><strong>Syllabus Item:</strong> {event.flightNumber}</p>\\\\n                                    {event.type === \\\'flight\\\' && <p><strong>Route:</strong> {event.origin}-{event.destination}</p>}\\\\n                                    {event.type === \\\'flight\\\' && event.area && <p><strong>Area:</strong> {event.area}</p>}\\\\n                                    <p><strong>Dual/Solo:</strong> <span className=\\\\"font-semibold\\\\">{event.flightType}</span></p>\\\\n                                    {event.flightType === \\\'Dual\\\' ? (\\\\n                                        <>\\\\n                                            {event.eventCategory === \\\'sct\\\' ? (\\\\n                                                <p><strong>Instructor:</strong> {event.instructor || event.pilot}</p>\\\\n                                            ) : (\\\\n                                                <p><strong>Instructor:</strong> {event.instructor}</p>\\\\n                                            )}\\\\n                                            {(event.type === \\\'ground\\\' && event.attendees && event.attendees.length > 0) ? (\\\\n                                                <div>\\\\n                                                    <p><strong>Attendees ({event.attendees.length}):</strong></p>\\\\n                                                    <div className=\\\\"mt-1 bg-gray-700/50 p-2 rounded-md max-h-32 overflow-y-auto\\\\">\\\\n                                                        <ul className=\\\\"space-y-1\\\\">\\\\n                                                            {event.attendees.map(attendee => (\\\\n                                                                <li key={attendee} className=\\\\"text-sm text-gray-300\\\\">{attendee.split(\\\' \\\\u2013 \\\')[0]}</li>\\\\n                                                            ))}\\\\n                                                        </ul>\\\\n                                                    </div>\\\\n                                                </div>\\\\n                                            ) : event.eventCategory === \\\'sct\\\' ? null : (\\\\n                                                <p><strong>Student:</strong> {event.student || event.group}</p>\\\\n                                            )}\\\\n                                        </>\\\\n                                    ) : <p><strong>Pilot:</strong> {event.pilot}</p>}\\\\n                                    <p><strong>Duration:</strong> {event.duration.toFixed(1)} hours</p>\\\\n                                    <p><strong>Start Time:</strong> {Math.floor(event.startTime)}:{String(Math.round((event.startTime % 1) * 60)).padStart(2, \\\'0\\\')}</p>\\\\n                                </div>\\\\n                            )}\\\\n                        </div>\\\\n                        \\\\n                        {/* Button Panel */}\\\\n                        <div className=\\\\"w-56 flex-shrink-0 border-l border-gray-700 bg-gray-800/50 p-4 flex flex-col space-y-3\\\\">\\\\n                            {!isEditing && (\\\\n                                <>\\\\n                                    <div className=\\\\"p-3 border border-gray-600 rounded-lg text-center\\\\">\\\\n                                        <label className=\\\\"block text-sm font-semibold text-gray-400\\\\">Conflict?</label>\\\\n                                        {isConflict ? (\\\\n                                            <p className=\\\\"text-2xl font-bold text-red-500\\\\">YES</p>\\\\n                                        ) : (\\\\n                                            <p className=\\\\"text-2xl font-bold text-green-500\\\\">NO</p>\\\\n                                        )}\\\\n                                    </div>\\\\n                                    <button\\\\n                                        onClick={() => onNeoClick(event)}\\\\n                                        className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-orange-brushed\\\\"\\\\n                                    >\\\\n                                        NEO\\\\n                                    </button>\\\\n                                    <button\\\\n                                        onClick={handleTraineeScoresClick}\\\\n                                        disabled={!traineeObject}\\\\n                                        className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-aluminium-brushed disabled:opacity-50 disabled:cursor-not-allowed\\\\"\\\\n                                    >\\\\n                                        Trainee Scores\\\\n                                    </button>\\\\n                                    <button\\\\n                                        onClick={handleLmpClick}\\\\n                                        className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-aluminium-brushed\\\\"\\\\n                                    >\\\\n                                        LMP\\\\n                                    </button>\\\\n                                    {event.type === \\\'flight\\\' && (\\\\n                                        <button onClick={handleAuthClick} className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-aluminium-brushed\\\\">\\\\n                                            Auth\\\\n                                        </button>\\\\n                                    )}\\\\n                                    {((traineeObject && event.type === \\\'ground\\\') || (event.flightNumber.includes(\\\'MB\\\') || event.flightNumber.includes(\\\' MB\\\'))) && (\\\\n                                        <button\\\\n                                            onClick={handleCompleteClick}\\\\n                                            className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-aluminium-brushed\\\\"\\\\n                                        >\\\\n                                            Complete\\\\n                                        </button>\\\\n                                    )}\\\\n                                    {traineeObject && (\\\\n                                        <button\\\\n                                            onClick={handlePt051Click}\\\\n                                            className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-aluminium-brushed\\\\"\\\\n                                        >\\\\n                                            PT-051\\\\n                                        </button>\\\\n                                    )}\\\\n                                    {event.type === \\\'flight\\\' && (\\\\n                                        <button onClick={handlePostFlightClick} className=\\\\"w-full px-4 py-2 rounded-md text-sm font-semibold shadow-md text-center btn-shape-fill\\\\">\\\\n                                            Post Flight\\\\n                                        </button>\\\\n                                    )}\\\\n                                </>\\\\n                            )}\\\\n                            <div className=\\\\"flex-grow\\\\" /> {/* Spacer */}\\\\n                            {isEditing ? (\\\\n                                   <>\\\\n                                <button onClick={handleSave} className=\\\\"w-full px-4 py-2 text-white rounded-md transition-colors text-sm font-semibold shadow-md text-center bg-sky-600 hover:bg-sky-700 disabled:bg-gray-500 disabled:cursor-not-allowed\\\\">Save</button>\\\\n                                       <button onClick={handleVisualAdjust} className=\\\\"w-full px-4 py-2 text-white rounded-md transition-colors text-sm font-semibold shadow-md text-center bg-purple-600 hover:bg-purple-700\\\\">Visual Adjust</button>\\\\n                                   </>\\\\n                            ) : (\\\\n                                <button onClick={() => setIsEditing(true)} className=\\\\"w-full px-4 py-2 text-white rounded-md transition-colors text-sm font-semibold shadow-md text-center bg-gray-600 hover:bg-gray-700\\\\">Edit</button>\\\\n                            )}\\\\n                        </div>\\\\n                    </div>\\\\n                    \\\\n                    <div className=\\\\"px-6 py-4 bg-gray-800/50 border-t border-gray-700 flex justify-end flex-shrink-0\\\\">\\\\n                        <button onClick={onClose} className=\\\\"px-4 py-2 bg-transparent border border-gray-600 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white transition-colors text-sm\\\\">Close</button>\\\\n                    </div>\\\\n                </div>\\\\n            </div>\\\\n            {showCancelConfirm && (\\\\n                <CancelEventFlyout \\\\n                    eventId={event.id}\\\\n                    eventType={event.type === \\\'ftd\\\' ? \\\'ftd\\\' : \\\'flight\\\'}\\\\n                    onConfirm={(eventId, cancellationCode, manualCodeEntry) => {\\\\n                        if (onCancelEvent) {\\\\n                            onCancelEvent(eventId, cancellationCode, manualCodeEntry);\\\\n                        } else {\\\\n                            // Fallback to old delete behavior if onCancelEvent not provided\\\\n                            onDeleteRequest();\\\\n                        }\\\\n                        setShowCancelConfirm(false);\\\\n                    }}\\\\n                    onClose={() => setShowCancelConfirm(false)}\\\\n                    cancellationCodes={cancellationCodes}\\\\n                />\\\\n            )}\\\\n            {showMassBriefComplete && (\\\\n                <MassBriefCompleteFlyout\\\\n                    isOpen={showMassBriefComplete}\\\\n                    onClose={() => setShowMassBriefComplete(false)}\\\\n                    event={event}\\\\n                    trainees={\\\\n                        (() => {\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Processing trainees for MassBriefCompleteFlyout\\\');\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event:\\\', event);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event.attendees:\\\', event.attendees);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event.group:\\\', event.group);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event.selectedTrainees:\\\', event.selectedTrainees);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event.trainees:\\\', event.trainees);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Event keys:\\\', Object.keys(event));\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Available trainees (strings):\\\', trainees);\\\\n                            console.log(\\\'\\\\ud83d\\\\udd0d Available traineesData (objects):\\\', traineesData);\\\\n                            \\\\n                            // First try attendees array\\\\n                            if (event.attendees) {\\\\n                                console.log(\\\'\\\\ud83d\\\\udd0d Processing attendees array\\\');\\\\n                                const processedAttendees = event.attendees.map((attendeeName, index) => {\\\\n                                    console.log(`\\\\ud83d\\\\udd0d Processing attendee ${index}: \\\\"${attendeeName}\\\\"`);\\\\n                                    \\\\n                                    // Find the trainee object from the traineesData list\\\\n                                    const trainee = traineesData.find(t => {\\\\n                                        const fullName = `${t.rank} ${t.name}`;\\\\n                                        console.log(`\\\\ud83d\\\\udd0d Comparing \\\\"${fullName}\\\\" with \\\\"${attendeeName.split(\\\' \\\\u2013 \\\')[0]}\\\\"`);\\\\n                                        return fullName === attendeeName.split(\\\' \\\\u2013 \\\')[0];\\\\n                                    });\\\\n                                    \\\\n                                    if (trainee) {\\\\n                                        console.log(\\\'\\\\ud83d\\\\udd0d Found matching trainee:\\\', trainee);\\\\n                                        return trainee;\\\\n                                    } else {\\\\n                                        console.log(\\\'\\\\ud83d\\\\udd0d Creating fallback trainee object\\\');\\\\n                                        const nameParts = attendeeName.split(\\\' \\\\u2013 \\\');\\\\n                                        const fullName = nameParts[0];\\\\n                                        const course = nameParts[1] || \\\'\\\';\\\\n                                        \\\\n                                        // Parse \\\\"Last, First\\\\" format\\\\n                                        let rank = \\\'\\\';\\\\n                                        let name = fullName;\\\\n                                        const commaIndex = fullName.indexOf(\\\',\\\');\\\\n                                        if (commaIndex !== -1) {\\\\n                                            const lastName = fullName.substring(0, commaIndex).trim();\\\\n                                            const firstName = fullName.substring(commaIndex + 1).trim();\\\\n                                            name = `${firstName} ${lastName}`;\\\\n                                        } else {\\\\n                                            // Try \\\\"Rank Last First\\\\" format\\\\n                                            const parts = fullName.trim().split(\\\' \\\');\\\\n                                            if (parts.length >= 2) {\\\\n                                                rank = parts[0];\\\\n                                                name = parts.slice(1).join(\\\' \\\');\\\\n                                            }\\\\n                                        }\\\\n                                        \\\\n                                        const fallbackTrainee = {\\\\n                                            idNumber: 0,\\\\n                                            fullName: fullName,\\\\n                                            name: name,\\\\n                                            rank: rank,\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "                                                            </span>\\\\n                                                        </label>\\\\n                                                    ))\\\\n                                                ) : (\\\\n                                                    <p className=\\\\"text-sm text-gray-500 italic\\\\">\\\\n                                                        No deployments available for this event type\\\\n                                                    </p>\\\\n                                                )}\\\\n                                            </div>\\\\n                                        </div>\\\\n                                    )}\\\\n                                </div>\\\\n                            ) : (\\\\n                                <div className=\\\\"text-gray-300 space-y-2\\\\">\\\\n                                    <p><strong>Syllabus Item:</strong> {event.flightNumber}</p>\\\\n                                    {event.type === \\\'flight\\\' && <p><strong>Route:</strong> {event.origin}-{event.destination}</p>}\\\\n                                    {event.type === \\\'flight\\\' && event.area && <p><strong>Area:</strong> {event.area}</p>}\\\\n                                    <p><strong>Dual/Solo:</strong> <span className=\\\\"font-semibold\\\\">{event.flightType}</span></p>\\\\n                                    {event.flightType === \\\'Dual\\\' ? (\\\\n                                        <>\\\\n                                            {event.eventCategory === \\\'sct\\\' ? (\\\\n                                                <p><strong>Instructor:</strong> {event.instructor || event.pilot}</p>\\\\n                                            ) : (\\\\n                                                <p><strong>Instructor:</strong> {event.instructor}</p>\\\\n                                            )}\\\\n                                            {(event.type === \\\'ground\\\' && event.attendees && event.attendees.length > 0) ? (\\\\n                                                <div>\\\\n                                                    <p><strong>Attendees ({event.attendees.length}):</strong></p>\\\\n                                                    <div className=\\\\"mt-1 bg-gray-700/50 p-2 rounded-md max-h-32 overflow-y-auto\\\\">\\\\n                                                        <ul className=\\\\"space-y-1\\\\">\\\\n                                                            {event.attendees.map(attendee => (\\\\n                                                                <li key={attendee} className=\\\\"text-sm text-gray-300\\\\">{attendee.split(\\\' \\\\u2013 \\\')[0]}</li>\\\\n                                                            ))}\\\\n                                                        </ul>\\\\n                                                    </div>\\\\n                                                </div>\\\\n                                            ) : event.eventCategory === \\\'sct\\\' ? null : (\\\\n                                                <p><strong>Student:</strong> {event.student || event.group}</p>\\\\n                                            )}\\\\n                                        </>\\\\n                                    ) : <p><strong>Pilot:</strong> {event.pilot}</p>}\\\\n                                    <p><strong>Duration:</strong> {event.duration.toFixed(1)} hours</p>\\\\n                                    <p><strong>Start Time:</strong> {Math.floor(event.startTime)}:{String(Math.round((event.startTime % 1) * 60)).padStart(2, \\\'0\\\')}</p>\\\\n                                </div>\\\\n                            )}\\\\n                        </div>\\\\n                        \\\\n                        {/* Button Panel */}\\\\n                        <div className=\\\\"w-56 flex-shrink-0 border-l border-gray-700 bg-gray-800/50 p-4 flex flex-col space-y-3\\\\">\\\\n                            {!isEditing && (\\\\n                                <>\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "total 20\\\\ndrwxr-xr-x 5 root root 4096 Jan  4 05:33 .\\\\ndrwxr-xr-x 7 root root 4096 Jan  4 05:33 ..\\\\ndrwxr-xr-x 4 root root 4096 Jan  4 05:33 chunks\\\\ndrwxr-xr-x 2 root root 4096 Jan  4 05:33 css\\\\ndrwxr-xr-x 2 root root 4096 Jan  4 05:33 purple-fix-1767504792915\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "PIC, flightType set to Solo`))}},[Pt,yn]=C.useState(n.locationType||\\\\"Local\\\\"),[Tt,lt]=C.useState(n.origin||m),[Et,Bt]=C.useState(n.destination||m),[Kt,Mt]=C.useState(n.formationType||\\\\"\\\\"),[Ve,qt]=C.useState(n.isDeploy||!1),[Mn,jn]=C.useState(\\\\"\\\\"),[je,$e]=C.useState(n.deploymentStartDate||n.date),[Ye,Dt]=C.useState(n.deploymentStartTime||\\\\"\\\\"),[St,hn]=C.useState(n.deploymentEndDate||n.date),[Ce,At]=C.useState(n.deploymentEndTime||\\\\"\\\\"),[B,Ae]=C.useState(n.deploymentAircraftCount||1),[rt,yt]=C.useState(null),et=C.useRef(null),[$t,pn]=C.useState(!1),kn=!!ne,ts=(ne==null?void 0:ne.availableInstructors)||l,un=ne?ne.availableTraineesAnalysis.map(ke=>ke.trainee.fullName):d,[Nn,os]=C.useState(kn?[]:u),ss=C.useMemo(()=>{let ke=[];return _e===\\\\"sct\\\\"?ke=U:_e===\\\\"lmp_event\\\\"||_e===\\\\"lmp_currency\\\\"?ke=f.filter(mt=>mt.lmpType===\\\\"Master LMP\\\\"||!mt.lmpType).map(mt=>mt.id):_e===\\\\"staff_cat\\\\"?ke=f.filter(mt=>mt.lmpType===\\\\"Staff CAT\\\\").map(mt=>mt.id):_e===\\\\"twr_di\\\\"?ke=f.map(mt=>mt.id):ke=Nn,Q&&!ke.includes(\\\\"SCT FORM\\\\")&&(ke=[...ke,\\\\"SCT FORM\\\\"]),ke},[_e,U,f,Nn,Q]),Hn=C.useMemo(()=>{const ke=new Set(v.map(Cn=>Cn.fullName)),Yt=ts.filter(Cn=>!ke.has(Cn)).map(Cn=>{const Vn=x.find(xn=>xn.name===Cn);return{name:Cn,unit:(Vn==null?void 0:Vn.unit)||\\\\"Unknown\\\\",rank:(Vn==null?void 0:Vn.rank)||\\\\"FLGOFF\\\\"}}).reduce((Cn,Vn)=>(Cn[Vn.unit]||(Cn[Vn.unit]=[]),Cn[Vn.unit].push(Vn),Cn),{}),an=[\\\\"WGCDR\\\\",\\\\"SQNLDR\\\\",\\\\"FLTLT\\\\",\\\\"FLGOFF\\\\",\\\\"PLTOFF\\\\"],en=Object.keys(Yt).sort((Cn,Vn)=>{const xn=Math.min(...Yt[Cn].map(Es=>an.indexOf(Es.rank))),ls=Math.min(...Yt[Vn].map(Es=>an.indexOf(Es.rank)));return xn-ls});return{grouped:Yt,sortedUnits:en}},[ts,v,x]),Jn=C.useMemo(()=>{const mt=un.map(Yt=>{const an=v.find(en=>en.name===Yt||en.fullName===Yt);return{name:Yt,course:(an==null?void 0:an.course)||\\\\"Unknown\\\\"}}).reduce((Yt,an)=>(Yt[an.course]||(Yt[an.course]=[]),Yt[an.course].push(an),Yt),{}),nn=Object.keys(mt).sort();return{grouped:mt,sortedCourses:nn}},[un,v]),zn=C.useMemo(()=>{const ke={};return[...ts,...un].forEach(mt=>{const nn=x.find(an=>an.name===mt),Yt=v.find(an=>an.name===mt||an.fullName===mt);ke[mt]={name:mt,rank:(nn==null?void 0:nn.rank)||(Yt==null?void 0:Yt.rank)||\\\\"\\\\",flightCount:0,ftdCount:0,cptCount:0,groundCount:0,startTime:\\\\"\\\\"}}),D.forEach(mt=>{var Yt,an;if((Yt=mt.resourceId)!=null&&Yt.startsWith(\\\\"STBY\\\\")||(an=mt.resourceId)!=null&&an.startsWith(\\\\"BNF-STBY\\\\")||mt.type===\\\\"deployment\\\\")return;const nn=new Set;mt.instructor&&nn.add(mt.instructor),mt.student&&nn.add(mt.student),mt.groupTraineeIds&&mt.groupTraineeIds.length>0&&mt.groupTraineeIds.forEach(en=>{const Cn=v.find(Vn=>Vn.idNumber===en);Cn&&nn.add(Cn.name)}),nn.forEach(en=>{if(ke[en]){mt.type===\\\\"flight\\\\"?ke[en].flightCount++:mt.type===\\\\"ftd\\\\"?ke[en].ftdCount++:mt.type===\\\\"cpt\\\\"?ke[en].cptCount++:mt.type===\\\\"ground\\\\"&&ke[en].groundCount++;const Cn=f.find(ls=>ls.id===mt.flightNumber),Vn=(Cn==null?void 0:Cn.preFlightTime)||0,xn=mt.startTime-Vn;if(!ke[en].startTime||xn<parseFloat(ke[en].startTime.replace(\\\\":\\\\",\\\\".\\\\"))){const ls=Math.floor(xn),Es=Math.round(xn%1*60);ke[en].startTime=`${String(ls).padStart(2,\\\\"0\\\\")}${String(Es).padStart(2,\\\\"0\\\\")}`}}})}),ke},[D,ts,un,x,v,f]),Fn=(ke,mt,nn=\\\\"Instructor\\\\",Yt=!1,an=!1)=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:nn}),e.jsxs(\\\\"select\\\\",{value:ke,onChange:en=>mt(en.target.value),disabled:Yt,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed appearance-none cursor-pointer z-10 \\\\",children:[e.jsxs(\\\\"option\\\\",{value:\\\\"\\\\",disabled:!0,children:[\\\\"Select \\\\",nn.toLowerCase()]}),Hn.sortedUnits.map(en=>e.jsx(\\\\"optgroup\\\\",{label:`\\\\u2500\\\\u2500\\\\u2500 ${en} \\\\u2500\\\\u2500\\\\u2500`,children:Hn.grouped[en].map(Cn=>{const xn=`${(zn[Cn.name]||{rank:\\\\"\\\\"}).rank} ${Cn.name}`;return e.jsx(\\\\"option\\\\",{value:Cn.name,children:xn},Cn.name)})},en)),an&&e.jsx(\\\\"optgroup\\\\",{label:\\\\"\\\\u2500\\\\u2500\\\\u2500 Other \\\\u2500\\\\u2500\\\\u2500\\\\",children:e.jsx(\\\\"option\\\\",{value:\\\\"PAX\\\\",children:\\\\"PAX\\\\"})})]})]}),Rn=(ke,mt,nn=!1,Yt=!1)=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Trainee\\\\"}),e.jsxs(\\\\"select\\\\",{value:ke,onChange:an=>mt(an.target.value),disabled:nn,className:`mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition-all duration-200 disabled:bg-gray-700/50 disabled:cursor-not-allowed ${Yt?\\\\"ring-2 ring-red-500\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"option\\\\",{value:\\\\"\\\\",disabled:!0,children:\\\\"Select a trainee\\\\"}),Jn.sortedCourses.map(an=>e.jsx(\\\\"optgroup\\\\",{label:`\\\\u2500\\\\u2500\\\\u2500 ${an} \\\\u2500\\\\u2500\\\\u2500`,children:Jn.grouped[an].map(en=>{const Cn=v.find(ls=>ls.name===en.name||ls.fullName===en.name),xn=`${(zn[en.name]||{rank:\\\\"\\\\"}).rank} ${(Cn==null?void 0:Cn.name)||en.name}`;return e.jsx(\\\\"option\\\\",{value:en.name,children:xn},en.name)})},an))]})]});C.useEffect(()=>{var ke,mt;if(Q&&Fe&&be[0]){const nn=((ke=be[0])==null?void 0:ke.student)||((mt=be[0])==null?void 0:mt.pilot);if(nn&&W){const Yt=ot(Fe,nn);be[0].flightType!==Yt&&(Ze(an=>{const en=[...an];return en.length>0&&(en[0]={...en[0],flightType:Yt}),en}),console.log(`\\\\ud83c\\\\udfaf [Auto Dual/Solo] Set to ${Yt} from Individual LMP for ${nn}`))}}},[Q,Fe,W]),C.useEffect(()=>{var ke,mt,nn;if(((ke=be[0])==null?void 0:ke.flightType)===\\\\"Solo\\\\"){const Yt=((mt=be[0])==null?void 0:mt.student)||((nn=be[0])==null?void 0:nn.pilot);Yt&&be[0].pilot!==Yt&&Vt()}},[(Vr=be[0])==null?void 0:Vr.flightType,(li=be[0])==null?void 0:li.student,(Mi=be[0])==null?void 0:Mi.pilot]),C.useEffect(()=>{_e===\\\\"sct\\\\"?(Ze(ke=>ke.map(mt=>({...mt,flightType:\\\\"Solo\\\\"}))),ft||tt(1.2)):_e===\\\\"lmp_event\\\\"||_e===\\\\"lmp_currency\\\\"||_e===\\\\"staff_cat\\\\"?ft||tt(1.2):_e===\\\\"twr_di\\\\"&&(Ze(ke=>ke.map(mt=>({...mt,flightType:\\\\"Solo\\\\"}))),ft||tt(1.2),(Q||!n.startTime||n.startTime===0)&&Ct(\\\\"08:00\\\\"))},[_e]),C.useEffect(()=>{if(Fe&&(_e===\\\\"lmp_event\\\\"||_e===\\\\"lmp_currency\\\\"||_e===\\\\"staff_cat\\\\"||_e===\\\\"twr_di\\\\")){const ke=f.find(mt=>mt.id===Fe);ke&&ke.flightType&&Ze(mt=>mt.map(nn=>({...nn,flightType:ke.flightType})))}},[Fe,_e,f]),C.useEffect(()=>{var ke,mt;if((Q||o&&(!n.id||n.id.startsWith(\\\\"2d1b6a22\\\\")))&&(console.log(`\\\\ud83d\\\\udcdd [Flight Number Change] isAddingTile: ${Q}, isEditingDefault: ${o}, event.id: ${n.id}, flightNumber: ${Fe}`),Fe&&be[0]&&W)){const nn=((ke=be[0])==null?void 0:ke.student)||((mt=be[0])==null?void 0:mt.pilot);if(nn){console.log(`\\\\ud83d\\\\udcdd [Flight Number Change] Using selected trainee: ${nn}`);const Yt=ot(Fe,nn);be[0].flightType!==Yt&&(Ze(an=>{const en=[...an];return en.length>0&&(en[0]={...en[0],flightType:Yt}),en}),console.log(`\\\\ud83c\\\\udfaf [Auto Dual/Solo] Set to ${Yt} from Individual LMP for selected trainee ${nn}`))}else{console.log(`\\\\ud83d\\\\udcdd [Flight Number Change] No pilot selected - searching for default from any trainee with LMP ${Fe}`);let Yt=\\\\"Dual\\\\",an=\\\\"\\\\";for(const[en,Cn]of W.entries()){const Vn=Cn.find(xn=>xn.id===Fe||xn.code===Fe);if(Vn&&Vn.sortieType){Yt=Vn.sortieType,an=en,console.log(`\\\\ud83d\\\\udcdd [Flight Number Change] Found default ${Yt} from ${an}\\\'s Individual LMP`);break}}be[0].flightType!==Yt&&(Ze(en=>{const Cn=[...en];return Cn.length>0&&(Cn[0]={...Cn[0],flightType:Yt}),Cn}),console.log(`\\\\ud83c\\\\udfaf [Auto Dual/Solo] Set to ${Yt} as default from ${an||\\\\"system\\\\"} for LMP ${Fe}`))}}},[Fe,W,Q,o,n.id]),C.useEffect(()=>{var ke,mt;if((Q||o&&(!n.id||n.id.startsWith(\\\\"2d1b6a22\\\\")))&&Fe&&be[0]&&W){const nn=((ke=be[0])==null?void 0:ke.student)||((mt=be[0])==null?void 0:mt.pilot);if(nn){const Yt=ot(Fe,nn);be[0].flightType!==Yt&&(Ze(an=>{const en=[...an];return en.length>0&&(en[0]={...en[0],flightType:Yt}),en}),console.log(`\\\\ud83c\\\\udfaf [Trainee Change] Updated to ${Yt} from Individual LMP for selected trainee ${nn}`))}}},[(Qr=be[0])==null?void 0:Qr.student,(Fi=be[0])==null?void 0:Fi.pilot,Fe,W,Q,o,n.id]);const Qn=C.useMemo(()=>{if(Te&&Te.length>0&&Y){const ke=Te.filter(mt=>mt.location===Y);return ke.length>0?ke:null}return null},[Te,Y]),as=C.useMemo(()=>Qn?Qn.map(ke=>ke.code):m===\\\\"ESL\\\\"?[\\\\"MERL\\\\",\\\\"VANG\\\\"]:[\\\\"COBR\\\\",\\\\"HAWK\\\\"],[Qn,m]),cs=[\\\\"A\\\\",\\\\"B\\\\",\\\\"C\\\\",\\\\"D\\\\",\\\\"E\\\\",\\\\"F\\\\",\\\\"G\\\\",\\\\"H\\\\",\\\\"S\\\\",\\\\"T\\\\",\\\\"U\\\\",\\\\"V\\\\",\\\\"W\\\\",\\\\"X\\\\",\\\\"Y\\\\",\\\\"Z\\\\"],rs=C.useMemo(()=>Object.keys(y).sort(),[y]),Ms=C.useMemo(()=>rs.map(ke=>({name:ke,trainees:v.filter(mt=>mt.course===ke).sort((mt,nn)=>mt.name.localeCompare(nn.name))})),[rs,v]),hs=C.useMemo(()=>We===\\\\"flight\\\\"?\\\\"Flight Details\\\\":We===\\\\"ftd\\\\"?\\\\"FTD Session Details\\\\":\\\\"Ground Event Details\\\\",[We]);C.useEffect(()=>{Xe(n.flightNumber),o&&!n.flightNumber?tt(\\\\"\\\\"):tt(n.duration),Ke(n.type),Ct(typeof n.startTime==\\\\"string\\\\"?n.startTime:Q0(n.startTime)),dn(n.area||\\\\"A\\\\"),st(n.aircraftNumber||\\\\"001\\\\"),Ge(1),Ze([{flightType:n.flightType,instructor:n.instructor||\\\\"\\\\",student:n.student||\\\\"\\\\",pilot:n.pilot||\\\\"\\\\",group:n.group||\\\\"\\\\",groupTraineeIds:n.groupTraineeIds||[]}]),J(o),ee(h),yn(n.locationType||\\\\"Local\\\\"),lt(n.origin||m),Bt(n.destination||m),Mt(n.formationType||as[0]),qt(n.isDeploy||!1),$e(n.deploymentStartDate||n.date),Dt(n.deploymentStartTime||\\\\"\\\\"),hn(n.deploymentEndDate||n.date),At(n.deploymentEndTime||\\\\"\\\\")},[n,o,h,m]),C.useEffect(()=>{Pt===\\\\"Local\\\\"&&(lt(m),Bt(m))},[Pt,m]),C.useEffect(()=>{const ke=Fe===\\\\"SCT FORM\\\\",mt=ke?kt:1;if(be.length!==mt){const nn=Array.from({length:mt},(Yt,an)=>{const en=ke&&_e===\\\\"sct\\\\"?\\\\"Solo\\\\":\\\\"Dual\\\\";return be[an]||{flightType:en,instructor:\\\\"\\\\",student:\\\\"\\\\",pilot:\\\\"\\\\",group:\\\\"\\\\",groupTraineeIds:[]}});Ze(nn)}},[kt,Fe,be,_e]),C.useEffect(()=>{Ke(Dw(Fe,f))},[Fe,f]);const _n=()=>{const ke=[];if([\\\\"Program Schedule\\\\",\\\\"DailyFlyingProgram\\\\",\\\\"InstructorSchedule\\\\",\\\\"TraineeSchedule\\\\"].includes(ae))Object.values(M).forEach(nn=>{const Yt=nn.filter(an=>an.type===\\\\"deployment\\\\");ke.push(...Yt)});else if([\\\\"NextDayBuild\\\\",\\\\"Priorities\\\\",\\\\"ProgramData\\\\",\\\\"NextDayInstructorSchedule\\\\",\\\\"NextDayTraineeSchedule\\\\"].includes(ae)){const nn=P.filter(Yt=>Yt.type===\\\\"deployment\\\\");ke.push(...nn)}return ke.filter(nn=>{var Yt,an,en,Cn;return We===\\\\"flight\\\\"?((Yt=nn.resourceId)==null?void 0:Yt.startsWith(\\\\"PC-21\\\\"))||((an=nn.resourceId)==null?void 0:an.startsWith(\\\\"Deployed\\\\")):We===\\\\"ftd\\\\"?(en=nn.resourceId)==null?void 0:en.startsWith(\\\\"FTD\\\\"):We===\\\\"cpt\\\\"?(Cn=nn.resourceId)==null?void 0:Cn.startsWith(\\\\"CPT\\\\"):!1})},rr=ke=>{const mt=Vn=>{const xn=Math.floor(Vn),ls=Math.round((Vn-xn)*60);return`${xn.toString().padStart(2,\\\\"0\\\\")}${ls.toString().padStart(2,\\\\"0\\\\")}`},nn=ke.date||\\\\"\\\\",Yt=ke.deploymentEndDate||nn,an=Vn=>{if(!Vn)return\\\\"\\\\";const xn=new Date(Vn),ls=xn.getDate().toString().padStart(2,\\\\"0\\\\"),Es=xn.toLocaleDateString(\\\\"en-US\\\\",{month:\\\\"short\\\\"}),Zs=xn.getFullYear().toString().slice(-2);return`${ls}${Es}${Zs}`},en=mt(ke.startTime||0),Cn=mt((ke.startTime||0)+(ke.duration||0));return`${en}${an(nn)}\\\\u2013${Cn}${an(Yt)}`};C.useEffect(()=>{var nn,Yt;const ke=(nn=be[0])==null?void 0:nn.student,mt=(Yt=be[0])==null?void 0:Yt.instructor;if(ke){if(kn&&(ne!=null&&ne.availableTraineesAnalysis)){const an=ne.availableTraineesAnalysis.find(en=>en.trainee.fullName===ke);if(an&&an.nextSyllabusEvent){const en=an.nextSyllabusEvent.id;os([en]),Xe(en),tt(an.nextSyllabusEvent.duration);return}}os(u);return}if(kn&&mt){const an=V.filter(en=>en.name===mt);if(an.length>0){const en=an.map(Vn=>Vn.event);os(en),Xe(en[0]);const Cn=f.find(Vn=>Vn.id===en[0]);Cn&&tt(Cn.duration)}else os([]),Xe(\\\\"\\\\");return}os(kn?[]:u),!n.flightNumber&&kn&&Xe(\\\\"\\\\")},[be,kn,ne,V,u,f,n.flightNumber]),C.useEffect(()=>{const ke=mt=>{et.current&&!et.current.contains(mt.target)&&yt(null)};return document.addEventListener(\\\\"mousedown\\\\",ke),()=>document.removeEventListener(\\\\"mousedown\\\\",ke)},[]),C.useMemo(()=>[...l,...d].sort(),[l,d]);const Cs=(ke,mt,nn)=>{const Yt=[...be],an={...Yt[ke]};if(mt===\\\\"flightType\\\\"){const en=nn;an.flightType=en,en===\\\\"Solo\\\\"?(an.instructor=\\\\"\\\\",an.student=\\\\"\\\\",an.group=\\\\"\\\\",an.groupTraineeIds=[]):an.pilot=\\\\"\\\\"}else an[mt]=nn;Yt[ke]=an,Ze(Yt),ee(null)},js=(ke,mt)=>{const nn=be[ke],Yt=new Set(nn.groupTraineeIds||[]);Yt.has(mt)?Yt.delete(mt):Yt.add(mt);const an=Array.from(Yt),en=an.length>0?`${an.length} Trainees Selected`:\\\\"\\\\",Cn=[...be];Cn[ke]={...nn,groupTraineeIds:an,group:en},Ze(Cn)},Cr=(ke,mt)=>{const nn=be[ke],Yt=new Set(nn.groupTraineeIds||[]),an=mt.map(ls=>ls.idNumber);an.every(ls=>Yt.has(ls))?an.forEach(ls=>Yt.delete(ls)):an.forEach(ls=>Yt.add(ls));const Cn=Array.from(Yt),Vn=Cn.length>0?`${Cn.length} Trainees Selected`:\\\\"\\\\",xn=[...be];xn[ke]={...nn,groupTraineeIds:Cn,group:Vn},Ze(xn)},Fs=ke=>{const mt=ke.target.value;Xe(mt);const nn=f.find(Yt=>Yt.id===mt);nn&&tt(nn.duration),console.log(\\\\"Flight number changed to:\\\\",mt),mt===\\\\"SCT FORM\\\\"&&!Kt&&Mt(as[0]),mt===\\\\"SCT FORM\\\\"&&_e===\\\\"sct\\\\"?(Ge(2),Ze(be.map(Yt=>({...Yt,flightType:\\\\"Solo\\\\"})))):mt!==\\\\"SCT FORM\\\\"&&Ge(1)},Ds=ke=>{if(!ke)return 0;if(ke.includes(\\\\":\\\\")){const[mt,nn]=ke.split(\\\\":\\\\").map(Number);return(mt||0)+(nn||0)/60}else{const mt=parseInt(ke.substring(0,2))||0,nn=parseInt(ke.substring(2,4))||0;return mt+nn/60}},Js=()=>{console.log(\\\\"Visual Adjust clicked\\\\"),fe&&fe(n),vt(!0)},sa=()=>{vt(!1);const ke={...n,startTime:Ht,duration:we-Ht};ge&&ge(ke),Ct(Q0(Ht)),tt(we-Ht)},to=()=>{const ke=be.map((mt,nn)=>{let Yt=n.color;const an=mt.student||mt.pilot;if(an){const xn=v.find(ls=>ls.fullName===an);xn&&y[xn.course]&&(Yt=y[xn.course])}let en=n.resourceId;if(Mn){const xn=_n().find(ls=>ls.id===Mn);xn&&(en=xn.resourceId,console.log(`Assigning event to deployment: ${xn.id} (${en})`))}const Cn=Fe===\\\\"SCT FORM\\\\"&&be.length>1?`${n.id}-${nn}-${Date.now()}`:n.id;Fe===\\\\"SCT FORM\\\\"&&be.length>1&&(en=\\\\"\\\\");const Vn={...n,id:Cn,type:We,flightNumber:Fe,startTime:typeof nt==\\\\"string\\\\"?_w(nt):nt,resourceId:en,duration:typeof ft==\\\\"number\\\\"?ft:0,area:We===\\\\"flight\\\\"?xt:void 0,aircraftNumber:We===\\\\"flight\\\\"?on:void 0,color:Yt,flightType:mt.flightType,instructor:mt.instructor,student:mt.student,pilot:mt.pilot,group:mt.group,groupTraineeIds:mt.groupTraineeIds,locationType:Pt,origin:Pt===\\\\"Local\\\\"?m:Tt,destination:Pt===\\\\"Local\\\\"?m:Et,formationType:Fe===\\\\"SCT FORM\\\\"?Kt:void 0,formationPosition:Fe===\\\\"SCT FORM\\\\"?nn+1:void 0,callsign:Fe===\\\\"SCT FORM\\\\"?`${Kt}${nn+1}`:void 0,formationId:void 0,isDeploy:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"?Ve:void 0,deploymentStartDate:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve?je:void 0,deploymentStartTime:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve?Ye:void 0,deploymentEndDate:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve?St:void 0,deploymentEndTime:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve?Ce:void 0,deploymentAircraftCount:We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve?B:void 0,eventCategory:_e};return _e===\\\\"sct\\\\"&&console.log(\\\\"\\\\ud83d\\\\udcbe Saving SCT event:\\\\",{id:Vn.id,flightType:Vn.flightType,pilot:Vn.pilot,student:Vn.student,instructor:Vn.instructor,eventCategory:Vn.eventCategory,crewData:mt,allCrew:be}),Vn});if(console.log(\\\\"Deployment Check:\\\\",{eventType:We,locationType:Pt,isDeploy:Ve,deploymentStartDate:je,deploymentStartTime:Ye,deploymentEndDate:St,deploymentEndTime:Ce}),We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&Ve&&je&&Ye&&St&&Ce){console.log(\\\\"Creating deployment tile...\\\\");const mt=Ds(Ye),nn=Ds(Ce),Yt=new Date(je),an=new Date(St);let Cn=Math.floor((an.getTime()-Yt.getTime())/(1e3*60*60*24))*24+(nn-mt);Cn<=0&&(Cn=1),console.log(`Creating ${B} deployment tiles...`);for(let Vn=0;Vn<B;Vn++){const xn={id:`deployment-${n.id}-${Vn}-${Date.now()}`,date:je,type:\\\\"deployment\\\\",startTime:mt,duration:Cn,resourceId:\\\\"Deployed\\\\",color:\\\\"bg-gray-600/30\\\\",flightNumber:\\\\"DEPLOYMENT\\\\",flightType:\\\\"Dual\\\\",locationType:\\\\"Land Away\\\\",origin:\\\\"DEPLOY\\\\",destination:\\\\"DEPLOY\\\\",instructor:\\\\"\\\\",student:\\\\"\\\\",pilot:\\\\"\\\\",isDeploy:!0,deploymentStartDate:je,deploymentStartTime:Ye,deploymentEndDate:St,deploymentEndTime:Ce,deploymentAircraftCount:B};console.log(`Deployment tile ${Vn+1} created:`,xn),ke.push(xn)}}console.log(\\\\"Events to save:\\\\",ke),s(ke)},Ti=C.useMemo(()=>{const ke=[];for(let mt=0;mt<24;mt++)for(let nn=0;nn<60;nn+=5){const Yt=mt+nn/60,an=`${String(mt).padStart(2,\\\\"0\\\\")}${String(nn).padStart(2,\\\\"0\\\\")}`;ke.push({label:an,value:Yt})}return ke},[]),vs=C.useMemo(()=>{const ke=n.flightType===\\\\"Dual\\\\"?n.student:n.pilot;return ke&&v.find(mt=>mt.fullName===ke)||null},[n.flightType,n.student,n.pilot,v]),ra=()=>{var ke,mt;kn&&!((ke=be[0])!=null&&ke.student)&&!((mt=be[0])!=null&&mt.instructor)&&(pn(!0),setTimeout(()=>pn(!1),2e3))},no=()=>{vs&&(T(vs),t())},xi=()=>{E(n.flightNumber),t()},Ta=()=>{vs&&(A(vs),t())},so=()=>{_(n)},Go=()=>{R(n)},ro=()=>{n.flightNumber.includes(\\\\"MB\\\\")||n.flightNumber.includes(\\\\" MB\\\\")?Le(!0):(alert(vs?`Ground event \\\\"${n.flightNumber}\\\\" marked as complete for ${vs.rank} ${vs.name}`:`Ground event \\\\"${n.flightNumber}\\\\" marked as complete`),t())},Ba=ke=>{console.log(\\\\"Mass Brief completed for trainees:\\\\",ke.map(Yt=>Yt.fullName));const mt=new Date().toISOString().split(\\\\"T\\\\")[0],nn=n.instructor||\\\\"System\\\\";Ne?(ke.forEach(Yt=>{const an={id:`${Yt.idNumber}_${n.id}_${mt}`,traineeName:Yt.name,traineeFullName:Yt.fullName||`${Yt.rank} ${Yt.name}`,eventId:n.id,flightNumber:n.flightNumber,date:mt,instructorName:nn,dcoResult:\\\\"DCO\\\\",overallGrade:\\\\"No Grade\\\\",overallResult:null,overallComments:`Ground event completed via Mass Brief completion on ${mt}`,scores:[],isCompleted:!0,groundSchoolAssessment:{isAssessment:!1,result:0}};console.log(\\\\"Saving PT051 assessment for:\\\\",Yt.fullName,an),Ne(an)}),console.log(\\\\"PT051 assessments saved successfully\\\\")):console.warn(\\\\"onSavePT051Assessment callback is not defined!\\\\"),He(ke),pe(!0)},Ao=(ke,mt)=>{var Vn;const nn=Fe===\\\\"SCT FORM\\\\";Fe.startsWith(\\\\"SCT\\\\");const Yt=nn&&Kt?`${Kt}${mt+1}`:`Aircraft ${mt+1}`,an=_e===\\\\"lmp_currency\\\\"||_e===\\\\"sct\\\\"||_e===\\\\"staff_cat\\\\"||_e===\\\\"twr_di\\\\",en=_e===\\\\"lmp_event\\\\"||_e===\\\\"lmp_currency\\\\",Cn=(_e===\\\\"sct\\\\"||_e===\\\\"staff_cat\\\\"||_e===\\\\"twr_di\\\\")&&ke.flightType===\\\\"Dual\\\\";return e.jsxs(\\\\"div\\\\",{className:`space-y-4 ${be.length>1?\\\\"p-3 bg-gray-700/50 rounded-lg\\\\":\\\\"\\\\"}`,children:[be.length>1&&e.jsx(\\\\"h4\\\\",{className:\\\\"text-sm font-bold text-sky-400\\\\",children:Yt}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Dual/Solo\\\\"}),e.jsxs(\\\\"select\\\\",{value:ke.flightType,onChange:xn=>Cs(mt,\\\\"flightType\\\\",xn.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:[e.jsx(\\\\"option\\\\",{value:\\\\"Dual\\\\",children:\\\\"Dual\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"Solo\\\\",children:\\\\"Solo\\\\"})]})]}),ke.flightType===\\\\"Dual\\\\"?e.jsxs(e.Fragment,{children:[an?Fn(_e===\\\\"sct\\\\"?ke.pilot:ke.instructor,xn=>Cs(mt,_e===\\\\"sct\\\\"?\\\\"pilot\\\\":\\\\"instructor\\\\",xn),_e===\\\\"sct\\\\"||_e===\\\\"staff_cat\\\\"||_e===\\\\"twr_di\\\\"?\\\\"Pilot\\\\":\\\\"Instructor\\\\",Ve):Fn(ke.instructor,xn=>Cs(mt,\\\\"instructor\\\\",xn),\\\\"Instructor\\\\",Ve),en&&e.jsxs(e.Fragment,{children:[Rn(ke.student,xn=>Cs(mt,\\\\"student\\\\",xn),Ve,X===\\\\"student\\\\"),e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center justify-center my-3\\\\",children:e.jsx(\\\\"span\\\\",{className:\\\\"text-base font-bold text-gray-500\\\\",children:\\\\"- OR -\\\\"})}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border border-gray-600 rounded bg-gray-700/30 relative\\\\",ref:et,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex justify-between items-center mb-2\\\\",children:[e.jsx(\\\\"h4\\\\",{className:\\\\"text-sm font-medium text-gray-300\\\\",children:\\\\"Group\\\\"}),((Vn=ke.groupTraineeIds)==null?void 0:Vn.length)>0&&e.jsxs(\\\\"span\\\\",{className:\\\\"text-xs text-sky-400 font-mono bg-gray-800 px-2 py-0.5 rounded-full border border-gray-600\\\\",children:[ke.groupTraineeIds.length,\\\\" Selected\\\\"]})]}),e.jsxs(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>yt(rt===mt?null:mt),disabled:Ve,className:\\\\"w-full py-2 px-4 bg-gray-700 hover:bg-gray-600 border border-gray-500 text-white rounded-md text-sm font-medium transition-colors flex items-center justify-center shadow-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed disabled:opacity-50\\\\",children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4 mr-2 text-sky-400\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{d:\\\\"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z\\\\"})}),\\\\"Add Names\\\\"]}),rt===mt&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute z-10 mt-1 w-full bg-gray-800 border border-gray-600 rounded-md shadow-xl max-h-60 overflow-y-auto left-0\\\\",children:Ms.map(xn=>{const ls=xn.trainees.map(ir=>ir.idNumber),Es=new Set(ke.groupTraineeIds||[]),Zs=ls.length>0&&ls.every(ir=>Es.has(ir));return e.jsxs(\\\\"div\\\\",{children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center px-3 py-2 bg-gray-900/80 font-bold text-gray-300 sticky top-0 z-10 border-b border-gray-700\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:Zs,onChange:()=>Cr(mt,xn.trainees),className:\\\\"h-4 w-4 accent-sky-500 bg-gray-600 border-gray-500 rounded mr-2 cursor-pointer\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"uppercase text-xs\\\\",children:xn.name})]}),e.jsx(\\\\"div\\\\",{className:\\\\"bg-gray-800\\\\",children:xn.trainees.map(ir=>{const Pi=Es.has(ir.idNumber);return e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center px-3 py-2 pl-8 hover:bg-gray-700 cursor-pointer transition-colors border-b border-gray-700/50 last:border-0\\\\",onClick:()=>js(mt,ir.idNumber),children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:Pi,readOnly:!0,className:\\\\"h-4 w-4 accent-sky-500 bg-gray-600 border-gray-500 rounded mr-3 pointer-events-none\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"text-sm text-gray-300\\\\",children:ir.name})]},ir.idNumber)})})]},xn.name)})})]})]}),Cn&&Fn(ke.student,xn=>Cs(mt,\\\\"student\\\\",xn),\\\\"Crew\\\\",Ve,_e===\\\\"sct\\\\")]}):an?e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Pilot\\\\"}),e.jsxs(\\\\"select\\\\",{value:ke.pilot,onChange:xn=>Cs(mt,\\\\"pilot\\\\",xn.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed appearance-none cursor-pointer z-10\\\\",children:[e.jsx(\\\\"option\\\\",{value:\\\\"\\\\",disabled:!0,children:\\\\"Select pilot\\\\"}),Hn.sortedUnits.map(xn=>e.jsx(\\\\"optgroup\\\\",{label:`\\\\u2500\\\\u2500\\\\u2500 ${xn} \\\\u2500\\\\u2500\\\\u2500`,children:Hn.grouped[xn].filter(ls=>be.length>1?!be.filter((Zs,ir)=>ir!==mt).map(Zs=>Zs.pilot).filter(Zs=>Zs).includes(ls.name):!0).map(ls=>{const Zs=`${(zn[ls.name]||{rank:\\\\"\\\\"}).rank} ${ls.name}`;return e.jsx(\\\\"option\\\\",{value:ls.name,children:Zs},ls.name)})},xn))]})]}):e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Pilot\\\\"}),e.jsxs(\\\\"select\\\\",{value:ke.pilot,onChange:xn=>Cs(mt,\\\\"pilot\\\\",xn.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:[e.jsx(\\\\"option\\\\",{value:\\\\"\\\\",disabled:!0,children:\\\\"Select pilot\\\\"}),un.filter(xn=>be.length>1?!be.filter((Es,Zs)=>Zs!==mt).map(Es=>Es.pilot).filter(Es=>Es).includes(xn):!0).map(xn=>e.jsx(\\\\"option\\\\",{value:xn,children:xn},xn))]})]})]},mt)};return ht?e.jsx(kw,{event:n,startTime:Ht,endTime:we,onContinue:sa,onClose:()=>vt(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-50 flex items-center justify-center\\\\",onClick:t,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl border border-gray-700 transform transition-all animate-fade-in flex flex-col h-[90vh]\\\\",onClick:ke=>ke.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:`p-4 border-b border-gray-700 flex justify-between items-center ${n.color} flex-shrink-0`,children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-white\\\\",children:hs}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[F&&We===\\\\"flight\\\\"&&e.jsxs(\\\\"label\\\\",{className:\\\\"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-black/20\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:Ve,onChange:ke=>{const mt=ke.target.checked;qt(mt),mt&&yn(\\\\"Land Away\\\\")},className:\\\\"h-5 w-5 accent-sky-500 bg-gray-600 rounded border-gray-500 focus:ring-sky-500\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"text-sm font-semibold text-white\\\\",children:\\\\"Add Deployment\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:()=>ue(!0),className:\\\\"px-4 py-1 text-sm font-semibold rounded-md btn-red-brushed\\\\",\\\\"aria-label\\\\":\\\\"Delete Event\\\\",children:\\\\"Delete\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex flex-row overflow-hidden\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 overflow-y-auto p-6\\\\",children:F?e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"mb-6\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400 mb-3\\\\",children:\\\\"Event Category\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-5 gap-3\\\\",children:[e.jsx(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>Z(\\\\"lmp_event\\\\"),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${_e===\\\\"lmp_event\\\\"?\\\\"bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\\":\\\\"bg-gray-700 text-gray-300 hover:bg-gray-600\\\\"}`,children:\\\\"LMP Event\\\\"}),e.jsx(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>Z(\\\\"lmp_currency\\\\"),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${_e===\\\\"lmp_currency\\\\"?\\\\"bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\\":\\\\"bg-gray-700 text-gray-300 hover:bg-gray-600\\\\"}`,children:\\\\"LMP Currency\\\\"}),e.jsx(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>Z(\\\\"sct\\\\"),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${_e===\\\\"sct\\\\"?\\\\"bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\\":\\\\"bg-gray-700 text-gray-300 hover:bg-gray-600\\\\"}`,children:\\\\"SCT\\\\"}),e.jsx(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>Z(\\\\"staff_cat\\\\"),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${_e===\\\\"staff_cat\\\\"?\\\\"bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\\":\\\\"bg-gray-700 text-gray-300 hover:bg-gray-600\\\\"}`,children:\\\\"Staff CAT\\\\"}),e.jsx(\\\\"button\\\\",{type:\\\\"button\\\\",onClick:()=>Z(\\\\"twr_di\\\\"),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all ${_e===\\\\"twr_di\\\\"?\\\\"bg-sky-600 text-white shadow-lg ring-2 ring-sky-400\\\\":\\\\"bg-gray-700 text-gray-300 hover:bg-gray-600\\\\"}`,children:\\\\"TWR DI\\\\"}),\\\\"                                           \\\\"]})]}),e.jsxs(\\\\"div\\\\",{className:`grid grid-cols-1 ${We===\\\\"flight\\\\"?\\\\"md:grid-cols-4\\\\":\\\\"md:grid-cols-3\\\\"} gap-4`,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"relative\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Syllabus Item\\\\"}),e.jsxs(\\\\"select\\\\",{value:Fe,onChange:Fs,onFocus:ra,disabled:Ve||kn&&ss.length===0,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:[e.jsx(\\\\"option\\\\",{value:\\\\"\\\\",disabled:!0,children:kn?\\\\"Select a crew member first\\\\":\\\\"Select an item\\\\"}),Q&&e.jsx(\\\\"option\\\\",{value:\\\\"SCT FORM\\\\",children:\\\\"SCT FORM\\\\"}),ss.filter(ke=>ke!==\\\\"SCT FORM\\\\").map(ke=>e.jsx(\\\\"option\\\\",{value:ke,children:ke},ke))]}),$t&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute -bottom-6 left-0 text-xs text-red-400 animate-fade-in\\\\",children:\\\\"Select a crew member first.\\\\"})]}),We===\\\\"flight\\\\"&&e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Area\\\\"}),e.jsx(\\\\"select\\\\",{value:xt,onChange:ke=>dn(ke.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:cs.map(ke=>e.jsx(\\\\"option\\\\",{value:ke,children:ke},ke))})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Aircraft Number\\\\"}),e.jsx(\\\\"select\\\\",{value:on,onChange:ke=>st(ke.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:Array.from({length:49},(ke,mt)=>String(mt+1).padStart(3,\\\\"0\\\\")).map(ke=>e.jsx(\\\\"option\\\\",{value:ke,children:ke},ke))})]})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Start Time\\\\"}),e.jsx(\\\\"select\\\\",{value:nt,onChange:ke=>{Ct(parseFloat(ke.target.value)),ee(null)},disabled:Ve,className:`mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition-all duration-200 disabled:bg-gray-700/50 disabled:cursor-not-allowed ${X===\\\\"startTime\\\\"?\\\\"ring-2 ring-red-500\\\\":\\\\"\\\\"}`,children:Ti.map(ke=>e.jsx(\\\\"option\\\\",{value:ke.value,children:ke.label},ke.value))})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Duration\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"number\\\\",step:\\\\"0.1\\\\",min:\\\\"0.1\\\\",value:ft,onChange:ke=>tt(ke.target.value===\\\\"\\\\"?\\\\"\\\\":parseFloat(ke.target.value)),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\"})]})]}),We===\\\\"flight\\\\"&&e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Location\\\\"}),e.jsxs(\\\\"select\\\\",{value:Pt,onChange:ke=>yn(ke.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:[e.jsx(\\\\"option\\\\",{value:\\\\"Local\\\\",children:\\\\"Local\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"Land Away\\\\",children:\\\\"Land Away\\\\"})]})]}),We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&!Ve&&e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center gap-4\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Origin\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",value:Tt,onChange:ke=>lt(ke.target.value.toUpperCase()),maxLength:3,placeholder:\\\\"e.g. ESL\\\\",className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Destination\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",value:Et,onChange:ke=>Bt(ke.target.value.toUpperCase()),maxLength:3,placeholder:\\\\"e.g. PEA\\\\",className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]})]}),We===\\\\"flight\\\\"&&Pt===\\\\"Land Away\\\\"&&e.jsx(e.Fragment,{children:e.jsxs(\\\\"fieldset\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg mb-4\\\\",children:[e.jsx(\\\\"legend\\\\",{className:\\\\"px-2 text-sm font-semibold text-gray-300\\\\",children:\\\\"Deployment Period\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"mt-2 grid grid-cols-4 gap-2 bg-gray-700/30 p-3 rounded-lg\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-xs font-medium text-gray-400\\\\",children:\\\\"Start Time\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",value:Ye,onChange:ke=>{const mt=ke.target.value.replace(/:/g,\\\\"\\\\").replace(/\\\\\\\\D/g,\\\\"\\\\").slice(0,4);Dt(mt)},placeholder:\\\\"0800\\\\",className:\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-xs font-medium text-gray-400\\\\",children:\\\\"Start Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",value:je,onChange:ke=>$e(ke.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm\\\\"})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-xs font-medium text-gray-400\\\\",children:\\\\"End Time\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",value:Ce,onChange:ke=>{const mt=ke.target.value.replace(/:/g,\\\\"\\\\").replace(/\\\\\\\\D/g,\\\\"\\\\").slice(0,4);At(mt)},placeholder:\\\\"1700\\\\",className:\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-xs font-medium text-gray-400\\\\",children:\\\\"End Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",value:St,onChange:ke=>hn(ke.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 w-full bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"mt-2 bg-gray-700/30 p-3 rounded-lg\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-xs font-medium text-gray-400 mb-1\\\\",children:\\\\"Number of Aircraft\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"number\\\\",min:\\\\"1\\\\",max:\\\\"20\\\\",value:B,onChange:ke=>Ae(parseInt(ke.target.value)||1),className:\\\\"w-24 bg-gray-800 border-gray-600 rounded py-1 px-2 text-sm text-center\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"ml-2 text-xs text-gray-500\\\\",children:\\\\"aircraft deploying\\\\"})]})]})}),Fe===\\\\"SCT FORM\\\\"&&e.jsxs(\\\\"div\\\\",{className:\\\\"p-3 bg-gray-900/50 rounded-lg space-y-4\\\\",children:[e.jsx(\\\\"h3\\\\",{className:\\\\"font-semibold text-gray-300\\\\",children:\\\\"Formation Details\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 gap-4\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Formation Callsign\\\\"}),e.jsx(\\\\"select\\\\",{value:Kt,onChange:ke=>Mt(ke.target.value),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:Qn?Qn.map(ke=>e.jsxs(\\\\"option\\\\",{value:ke.code,children:[ke.name,\\\\" (\\\\",ke.code,\\\\") - \\\\",ke.unit]},ke.code)):as.map(ke=>e.jsx(\\\\"option\\\\",{value:ke,children:ke},ke))})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Aircraft Count\\\\"}),e.jsx(\\\\"select\\\\",{value:kt,onChange:ke=>Ge(parseInt(ke.target.value)),disabled:Ve,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm disabled:bg-gray-700/50 disabled:cursor-not-allowed\\\\",children:Array.from({length:7},(ke,mt)=>mt+2).map(ke=>e.jsx(\\\\"option\\\\",{value:ke,children:ke},ke))})]})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:be.map(Ao)}),(We===\\\\"flight\\\\"||We===\\\\"ftd\\\\"||We===\\\\"cpt\\\\")&&e.jsxs(\\\\"div\\\\",{className:\\\\"border-t border-gray-600 pt-6 mt-6\\\\",children:[e.jsx(\\\\"h3\\\\",{className:\\\\"text-lg font-semibold text-white mb-4\\\\",children:\\\\"Add to Deployment\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-3\\\\",children:_n().length>0?_n().map(ke=>e.jsxs(\\\\"label\\\\",{className:\\\\"flex items-center space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:Mn===ke.id,onChange:mt=>{mt.target.checked?jn(ke.id):jn(\\\\"\\\\")},className:\\\\"h-4 w-4 text-sky-600 bg-gray-700 border-gray-600 rounded focus:ring-sky-500\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"text-sm text-gray-300\\\\",children:rr(ke)}),e.jsxs(\\\\"span\\\\",{className:\\\\"text-xs text-gray-500 ml-2\\\\",children:[\\\\"(\\\\",ke.resourceId,\\\\")\\\\"]})]},ke.id)):e.jsx(\\\\"p\\\\",{className:\\\\"text-sm text-gray-500 italic\\\\",children:\\\\"No deployments available for this event type\\\\"})})]})]}):e.jsxs(\\\\"div\\\\",{className:\\\\"text-gray-300 space-y-2\\\\",children:[e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Syllabus Item:\\\\"}),\\\\" \\\\",n.flightNumber]}),n.type===\\\\"flight\\\\"&&e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Route:\\\\"}),\\\\" \\\\",n.origin,\\\\"-\\\\",n.destination]}),n.type===\\\\"flight\\\\"&&n.area&&e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Area:\\\\"}),\\\\" \\\\",n.area]}),e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Dual/Solo:\\\\"}),\\\\" \\\\",e.jsx(\\\\"span\\\\",{className:\\\\"font-semibold\\\\",children:n.flightType})]}),n.flightType===\\\\"Dual\\\\"?e.jsxs(e.Fragment,{children:[n.eventCategory===\\\\"sct\\\\"?e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Instructor:\\\\"}),\\\\" \\\\",n.instructor||n.pilot]}):e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Instructor:\\\\"}),\\\\" \\\\",n.instructor]}),n.type===\\\\"ground\\\\"&&n.attendees&&n.attendees.length>0?e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"p\\\\",{children:e.jsxs(\\\\"strong\\\\",{children:[\\\\"Attendees (\\\\",n.attendees.length,\\\\"):\\\\"]})}),e.jsx(\\\\"div\\\\",{className:\\\\"mt-1 bg-gray-700/50 p-2 rounded-md max-h-32 overflow-y-auto\\\\",children:e.jsx(\\\\"ul\\\\",{className:\\\\"space-y-1\\\\",children:n.attendees.map(ke=>e.jsx(\\\\"li\\\\",{className:\\\\"text-sm text-gray-300\\\\",children:ke.split(\\\\" \\\\u2013 \\\\")[0]},ke))})})]}):n.eventCategory===\\\\"sct\\\\"?null:e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Student:\\\\"}),\\\\" \\\\",n.student||n.group]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"p\\\\",{children:[e.jsx(\\\\"strong\\\\",{children:\\\\"PIC:\\\\"}),\\\\" \\\\",n.pilot]}),e.jsxs(\\\\"p\\\\",{className:\\\\"flex items-center gap-2\\\\",children:[e.jsx(\\\\"strong\\\\",{children:\\\\"Second Position:\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"inline-block px-2 py-0.5 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 rounded text-sm font-semibold\\\\",children:\\\\"SOLO\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "[feature/comprehensive-build-algorithm 0813591] Fix Solo flight formatting in Flight Details Modal - show PIC and SOLO badge\\\\n Committer: root <root@172.16.0.151>\\\\nYour name and email address were configured automatically based\\\\non your username and hostname. Please check that they are accurate.\\\\nYou can suppress this message by setting them explicitly:\\\\n\\\\n    git config --global user.name \\\\"Your Name\\\\"\\\\n    git config --global user.email you@example.com\\\\n\\\\nAfter doing this, you may fix the identity used for this commit with:\\\\n\\\\n    git commit --amend --reset-author\\\\n\\\\n 222 files changed, 9205 insertions(+), 18 deletions(-)\\\\n create mode 100644 Screen Shot 2026-01-04 at 3.25.12 pm.jpg\\\\n create mode 100644 Screen Shot 2026-01-04 at 3.28.10 pm.jpg\\\\n create mode 100644 Screen Shot 2026-01-04 at 3.33.56 pm.jpg\\\\n create mode 100644 Screen Shot 2026-01-04 at 3.45.06 pm.jpg\\\\n create mode 100644 Screen Shot 2026-01-04 at 4.25.00 pm.jpg\\\\n create mode 100644 _superninja_startup.conf\\\\n create mode 100644 components/FlightTile.tsx.backup\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/199-d68807470d310e91.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/255-cb395327542b56ef.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/394-b9e790b2947ff25e.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/4bd1b696-c023c6e3521b1417.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/_not-found/page-cfbe4427268781e3.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/admin/layout-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/admin/page-d2f12d515f051f0a.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/admin/users/page-e446a69d637ba9fb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/api/admin/users/[id]/route-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/api/admin/users/route-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/api/auth/[...nextauth]/route-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/api/schedule/filter/route-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/flight-school/page-43a47b35d5864f47.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/layout-3e3db7a0250679b1.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/login/page-f932b0b6371b25ca.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/page-44bb4d322ea52bfb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/select/page-4d1828d48f4e224b.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/app/test-login/page-891ecc2c7dda7b2d.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/framework-d7de93249215fb06.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/main-a4753544b5b73813.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/main-app-c5d5af050ad54be3.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/pages/_app-7d307437aca18ad4.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/pages/_error-cb2a52f75f2162e2.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/polyfills-42372ed130431b0a.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/chunks/webpack-74c939c87fa0092a.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/css/01aee2f2811cbcaf.css\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/purple-fix-1767504792915/_buildManifest.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/_next/purple-fix-1767504792915/_ssgManifest.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/assets/index-CmDcbMTV.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/assets/index-CmDcbMTV.js.map\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/assets/index.es-C3uMvCpb.js\\\\n create mode 100644 dfp-neo-platform/public/flight-school-app/assets/index.es-C3uMvCpb.js.map\\\\n create mode 100644 outputs/workspace_output_1767501452_2722.txt\\\\n create mode 100644 outputs/workspace_output_1767501455_7039.txt\\\\n create mode 100644 outputs/workspace_output_1767501458_4639.txt\\\\n create mode 100644 outputs/workspace_output_1767501462_3537.txt\\\\n create mode 100644 outputs/workspace_output_1767501473_5822.txt\\\\n create mode 100644 outputs/workspace_output_1767501486_4214.txt\\\\n create mode 100644 outputs/workspace_output_1767501489_3888.txt\\\\n create mode 100644 outputs/workspace_output_1767501492_5209.txt\\\\n create mode 100644 outputs/workspace_output_1767501496_5107.txt\\\\n create mode 100644 outputs/workspace_output_1767501685_501.txt\\\\n create mode 100644 outputs/workspace_output_1767501688_6288.txt\\\\n create mode 100644 outputs/workspace_output_1767501692_5078.txt\\\\n create mode 100644 outputs/workspace_output_1767501697_174.txt\\\\n create mode 100644 outputs/workspace_output_1767501718_2573.txt\\\\n create mode 100644 outputs/workspace_output_1767501731_3401.txt\\\\n create mode 100644 outputs/workspace_output_1767501735_756.txt\\\\n create mode 100644 outputs/workspace_output_1767501738_9016.txt\\\\n create mode 100644 outputs/workspace_output_1767502048_6554.txt\\\\n create mode 100644 outputs/workspace_output_1767502053_5200.txt\\\\n create mode 100644 outputs/workspace_output_1767502064_7339.txt\\\\n create mode 100644 outputs/workspace_output_1767502078_4238.txt\\\\n create mode 100644 outputs/workspace_output_1767502082_7743.txt\\\\n create mode 100644 outputs/workspace_output_1767502086_2305.txt\\\\n create mode 100644 outputs/workspace_output_1767502364_6047.txt\\\\n create mode 100644 outputs/workspace_output_1767502640_1901.txt\\\\n create mode 100644 outputs/workspace_output_1767502644_2200.txt\\\\n create mode 100644 outputs/workspace_output_1767502645_7107.txt\\\\n create mode 100644 outputs/workspace_output_1767502658_2704.txt\\\\n create mode 100644 outputs/workspace_output_1767502661_3849.txt\\\\n create mode 100644 outputs/workspace_output_1767502663_8486.txt\\\\n create mode 100644 outputs/workspace_output_1767502664_3931.txt\\\\n create mode 100644 outputs/workspace_output_1767502666_6234.txt\\\\n create mode 100644 outputs/workspace_output_1767502668_5180.txt\\\\n create mode 100644 outputs/workspace_output_1767502669_5540.txt\\\\n create mode 100644 outputs/workspace_output_1767502670_9724.txt\\\\n create mode 100644 outputs/workspace_output_1767502673_6116.txt\\\\n create mode 100644 outputs/workspace_output_1767502674_8891.txt\\\\n create mode 100644 outputs/workspace_output_1767502676_9788.txt\\\\n create mode 100644 outputs/workspace_output_1767502688_423.txt\\\\n create mode 100644 outputs/workspace_output_1767502691_1628.txt\\\\n create mode 100644 outputs/workspace_output_1767502702_6852.txt\\\\n create mode 100644 outputs/workspace_output_1767502706_1207.txt\\\\n create mode 100644 outputs/workspace_output_1767502718_7241.txt\\\\n create mode 100644 outputs/workspace_output_1767502722_2859.txt\\\\n create mode 100644 outputs/workspace_output_1767502724_5313.txt\\\\n create mode 100644 outputs/workspace_output_1767502726_4726.txt\\\\n create mode 100644 outputs/workspace_output_1767502729_8921.txt\\\\n create mode 100644 outputs/workspace_output_1767502732_246.txt\\\\n create mode 100644 outputs/workspace_output_1767502977_1022.txt\\\\n create mode 100644 outputs/workspace_output_1767502978_3395.txt\\\\n create mode 100644 outputs/workspace_output_1767502980_3875.txt\\\\n create mode 100644 outputs/workspace_output_1767502981_3264.txt\\\\n create mode 100644 outputs/workspace_output_1767502984_6571.txt\\\\n create mode 100644 outputs/workspace_output_1767502987_7565.txt\\\\n create mode 100644 outputs/workspace_output_1767502989_6533.txt\\\\n create mode 100644 outputs/workspace_output_1767502990_8890.txt\\\\n create mode 100644 outputs/workspace_output_1767502994_2209.txt\\\\n create mode 100644 outputs/workspace_output_1767502998_2348.txt\\\\n create mode 100644 outputs/workspace_output_1767503004_8714.txt\\\\n create mode 100644 outputs/workspace_output_1767503006_8486.txt\\\\n create mode 100644 outputs/workspace_output_1767503008_6331.txt\\\\n create mode 100644 outputs/workspace_output_1767503010_4204.txt\\\\n create mode 100644 outputs/workspace_output_1767503011_5407.txt\\\\n create mode 100644 outputs/workspace_output_1767503013_7762.txt\\\\n create mode 100644 outputs/workspace_output_1767503031_2974.txt\\\\n create mode 100644 outputs/workspace_output_1767503033_5410.txt\\\\n create mode 100644 outputs/workspace_output_1767503037_8447.txt\\\\n create mode 100644 outputs/workspace_output_1767503040_8820.txt\\\\n create mode 100644 outputs/workspace_output_1767503042_6951.txt\\\\n create mode 100644 outputs/workspace_output_1767503051_3721.txt\\\\n create mode 100644 outputs/workspace_output_1767503053_2990.txt\\\\n create mode 100644 outputs/workspace_output_1767503055_3998.txt\\\\n create mode 100644 outputs/workspace_output_1767503093_683.txt\\\\n create mode 100644 outputs/workspace_output_1767503104_6774.txt\\\\n create mode 100644 outputs/workspace_output_1767503107_1649.txt\\\\n create mode 100644 outputs/workspace_output_1767503110_6220.txt\\\\n create mode 100644 outputs/workspace_output_1767503124_4299.txt\\\\n create mode 100644 outputs/workspace_output_1767503126_8699.txt\\\\n create mode 100644 outputs/workspace_output_1767503127_4789.txt\\\\n create mode 100644 outputs/workspace_output_1767503130_709.txt\\\\n create mode 100644 outputs/workspace_output_1767503132_2067.txt\\\\n create mode 100644 outputs/workspace_output_1767503136_3102.txt\\\\n create mode 100644 outputs/workspace_output_1767503139_522.txt\\\\n create mode 100644 outputs/workspace_output_1767503143_6671.txt\\\\n create mode 100644 outputs/workspace_output_1767503144_3876.txt\\\\n create mode 100644 outputs/workspace_output_1767503146_9185.txt\\\\n create mode 100644 outputs/workspace_output_1767503148_1295.txt\\\\n create mode 100644 outputs/workspace_output_1767503149_7815.txt\\\\n create mode 100644 outputs/workspace_output_1767503152_2596.txt\\\\n create mode 100644 outputs/workspace_output_1767503154_8168.txt\\\\n create mode 100644 outputs/workspace_output_1767503158_5439.txt\\\\n create mode 100644 outputs/workspace_output_1767503160_7521.txt\\\\n create mode 100644 outputs/workspace_output_1767503162_9779.txt\\\\n create mode 100644 outputs/workspace_output_1767503167_8095.txt\\\\n create mode 100644 outputs/workspace_output_1767503173_8443.txt\\\\n create mode 100644 outputs/workspace_output_1767503175_4733.txt\\\\n create mode 100644 outputs/workspace_output_1767503177_1310.txt\\\\n create mode 100644 outputs/workspace_output_1767503179_3211.txt\\\\n create mode 100644 outputs/workspace_output_1767503181_6279.txt\\\\n create mode 100644 outputs/workspace_output_1767503182_670.txt\\\\n create mode 100644 outputs/workspace_output_1767503264_151.txt\\\\n create mode 100644 outputs/workspace_output_1767503267_2113.txt\\\\n create mode 100644 outputs/workspace_output_1767503271_861.txt\\\\n create mode 100644 outputs/workspace_output_1767503274_5242.txt\\\\n create mode 100644 outputs/workspace_output_1767503277_1625.txt\\\\n create mode 100644 outputs/workspace_output_1767503280_6516.txt\\\\n create mode 100644 outputs/workspace_output_1767503285_3371.txt\\\\n create mode 100644 outputs/workspace_output_1767503289_7954.txt\\\\n create mode 100644 outputs/workspace_output_1767503292_5860.txt\\\\n create mode 100644 outputs/workspace_output_1767503295_8631.txt\\\\n create mode 100644 outputs/workspace_output_1767503298_1819.txt\\\\n create mode 100644 outputs/workspace_output_1767503302_5580.txt\\\\n create mode 100644 outputs/workspace_output_1767503958_1989.txt\\\\n create mode 100644 outputs/workspace_output_1767503961_8061.txt\\\\n create mode 100644 outputs/workspace_output_1767503965_6964.txt\\\\n create mode 100644 outputs/workspace_output_1767503968_8499.txt\\\\n create mode 100644 outputs/workspace_output_1767503972_4507.txt\\\\n create mode 100644 outputs/workspace_output_1767503976_1116.txt\\\\n create mode 100644 outputs/workspace_output_1767503979_8229.txt\\\\n create mode 100644 outputs/workspace_output_1767503983_5870.txt\\\\n create mode 100644 outputs/workspace_output_1767503990_4679.txt\\\\n create mode 100644 outputs/workspace_output_1767503994_5443.txt\\\\n create mode 100644 outputs/workspace_output_1767504008_5772.txt\\\\n create mode 100644 outputs/workspace_output_1767504021_8619.txt\\\\n create mode 100644 outputs/workspace_output_1767504025_3123.txt\\\\n create mode 100644 outputs/workspace_output_1767504036_6931.txt\\\\n create mode 100644 outputs/workspace_output_1767504044_3045.txt\\\\n create mode 100644 outputs/workspace_output_1767504048_8186.txt\\\\n create mode 100644 outputs/workspace_output_1767504051_4005.txt\\\\n create mode 100644 outputs/workspace_output_1767504062_494.txt\\\\n create mode 100644 outputs/workspace_output_1767504342_4269.txt\\\\n create mode 100644 outputs/workspace_output_1767504346_9601.txt\\\\n create mode 100644 outputs/workspace_output_1767504350_2487.txt\\\\n create mode 100644 outputs/workspace_output_1767504354_3190.txt\\\\n create mode 100644 outputs/workspace_output_1767504360_1819.txt\\\\n create mode 100644 outputs/workspace_output_1767504364_6302.txt\\\\n create mode 100644 outputs/workspace_output_1767504369_1974.txt\\\\n create mode 100644 outputs/workspace_output_1767504373_8069.txt\\\\n create mode 100644 outputs/workspace_output_1767504377_2698.txt\\\\n create mode 100644 outputs/workspace_output_1767504382_4298.txt\\\\n create mode 100644 outputs/workspace_output_1767504393_3286.txt\\\\n create mode 100644 outputs/workspace_output_1767504397_352.txt\\\\n create mode 100644 outputs/workspace_output_1767504401_475.txt\\\\n create mode 100644 outputs/workspace_output_1767504404_4142.txt\\\\n create mode 100644 outputs/workspace_output_1767504407_6599.txt\\\\n create mode 100644 outputs/workspace_output_1767504413_6224.txt\\\\n create mode 100644 outputs/workspace_output_1767504417_7058.txt\\\\n create mode 100644 outputs/workspace_output_1767504420_1927.txt\\\\n create mode 100644 outputs/workspace_output_1767504439_780.txt\\\\n create mode 100644 outputs/workspace_output_1767504442_9456.txt\\\\n create mode 100644 outputs/workspace_output_1767504684_2389.txt\\\\n create mode 100644 outputs/workspace_output_1767504687_8990.txt\\\\n create mode 100644 outputs/workspace_output_1767504690_6590.txt\\\\n create mode 100644 outputs/workspace_output_1767504696_4035.txt\\\\n create mode 100644 outputs/workspace_output_1767504701_965.txt\\\\n create mode 100644 outputs/workspace_output_1767504704_9815.txt\\\\n create mode 100644 outputs/workspace_output_1767504708_6277.txt\\\\n create mode 100644 outputs/workspace_output_1767504767_8694.txt\\\\n create mode 100644 outputs/workspace_output_1767504792_4400.txt\\\\n create mode 100644 outputs/workspace_output_1767504806_5293.txt\\\\n create mode 100644 outputs/workspace_output_1767504871_8390.txt\\\\n create mode 100644 outputs/workspace_output_1767504875_5064.txt\\\\n create mode 100644 outputs/workspace_output_1767504879_7416.txt\\\\n create mode 100644 outputs/workspace_output_1767504884_7541.txt\\\\n create mode 100644 outputs/workspace_output_1767504887_6026.txt\\\\n create mode 100644 outputs/workspace_output_1767504891_7825.txt\\\\n create mode 100644 outputs/workspace_output_1767504905_9904.txt\\\\n create mode 100644 outputs/workspace_output_1767504908_5402.txt\\\\n create mode 100644 outputs/workspace_output_1767504912_467.txt\\\\n create mode 100644 outputs/workspace_output_1767504916_5734.txt\\\\n create mode 100644 outputs/workspace_output_1767504920_6155.txt\\\\n create mode 100644 outputs/workspace_output_1767504926_8513.txt\\\\n create mode 100644 outputs/workspace_output_JAVASCRIPT_SOURCE_MAP_4159.txt\\\\n create mode 100644 solo-fix-todo.md\\\\n create mode 100644 summarized_conversations/original_conversation_1767501444_967.txt\\\\n create mode 100644 summarized_conversations/original_conversation_1767501448_6711.txt\\\\n create mode 100644 summarized_conversations/original_conversation_1767502631_2974.txt\\\\n create mode 100644 summarized_conversations/original_conversation_1767502635_2975.txt\\\\n create mode 100644 summarized_conversations/original_conversation_1767502971_5258.txt\\\\nTo https://github.com/Dagde/DFP---NEO.git\\\\n   2074fc3..0813591  feature/comprehensive-build-algorithm -> feature/comprehensive-build-algorithm\\\\n",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}
