    // Smart name truncation for flights < 1.0 hour
    const isShortFlight = effectiveDuration < 1.0;
    
    const abbreviateName = (fullName: string) => {
      if (!fullName) return fullName;
      const parts = fullName.split(', ');
      if (parts.length !== 2) return fullName;
      
      const surname = parts[0];
      const firstName = parts[1];
      const firstInitial = firstName.charAt(0);
      
      return `${surname}, ${firstInitial}`;
    };

    // Apply name abbreviation for short flights
    const displayPicName = isShortFlight ? abbreviateName(picName || '') : picName;
    const displayStudentName = isShortFlight ? abbreviateName(studentName || '') : studentName;
    
    const isGroundEventFromName = event.flightNumber.includes('CPT') || event.flightNumber.includes('MB') || event.flightNumber.includes('TUT') || event.flightNumber.includes('QUIZ');
    
