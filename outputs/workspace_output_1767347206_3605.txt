            const savedEvent = {
                ...event,
                id: eventId,
                type: eventType,
                flightNumber,
                startTime: typeof startTime === 'string' ? convertTimeToDecimal(startTime) : startTime,
                resourceId,
                duration: typeof duration === 'number' ? duration : 0, // Ensure duration is a number
                area: eventType === 'flight' ? area : undefined,
                color: eventColor,
                flightType: c.flightType,
                instructor: c.instructor,
                student: c.student,
                pilot: c.pilot,
                group: c.group,
                groupTraineeIds: c.groupTraineeIds,
                locationType,
                origin: locationType === 'Local' ? school : origin,
                destination: locationType === 'Local' ? school : destination,
                formationType: flightNumber === 'SCT FORM' ? formationType : undefined,
                formationPosition: flightNumber === 'SCT FORM' ? index + 1 : undefined,
