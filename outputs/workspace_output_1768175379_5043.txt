
export async function initializeData() {
  console.log('ğŸ”§ initializeData() v2.2 - Starting data initialization');
  
    // Read data source settings from localStorage
    let dataSourceSettings = { staff: false, trainee: false, course: false };
    try {
      const settingsStr = localStorage.getItem('dataSourceSettings');
      if (settingsStr) {
        dataSourceSettings = JSON.parse(settingsStr);
      }
      console.log('ğŸ›ï¸ Data source settings:', dataSourceSettings);
    } catch (e) {
      console.log('âš ï¸ Could not read dataSourceSettings, using defaults');
    }
    
  let instructors: any[] = [];
  let trainees: any[] = [];
  let aircraft: any[] = [];
  let scores: Record<string, any[]> = {};
  let events: any[] = [];

  try {
    console.log('ğŸŒ Initializing data from API...');
    
    // Fetch instructors
    console.log('ğŸ‘¨â€ğŸ« Fetching instructors from API...');
    instructors = await fetchInstructors();
    console.log('âœ… Instructors loaded:', instructors.length);
      
      // Merge with mock data if staff toggle is ON
      if (dataSourceSettings.staff) {
        console.log('ğŸ”„ Staff toggle is ON - merging database + mock data');
        instructors = mergeInstructorData(instructors, ESL_DATA.instructors);
      }
      
    
    // Fetch trainees
    console.log('ğŸ‘¨â€ğŸ“ Fetching trainees from API...');
    trainees = await fetchTrainees();
    console.log('âœ… Trainees loaded:', trainees.length);
      
      // Merge with mock data if trainee toggle is ON
      if (dataSourceSettings.trainee) {
        console.log('ğŸ”„ Trainee toggle is ON - merging database + mock data');
        trainees = mergeTraineeData(trainees, ESL_DATA.trainees);
      }
      
    
    // Fetch aircraft
    console.log('âœˆï¸ Fetching aircraft from API...');
