  const getStudentDisplay = () => {
      if (isPreview) {
          return studentName;
      }

        // Debug logging for TWR DI events
        if (event.eventCategory === 'twr_di') {
            console.log('ğŸ” TWR DI EVENT:', {
                id: event.id,
                flightNumber: event.flightNumber,
                flightType: event.flightType,
                pilot: event.pilot,
                instructor: event.instructor,
                student: event.student
            });
        }

        // Check for SOLO flights - applies to ALL event types
        if (event.flightType === 'Solo') {
            return (
                <span className="bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold" style={{fontSize: isSmallTile ? '10px' : `${scaledFontSize * 0.85}px`}}>
                    SOLO
                </span>
            );
        }

      // For SCT Dual events, show crew name from student field
      if (isSctEvent && event.flightType === 'Dual' && event.student) {
          return event.student.split(' â€“ ')[0];
      }

        // FALLBACK: Detect SOLO flights by checking if pilot and student are the same person
        // This handles cases where flightType is not set correctly in the database
        if (event.pilot && event.student && event.pilot === event.student) {
            console.log('ğŸ¯ FALLBACK SOLO DETECTION: Pilot and student are the same:', event.pilot);
            return (
                <span className="bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold" style={{fontSize: isSmallTile ? '10px' : `${scaledFontSize * 0.85}px`}}>
                    SOLO
                </span>
            );
        }
      if ((event.groupTraineeIds && event.groupTraineeIds.length > 1) || 
          (event.attendees && event.attendees.length > 1) || 
          event.student === 'Multiple') {
          return 'Group';
      }
      
      if (event.student && event.student !== 'Multiple') {
          return event.student.split(' â€“ ')[0];
      }

