{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "fixed inset-0 bg-black/60 z-[999999] flex items-center justify-center\\\\",style:{zIndex:999999},onClick:t,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-2xl w-full max-w-6xl border border-gray-700 flex flex-col max-h-[90vh] relative\\\\",style:{zIndex:999999},onClick:x=>x.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900 rounded-t-lg\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-white\\\\",children:\\\\"Audit Log\\\\"}),e.jsxs(\\\\"p\\\\",{className:\\\\"text-sm text-gray-400 mt-1\\\\",children:[\\\\"Page: \\\\",n]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:v,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors\\\\",title:\\\\"Export to CSV\\\\",children:\\\\"Export CSV\\\\"}),e.jsx(\\\\"button\\\\",{onClick:m,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors\\\\",title:\\\\"Print Audit Log\\\\",children:\\\\"Print\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-gray-600 hover:bg-gray-700 rounded transition-colors\\\\",children:\\\\"Close\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 overflow-auto p-4\\\\",children:h.length===0?e.jsxs(\\\\"div\\\\",{className:\\\\"text-center py-12 text-gray-400\\\\",children:[e.jsx(\\\\"svg\\\\",{className:\\\\"mx-auto h-12 w-12 mb-4\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\\\\"})}),e.jsx(\\\\"p\\\\",{className:\\\\"text-lg font-medium\\\\",children:\\\\"No audit logs found\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"text-sm mt-2\\\\",children:\\\\"Activity on this page will be recorded here\\\\"})]}):e.jsx(\\\\"div\\\\",{className:\\\\"overflow-x-auto\\\\",children:e.jsxs(\\\\"table\\\\",{className:\\\\"w-full text-sm\\\\",children:[e.jsx(\\\\"thead\\\\",{className:\\\\"bg-gray-700 sticky top-0\\\\",children:e.jsxs(\\\\"tr\\\\",{children:[e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>f(\\\\"timestamp\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"Date/Time\\\\",o===\\\\"timestamp\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:d===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>f(\\\\"user\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"User\\\\",o===\\\\"user\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:d===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>f(\\\\"action\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"Action\\\\",o===\\\\"action\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:d===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Description\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Changes\\\\"})]})}),e.jsx(\\\\"tbody\\\\",{className:\\\\"bg-gray-800 divide-y divide-gray-700\\\\",children:h.map(x=>e.jsxs(\\\\"tr\\\\",{className:\\\\"hover:bg-gray-700/50\\\\",children:[e.jsxs(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap text-gray-300\\\\",children:[e.jsx(\\\\"div\\\\",{children:x.timestamp.toLocaleDateString()}),e.jsx(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:x.timestamp.toLocaleTimeString()})]}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap text-gray-300\\\\",children:x.user}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap\\\\",children:e.jsx(\\\\"span\\\\",{className:`px-2 py-1 text-xs font-medium rounded ${x.action===\\\\"View\\\\"?\\\\"bg-blue-900/50 text-blue-300\\\\":x.action===\\\\"Edit\\\\"?\\\\"bg-yellow-900/50 text-yellow-300\\\\":x.action===\\\\"Add\\\\"?\\\\"bg-green-900/50 text-green-300\\\\":x.action===\\\\"Delete\\\\"?\\\\"bg-red-900/50 text-red-300\\\\":x.action===\\\\"Archive\\\\"?\\\\"bg-purple-900/50 text-purple-300\\\\":x.action===\\\\"Restore\\\\"?\\\\"bg-cyan-900/50 text-cyan-300\\\\":\\\\"bg-gray-900/50 text-gray-300\\\\"}`,children:x.action})}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-300\\\\",children:x.description}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-400 text-sm\\\\",children:x.changes||\\\\"-\\\\"})]},x.id))})]})})}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-3 border-t border-gray-700 bg-gray-900 rounded-b-lg flex justify-between items-center\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:[\\\\"Total entries: \\\\",e.jsx(\\\\"span\\\\",{className:\\\\"font-medium text-white\\\\",children:h.length})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:[\\\\"Last updated: \\\\",new Date().toLocaleString()]})]})]})}),document.body)},Qa=({pageName:n,className:t=\\\\"\\\\"})=>{const[s,i]=C.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"button\\\\",{onClick:()=>i(!0),className:`inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-200 bg-gray-700/50 hover:bg-gray-600/50 rounded border border-gray-600 hover:border-gray-500 transition-colors ${t}`,title:\\\\"View Audit Log\\\\",children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-3.5 w-3.5 mr-1\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\\\\"})}),\\\\"Audit\\\\"]}),s&&e.jsx(F5,{pageName:n,onClose:()=>i(!1)})]})},P5=()=>({id:_r(),name:\\\\"New Primitive Currency\\\\",description:\\\\"\\\\",type:\\\\"primitive\\\\",isVisible:!0,validityDays:365,eventCodes:[],requiredCount:1,expiryRule:\\\\"LAST_EVENT_PLUS_PERIOD\\\\"}),R5=()=>({id:_r(),name:\\\\"New Composite Currency\\\\",description:\\\\"\\\\",type:\\\\"composite\\\\",isVisible:!0,expiryCalculation:\\\\"EARLIEST_CHILD\\\\",logicTree:{operator:\\\\"AND\\\\",children:[]}}),U5=({onBack:n,masterCurrencies:t,currencyRequirements:s,onSave:i,onDelete:o})=>{const[l,d]=C.useState([]),[u,f]=C.useState(null),[h,m]=C.useState(\\\\"\\\\"),[v,x]=C.useState(!1);C.useEffect(()=>{const H=[...t,...s];d(H),u&&!H.some(O=>O.id===u)&&f(null)},[t,s,u]);const y=C.useMemo(()=>l.filter(H=>H.name.toLowerCase().includes(h.toLowerCase())).sort((H,O)=>H.name.localeCompare(O.name)),[l,h]),T=C.useMemo(()=>l.find(H=>H.id===u)||null,[u,l]),E=H=>{d(O=>O.map(W=>W.id===H.id?H:W)),x(!0)},A=H=>{const O=H===\\\\"primitive\\\\"?P5():R5();d(W=>[...W,O]),f(O.id),x(!0)},_=()=>{if(!u)return;if(l.some(O=>{if(O.type===\\\\"composite\\\\"){const W=ne=>ne.children.some(V=>typeof V==\\\\"string\\\\"?V===u:W(V));return W(O.logicTree)}return!1})){alert(\\\\"This currency cannot be deleted because it is used as a dependency in another composite currency.\\\\");return}window.confirm(`Are you sure you want to delete \\\\"${T==null?void 0:T.name}\\\\"? This action cannot be undone.`)&&(o(u),f(null))},R=()=>{i(l),x(!1)};return e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex flex-col bg-gray-900 overflow-hidden h-full\\\\",children:[e.jsxs(\\\\"header\\\\",{className:\\\\"flex-shrink-0 bg-gray-800 p-4 flex justify-between items-center border-b border-gray-700\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"h1\\\\",{className:\\\\"text-2xl font-bold text-white\\\\",children:\\\\"Currency Builder\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:\\\\"Define primitive and composite currency rules.\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[v&&e.jsxs(\\\\"button\\\\",{onClick:R,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition-colors text-sm font-semibold shadow-md flex items-center space-x-2\\\\",children:[e.jsxs(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:[e.jsx(\\\\"path\\\\",{d:\\\\"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6a1 1 0 10-2 0v5.586L7.707 10.293z\\\\"}),e.jsx(\\\\"path\\\\",{d:\\\\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\\\\"})]}),e.jsx(\\\\"span\\\\",{children:\\\\"Save Changes\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm font-semibold shadow-md\\\\",children:\\\\"\\\\u2190 Back to Settings\\\\"}),e.jsx(Qa,{pageName:\\\\"Currency Builder\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex overflow-hidden\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"w-1/3 border-r border-gray-700 flex flex-col\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",placeholder:\\\\"Search currencies...\\\\",value:h,onChange:H=>m(H.target.value),className:\\\\"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex mt-2 space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>A(\\\\"primitive\\\\"),className:\\\\"flex-1 text-center py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-xs font-semibold\\\\",children:\\\\"+ Primitive\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>A(\\\\"composite\\\\"),className:\\\\"flex-1 text-center py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-xs font-semibold\\\\",children:\\\\"+ Composite\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 overflow-y-auto\\\\",children:y.map(H=>e.jsxs(\\\\"div\\\\",{draggable:!0,onDragStart:O=>{O.dataTransfer.setData(\\\\"application/currency-id\\\\",H.id),O.dataTransfer.effectAllowed=\\\\"copy\\\\"},onClick:()=>f(H.id),className:`p-3 cursor-pointer border-l-4 ${u===H.id?\\\\"bg-sky-700 border-sky-400\\\\":\\\\"border-transparent hover:bg-gray-700/50\\\\"}`,children:[e.jsx(\\\\"p\\\\",{className:`font-semibold ${H.type===\\\\"composite\\\\"?\\\\"text-purple-300\\\\":\\\\"text-green-300\\\\"}`,children:H.name}),e.jsx(\\\\"p\\\\",{className:\\\\"text-xs text-gray-400\\\\",children:H.description||\\\\"No description\\\\"})]},H.id))})]}),e.jsx(\\\\"div\\\\",{className:\\\\"w-2/3 overflow-y-auto p-6\\\\",children:T?e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-6\\\\",children:[T.type===\\\\"primitive\\\\"?e.jsx(B5,{currency:T,onUpdate:E}):e.jsx(O5,{currency:T,onUpdate:E,allCurrencies:l}),e.jsx($5,{currencyId:T.id,allCurrencies:l}),e.jsx(\\\\"div\\\\",{className:\\\\"pt-6 border-t border-gray-700\\\\",children:e.jsx(\\\\"button\\\\",{onClick:_,className:\\\\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-semibold\\\\",children:\\\\"Delete Currency\\\\"})})]}):e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center justify-center h-full text-gray-500 italic\\\\",children:\\\\"Select a currency to edit, or add a new one.\\\\"})})]})]})},B5=({currency:n,onUpdate:t})=>{const s=(i,o)=>{t({...n,[i]:o})};return e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-2xl font-bold text-green-400\\\\",children:\\\\"Edit Primitive Currency\\\\"}),e.jsx(ad,{label:\\\\"Name\\\\",value:n.name,onChange:i=>s(\\\\"name\\\\",i)}),e.jsx(ad,{label:\\\\"Description\\\\",value:n.description,onChange:i=>s(\\\\"description\\\\",i)}),e.jsx(jv,{label:\\\\"Visible in Main List\\\\",checked:n.isVisible,onChange:i=>s(\\\\"isVisible\\\\",i)}),e.jsx(ad,{label:\\\\"Validity (Days)\\\\",type:\\\\"number\\\\",value:n.validityDays,onChange:i=>s(\\\\"validityDays\\\\",Number(i))}),e.jsx(ad,{label:\\\\"Required Count\\\\",type:\\\\"number\\\\",value:n.requiredCount,onChange:i=>s(\\\\"requiredCount\\\\",Number(i))}),e.jsxs(Ev,{label:\\\\"Expiry Rule\\\\",value:n.expiryRule,onChange:i=>s(\\\\"expiryRule\\\\",i),children:[e.jsx(\\\\"option\\\\",{value:\\\\"LAST_EVENT_PLUS_PERIOD\\\\",children:\\\\"Last Event + Period\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"ROLLING_WINDOW\\\\",children:\\\\"Rolling Window\\\\"})]}),e.jsx(ad,{label:\\\\"Event Codes (comma-separated)\\\\",value:n.eventCodes.join(\\\\", \\\\"),onChange:i=>s(\\\\"eventCodes\\\\",i.split(\\\\",\\\\").map(o=>o.trim()).filter(Boolean))})]})},O5=({currency:n,onUpdate:t,allCurrencies:s})=>{const i=(l,d)=>{t({...n,[l]:d})},o=l=>{i(\\\\"logicTree\\\\",l)};return e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-2xl font-bold text-purple-400\\\\",children:\\\\"Edit Composite Currency\\\\"}),e.jsx(ad,{label:\\\\"Name\\\\",value:n.name,onChange:l=>i(\\\\"name\\\\",l)}),e.jsx(ad,{label:\\\\"Description\\\\",value:n.description,onChange:l=>i(\\\\"description\\\\",l)}),e.jsx(jv,{label:\\\\"Visible in Main List\\\\",checked:n.isVisible,onChange:l=>i(\\\\"isVisible\\\\",l)}),e.jsxs(Ev,{label:\\\\"Expiry Calculation\\\\",value:n.expiryCalculation,onChange:l=>i(\\\\"expiryCalculation\\\\",l),children:[e.jsx(\\\\"option\\\\",{value:\\\\"EARLIEST_CHILD\\\\",children:\\\\"Use Earliest Expiry\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"LATEST_CHILD\\\\",children:\\\\"Use Latest Expiry\\\\"})]}),e.jsx(Tv,{node:n.logicTree,path:[],onUpdate:o,allCurrencies:s})]})},Tv=({node:n,path:t,onUpdate:s,allCurrencies:i})=>{const o=v=>{v.preventDefault(),v.dataTransfer.dropEffect=\\\\"copy\\\\"},l=v=>{v.preventDefault();const x=v.dataTransfer.getData(\\\\"application/currency-id\\\\");if(x&&!n.children.includes(x)){const y=[...n.children,x];s({...n,children:y},t)}},d=(v,x)=>{const y=[...n.children];y[x]=v,s({...n,children:y},t)},u=v=>{const x=n.children.filter((y,T)=>T!==v);s({...n,children:x},t)},f=()=>{const v=[...n.children,\\\\"new_condition_placeholder\\\\"];s({...n,children:v},t)},h=()=>{const v={operator:\\\\"AND\\\\",children:[]},x=[...n.children,v];s({...n,children:x},t)},m=v=>{s({...n,operator:v},t)};return e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg bg-gray-700/30 space-y-3\\\\",onDragOver:o,onDrop:l,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center justify-between\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>m(\\\\"AND\\\\"),className:`px-3 py-1 text-xs font-bold rounded ${n.operator===\\\\"AND\\\\"?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-gray-300\\\\"}`,children:\\\\"ALL of these (AND)\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>m(\\\\"OR\\\\"),className:`px-3 py-1 text-xs font-bold rounded ${n.operator===\\\\"OR\\\\"?\\\\"bg-purple-600 text-white\\\\":\\\\"bg-gray-600 text-gray-300\\\\"}`,children:\\\\"ANY of these (OR)\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:f,className:\\\\"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded\\\\",children:\\\\"+ Condition\\\\"}),e.jsx(\\\\"button\\\\",{onClick:h,className:\\\\"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded\\\\",children:\\\\"+ Group\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-2 pl-4 border-l-2 border-gray-500\\\\",children:n.children.length>0?n.children.map((v,x)=>{var y;return e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center group\\\\",children:[typeof v==\\\\"string\\\\"?e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 p-2 bg-gray-800 rounded text-sm text-gray-300\\\\",children:((y=i.find(T=>T.id===v))==null?void 0:y.name)||\\\\"Unlinked Condition\\\\"}):e.jsx(Tv,{node:v,path:[...t,\\\\"children\\\\",x],onUpdate:(T,E)=>d(T,x),allCurrencies:i}),e.jsx(\\\\"button\\\\",{onClick:()=>u(x),className:\\\\"ml-2 p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\\\\",clipRule:\\\\"evenodd\\\\"})})})]},x)}):e.jsx(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500 italic p-4 text-center\\\\",children:\\\\"Drag currencies here or add conditions/groups.\\\\"})})]})},$5=({currencyId:n,allCurrencies:t})=>{const s=C.useMemo(()=>{const i=[],o=t.filter(l=>l.type===\\\\"composite\\\\");for(const l of o){const d=u=>u.children.some(f=>typeof f==\\\\"string\\\\"?f===n:d(f));d(l.logicTree)&&i.push(l.name)}return i},[n,t]);return s.length===0?null:e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg bg-gray-700/30\\\\",children:[e.jsx(\\\\"h3\\\\",{className:\\\\"text-sm font-semibold text-gray-300 mb-2\\\\",children:\\\\"Used In:\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"flex flex-wrap gap-2\\\\",children:s.map(i=>e.jsx(\\\\"span\\\\",{className:\\\\"px-2 py-1 bg-purple-800 text-purple-200 text-xs font-medium rounded-full\\\\",children:i},i))})]})},ad=({label:n,value:t,onChange:s,type:i=\\\\"text\\\\"})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:n}),e.jsx(\\\\"input\\\\",{type:i,value:t,onChange:o=>s(o.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\"})]}),jv=({label:n,checked:t,onChange:s})=>e.jsxs(\\\\"label\\\\",{className:\\\\"flex items-center space-x-3\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:t,onChange:i=>s(i.target.checked),className:\\\\"h-4 w-4 bg-gray-600 border-gray-500 rounded accent-sky-500\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"text-white\\\\",children:n})]}),Ev=({label:n,value:t,onChange:s,children:i})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:n}),e.jsx(\\\\"select\\\\",{value:t,onChange:o=>s(o.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\",children:i})]}),H5=()=>{Pn(\\\\"Program Schedule\\\\",\\\\"Add\\\\",\\\\"Added new flight event BGF5 for PLTOFF Smith\\\\",\\\\"Event: BGF5, Time: 0800, Duration: 1.2hrs, Instructor: SQNLDR Jones\\\\"),Pn(\\\\"Program Schedule\\\\",\\\\"Edit\\\\",\\\\"Modified flight event BGF3 start time\\\\",\\\\"Changed start time from 0900 to 1000\\\\"),Pn(\\\\"Program Schedule\\\\",\\\\"Delete\\\\",\\\\"Removed ground event for Course 301\\\\",\\\\"Event: Ground School, Time: 1400\\\\"),Pn(\\\\"Next Day Build\\\\",\\\\"View\\\\",\\\\"Viewed Next Day Build schedule for 2024-12-30\\\\",null),Pn(\\\\"Next Day Build\\\\",\\\\"Add\\\\",\\\\"Added SCT event for FLTLT Brown\\\\",\\\\"Event: SCT GF, Time: 0730, Type: Solo\\\\"),Pn(\\\\"Priorities\\\\",\\\\"Edit\\\\",\\\\"Updated course priority order\\\\",\\\\"Moved Course 302 above Course 301\\\\"),Pn(\\\\"Priorities\\\\",\\\\"Edit\\\\",\\\\"Changed flying window times\\\\",\\\\"Start: 0700 \\\\u2192 0730, End: 1700 \\\\u2192 1730\\\\"),console.log(\\\\"\\\\u2705 Test audit logs seeded successfully\\\\")},od=new Map,jo=(n,t,s)=>{const i=od.get(n);if(i){clearTimeout(i.timer);const o=t,l={...o,originalValues:i.originalParams.originalValues||o.originalValues,newValues:o.newValues},d=setTimeout(()=>{let u=t.changes;if(l.originalValues&&l.newValues){const f=[];if(l.originalValues.startTime!==void 0&&l.newValues.startTime!==void 0){const h=m=>{const v=Math.floor(m),x=Math.round((m-v)*60);return`${v.toString().padStart(2,\\\\"0\\\\")}${x.toString().padStart(2,\\\\"0\\\\")}`};f.push(`Start time: ${h(l.originalValues.startTime)} \\\\u2192 ${h(l.newValues.startTime)}`)}l.originalValues.resourceId!==void 0&&l.newValues.resourceId!==void 0&&f.push(`Resource: ${l.originalValues.resourceId} \\\\u2192 ${l.newValues.resourceId}`),u=f.join(\\\\", \\\\")}s(l.page,l.action,l.description,u),od.delete(n)},3e3);od.set(n,{timer:d,originalParams:i.originalParams,latestParams:l})}else{const o=setTimeout(()=>{s(t.page,t.action,t.description,t.changes),od.delete(n)},3e3),l=t;od.set(n,{timer:o,originalParams:l,latestParams:l})}},og=()=>{od.forEach(({timer:n})=>{clearTimeout(n)}),od.clear()},q5=\\\\"modulepreload\\\\",G5=function(n,t){return new URL(n,t).href},Jx={},oh=function(t,s,i){let o=Promise.resolve();if(s&&s.length>0){let d=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(x=>({status:\\\\"fulfilled\\\\",value:x}),x=>({status:\\\\"rejected\\\\",reason:x}))))};const u=document.getElementsByTagName(\\\\"link\\\\"),f=document.querySelector(\\\\"meta[property=csp-nonce]\\\\"),h=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute(\\\\"nonce\\\\"));o=d(s.map(m=>{if(m=G5(m,i),m in Jx)return;Jx[m]=!0;const v=m.endsWith(\\\\".css\\\\"),x=v?\\\'[rel=\\\\"stylesheet\\\\"]\\\':\\\\"\\\\";if(!!i)for(let E=u.length-1;E>=0;E--){const A=u[E];if(A.href===m&&(!v||A.rel===\\\\"stylesheet\\\\"))return}else if(document.querySelector(`link[href=\\\\"${m}\\\\"]${x}`))return;const T=document.createElement(\\\\"link\\\\");if(T.rel=v?\\\\"stylesheet\\\\":q5,v||(T.as=\\\\"script\\\\"),T.crossOrigin=\\\\"\\\\",T.href=m,h&&T.setAttribute(\\\\"nonce\\\\",h),document.head.appendChild(T),v)return new Promise((E,A)=>{T.addEventListener(\\\\"load\\\\",E),T.addEventListener(\\\\"error\\\\",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(d){const u=new Event(\\\\"vite:preloadError\\\\",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status===\\\\"rejected\\\\"&&l(u.reason);return t().catch(l)})},Av=({type:n,title:t,message:s,onConfirm:i,onCancel:o,confirmText:l=\\\\"OK\\\\",cancelText:d=\\\\"Cancel\\\\",variant:u=\\\\"info\\\\"})=>{const h=(()=>{switch(u){case\\\\"error\\\\":return{borderColor:\\\\"border-red-500/50\\\\",headerBg:\\\\"bg-red-900/20\\\\",titleColor:\\\\"text-red-400\\\\",iconColor:\\\\"text-red-400\\\\",confirmBg:\\\\"bg-red-600 hover:bg-red-700\\\\"};case\\\\"warning\\\\":return{borderColor:\\\\"border-amber-500/50\\\\",headerBg:\\\\"bg-amber-900/20\\\\",titleColor:\\\\"text-amber-400\\\\",iconColor:\\\\"text-amber-400\\\\",confirmBg:\\\\"bg-amber-600 hover:bg-amber-700\\\\"};case\\\\"success\\\\":return{borderColor:\\\\"border-green-500/50\\\\",headerBg:\\\\"bg-green-900/20\\\\",titleColor:\\\\"text-green-400\\\\",iconColor:\\\\"text-green-400\\\\",confirmBg:\\\\"bg-green-600 hover:bg-green-700\\\\"};default:return{borderColor:\\\\"border-sky-500/50\\\\",headerBg:\\\\"bg-sky-900/20\\\\",titleColor:\\\\"text-sky-400\\\\",iconColor:\\\\"text-sky-400\\\\",confirmBg:\\\\"bg-sky-600 hover:bg-sky-700\\\\"}}})(),m=()=>{switch(u){case\\\\"error\\\\":return e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\\\\"})});case\\\\"warning\\\\":return e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\\\\"})});case\\\\"success\\\\":return e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\\\\"})});default:return e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\\\\"})})}},v=()=>{i==null||i()},x=()=>{o==null||o()};return e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/70 z-[90] flex items-center justify-center animate-fade-in\\\\",onClick:x,children:e.jsxs(\\\\"div\\\\",{className:`bg-gray-800 rounded-lg shadow-xl w-full max-w-md border ${h.borderColor}`,onClick:y=>y.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:`p-4 border-b border-gray-700 ${h.headerBg} flex items-center space-x-3`,children:[e.jsx(\\\\"span\\\\",{className:h.iconColor,children:m()}),e.jsx(\\\\"h2\\\\",{className:`text-xl font-bold ${h.titleColor}`,children:t})]}),e.jsx(\\\\"div\\\\",{className:\\\\"p-6\\\\",children:e.jsx(\\\\"p\\\\",{className:\\\\"text-gray-300 whitespace-pre-line\\\\",children:s})}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-6 py-4 bg-gray-900/50 border-t border-gray-700 flex justify-end space-x-3\\\\",children:[n===\\\\"confirm\\\\"&&e.jsx(\\\\"button\\\\",{onClick:x,className:\\\\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm font-semibold\\\\",children:d}),e.jsx(\\\\"button\\\\",{onClick:v,className:`px-4 py-2 text-white rounded-md transition-colors text-sm font-semibold ${h.confirmBg}`,children:l})]})]})})};let Gu=null;const Xx=()=>(Gu||(Gu=document.createElement(\\\\"div\\\\"),Gu.id=\\\\"dark-modal-root\\\\",document.body.appendChild(Gu)),Gu),nf=(n,t=\\\\"Confirm Action\\\\",s=\\\\"info\\\\")=>new Promise(i=>{const o=()=>{const[d,u]=C.useState(!0),f=()=>{u(!1),setTimeout(()=>i(!0),300)},h=()=>{u(!1),setTimeout(()=>i(!1),300)};return d?wv.createPortal(e.jsx(Av,{type:\\\\"confirm\\\\",title:t,message:n,onConfirm:f,onCancel:h,variant:s}),Xx()):null},l=Ua.createElement(o);oh(async()=>{const{createRoot:d}=await Promise.resolve().then(()=>N5);return{createRoot:d}},void 0,import.meta.url).then(({createRoot:d})=>{d(Xx()).render(l)})}),z5=[\\\\"bg-sky-400/50\\\\",\\\\"bg-purple-400/50\\\\",\\\\"bg-yellow-400/50\\\\",\\\\"bg-pink-400/50\\\\",\\\\"bg-teal-400/50\\\\",\\\\"bg-indigo-400/50\\\\",\\\\"bg-cyan-400/50\\\\",\\\\"bg-fuchsia-400/50\\\\",\\\\"bg-blue-400/50\\\\"],V5=[\\\\"ADF\\\\",\\\\"FIC\\\\",\\\\"WSO\\\\",\\\\"IFIC\\\\",\\\\"OFI\\\\",\\\\"Pilot Conversion\\\\"],W5=[\\\\"\\\\",\\\\"GS\\\\"],Hd=({label:n,value:t,onChange:s,children:i,id:o})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:o,className:\\\\"block text-sm font-medium text-gray-400\\\\",children:n}),e.jsx(\\\\"select\\\\",{id:o,value:t,onChange:s,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",children:i})]}),kv=({onClose:n,onSave:t,existingCourses:s})=>{const[i,o]=C.useState(\\\\"ADF\\\\"),[l,d]=C.useState(\\\\"\\\\"),[u,f]=C.useState(\\\\"\\\\"),[h,m]=C.useState(\\\\"\\\\"),[v,x]=C.useState(\\\\"\\\\"),[y,T]=C.useState(\\\\"\\\\"),[E,A]=C.useState(0),[_,R]=C.useState(0),[H,O]=C.useState(0),W=C.useMemo(()=>{const $=new Set(Object.values(s));return z5.find(M=>!$.has(M))||\\\\"bg-gray-400/50\\\\"},[s]),ne=C.useMemo(()=>E+_+H,[E,_,H]),V=C.useMemo(()=>{const $=[],M=Object.keys(s).filter(P=>P.startsWith(\\\\"CSE \\\\")||P.startsWith(\\\\"ADF\\\\")).map(P=>P.replace(/^(CSE|ADF)\\\\\\\\s*/i,\\\\"\\\\"));for(let P=290;P<=500;P++)M.includes(String(P))||$.push(P);return $},[s]),U=C.useMemo(()=>Array.from({length:41},($,M)=>M),[]);C.useEffect(()=>{i===\\\\"ADF\\\\"&&V.length>0?d(String(V[0])):d(\\\\"\\\\")},[i,V]);const D=()=>{let $;if(i===\\\\"ADF\\\\"){if(!l){alert(\\\\"Please select an ADF course number.\\\\");return}$=`ADF${l}${h}`}else{const M=u.trim();if(!M){alert(\\\\"Please enter a course number.\\\\");return}$=`${i} ${M}${h}`}if(Object.keys(s).includes($)){alert(`Course \\\\"${$}\\\\" already exists.`);return}if(!v||!y){alert(\\\\"Please fill in all required date fields.\\\\");return}if(new Date(y)<=new Date(v)){alert(\\\\"Graduation date must be after the start date.\\\\");return}t({number:$,color:W,startDate:v,gradDate:y,raafStart:E,navyStart:_,armyStart:H})};return e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center animate-fade-in\\\\",onClick:n,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-lg border border-gray-700\\\\",onClick:$=>$.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-sky-400\\\\",children:\\\\"Add New Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"text-white hover:text-gray-300\\\\",\\\\"aria-label\\\\":\\\\"Close\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M6 18L18 6M6 6l12 12\\\\"})})})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-6 space-y-4 max-h-[70vh] overflow-y-auto\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-3 gap-4\\\\",children:[e.jsx(Hd,{label:\\\\"Course Type\\\\",id:\\\\"course-type\\\\",value:i,onChange:$=>o($.target.value),children:V5.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$},$))}),i===\\\\"ADF\\\\"?e.jsx(Hd,{label:\\\\"Course Number\\\\",id:\\\\"course-number\\\\",value:l,onChange:$=>d($.target.value),children:V.length>0?V.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$},$)):e.jsx(\\\\"option\\\\",{disabled:!0,children:\\\\"No courses available\\\\"})}):e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"manual-course-number\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Course Number\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",id:\\\\"manual-course-number\\\\",value:u,onChange:$=>f($.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",placeholder:\\\\"e.g., 210\\\\"})]}),e.jsx(Hd,{label:\\\\"Suffix\\\\",id:\\\\"suffix\\\\",value:h,onChange:$=>m($.target.value),children:W5.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$||\\\\"None\\\\"},$))})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Allocated Colour\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"mt-1 flex items-center space-x-2 p-2 bg-gray-700/50 rounded-md h-[38px]\\\\",children:[e.jsx(\\\\"div\\\\",{className:`w-5 h-5 rounded-full ${W}`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-white font-mono text-sm\\\\",children:W})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 gap-4\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"start-date\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Start Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",id:\\\\"start-date\\\\",value:v,onChange:$=>x($.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"grad-date\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Graduation Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",id:\\\\"grad-date\\\\",value:y,onChange:$=>T($.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]})]}),e.jsxs(\\\\"fieldset\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg\\\\",children:[e.jsx(\\\\"legend\\\\",{className:\\\\"px-2 text-sm font-semibold text-gray-300\\\\",children:\\\\"Initial Student Numbers\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2\\\\",children:[e.jsx(Hd,{label:\\\\"RAAF\\\\",id:\\\\"raaf-start\\\\",value:E,onChange:$=>A(parseInt($.target.value)),children:U.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$},$))}),e.jsx(Hd,{label:\\\\"Navy\\\\",id:\\\\"navy-start\\\\",value:_,onChange:$=>R(parseInt($.target.value)),children:U.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$},$))}),e.jsx(Hd,{label:\\\\"Army\\\\",id:\\\\"army-start\\\\",value:H,onChange:$=>O(parseInt($.target.value)),children:U.map($=>e.jsx(\\\\"option\\\\",{value:$,children:$},$))}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Total\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"mt-1 p-2 bg-gray-700/50 rounded-md text-white h-[38px] flex items-center justify-center font-semibold\\\\",children:ne})]})]})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Total Remaining on Course\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"mt-1 p-2 bg-gray-700/50 rounded-md text-white h-[38px] flex items-center font-semibold\\\\",children:ne}),e.jsx(\\\\"p\\\\",{className:\\\\"mt-1 text-xs text-gray-500\\\\",children:\\\\"This will be updated from Trainee profiles once they are assigned to this course.\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-6 py-4 bg-gray-800/50 border-t border-gray-700 flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:D,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition-colors text-sm font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed\\\\",children:\\\\"Save Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"px-4 py-2 bg-transparent border border-gray-600 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white transition-colors text-sm\\\\",children:\\\\"Cancel\\\\"})]})]})})},Y5=({onClose:n,onArchive:t,activeCourses:s})=>{const i=C.useMemo(()=>Object.keys(s),[s]),[o,l]=C.useState(i[0]||\\\\"\\\\"),d=()=>{o&&t(o)};return e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center animate-fade-in\\\\",onClick:n,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700\\\\",onClick:u=>u.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-amber-400\\\\",children:\\\\"Archive a Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"text-white hover:text-gray-300\\\\",\\\\"aria-label\\\\":\\\\"Close\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M6 18L18 6M6 6l12 12\\\\"})})})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-6 space-y-4\\\\",children:[e.jsx(\\\\"p\\\\",{className:\\\\"text-gray-300\\\\",children:\\\\"Which course would you like to move to the archive?\\\\"}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"course-to-archive\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Active Courses\\\\"}),e.jsx(\\\\"select\\\\",{id:\\\\"course-to-archive\\\\",value:o,onChange:u=>l(u.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",children:i.length>0?i.map(u=>e.jsx(\\\\"option\\\\",{value:u,children:u},u)):e.jsx(\\\\"option\\\\",{disabled:!0,children:\\\\"No active courses\\\\"})})]}),e.jsx(\\\\"p\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:\\\\"Archived courses are removed from the main list but are not deleted from the system.\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-6 py-4 bg-gray-800/50 border-t border-gray-700 flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:d,disabled:!o,className:\\\\"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition-colors text-sm font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed\\\\",children:\\\\"Archive Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"px-4 py-2 bg-transparent border border-gray-600 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white transition-colors text-sm\\\\",children:\\\\"Cancel\\\\"})]})]})})},Kx=n=>n.startsWith(\\\\"Course \\\\")?n.replace(\\\\"Course \\\\",\\\\"ADF\\\\"):n.replace(/^CSE\\\\\\\\s*/i,\\\\"ADF\\\\").replace(\\\\" \\\\",\\\\"\\\\"),J5=({activeView:n,onNavigate:t,courseColors:s,onAddCourse:i,onArchiveCourse:o,onNextDayBuildClick:l,onBuildDfpClick:d,isSupervisor:u,onPublish:f,currentUserName:h,currentUserRank:m,instructorsList:v,onUserChange:x})=>{const[y,T]=C.useState(!1),[E,A]=C.useState(!1),[_,R]=C.useState(!1),[H,O]=C.useState(\\\\"\\\\"),[W,ne]=C.useState(null),[V,U]=C.useState(!1),[D,$]=C.useState(\\\\"\\\\"),[M,P]=C.useState(\\\\"\\\\"),[ae,Q]=C.useState(!1),[Te,Y]=C.useState(!1),fe=C.useRef(null),[ge,Ne]=C.useState(!1),[Oe,se]=C.useState(!1),F=C.useRef(null),X=[\\\\"NextDayBuild\\\\",\\\\"Priorities\\\\",\\\\"ProgramData\\\\",\\\\"BuildAnalysis\\\\",\\\\"NextDayInstructorSchedule\\\\",\\\\"NextDayTraineeSchedule\\\\"].includes(n),[ee,K]=C.useState(X);C.useEffect(()=>{const Re=be=>{fe.current&&!fe.current.contains(be.target)&&(Y(!1),Q(!1)),F.current&&!F.current.contains(be.target)&&(se(!1),Ne(!1))};return document.addEventListener(\\\\"mousedown\\\\",Re),()=>{document.removeEventListener(\\\\"mousedown\\\\",Re)}},[]),C.useEffect(()=>{X&&K(!0)},[X]);const ue=()=>{K(Re=>!Re)},ye=[{id:\\\\"Syllabus\\\\",label:\\\\"Syllabus\\\\"},{id:\\\\"CourseProgress\\\\",label:\\\\"Course Progress\\\\"},{id:\\\\"TrainingRecords\\\\",label:\\\\"Training Records\\\\"}],Le=Re=>{i(Re),T(!1)},xe=Re=>{o(Re),A(!1)},pe=Re=>{if(Re.name===h){R(!1);return}ne(Re),U(!0),$(\\\\"\\\\"),P(\\\\"\\\\")},ce=()=>{W&&D===W.pin?(x(W.name),U(!1),R(!1),ne(null),$(\\\\"\\\\"),P(\\\\"\\\\")):P(\\\\"Invalid PIN\\\\")},_e=v.filter(Re=>Re.name.toLowerCase().includes(H.toLowerCase())||Re.rank.toLowerCase().includes(H.toLowerCase())||Re.unit&&Re.unit.toLowerCase().includes(H.toLowerCase())).reduce((Re,be)=>{const Ze=be.unit||\\\\"Unassigned\\\\";return Re[Ze]||(Re[Ze]=[]),Re[Ze].push(be),Re},{}),Z=[\\\\"1FTS\\\\",\\\\"CFS\\\\",\\\\"2FTS\\\\"],Fe=Object.keys(_e).sort((Re,be)=>{const Ze=Z.indexOf(Re),ot=Z.indexOf(be);return Ze!==-1&&ot!==-1?Ze-ot:Ze!==-1?-1:ot!==-1?1:Re.localeCompare(be)}),Xe=Object.entries(s),ft=5,tt=Xe.slice(0,ft),Ve=Xe.slice(ft,ft*2),nt=[\\\\"MyDashboard\\\\",\\\\"SupervisorDashboard\\\\"].includes(n),Ct=[\\\\"Instructors\\\\",\\\\"InstructorSchedule\\\\"].includes(n),xt=()=>Q(!0),dn=()=>{Te||Q(!1)},on=()=>{const Re=!Te;Y(Re),Re&&Q(!0)},st=Re=>{t(Re),Y(!1),Q(!1)},kt=ae||Te,Ge=[\\\\"CourseRoster\\\\",\\\\"TraineeSchedule\\\\"].includes(n),ht=()=>Ne(!0),vt=()=>{Oe||Ne(!1)},Ht=()=>{const Re=!Oe;se(Re),Re&&Ne(!0)},We=Re=>{t(Re),se(!1),Ne(!1)},we=ge||Oe;return e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"aside\\\\",{className:\\\\"w-[12.71rem] bg-gray-900 flex-shrink-0 flex flex-col border-r border-gray-700\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"h-16 flex items-center justify-center flex-shrink-0 px-4 border-b border-gray-800\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex w-full space-x-2 mt-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"MyDashboard\\\\"),className:`w-1/2 flex items-center justify-center text-center px-1 py-1 text-sm font-semibold rounded-md btn-aluminium-brushed ${n===\\\\"MyDashboard\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{className:\\\\"leading-tight\\\\",children:\\\\"My Dashboard\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>u&&t(\\\\"SupervisorDashboard\\\\"),disabled:!u,title:u?\\\\"View Supervisor Dashboard\\\\":\\\\"Access denied: Requires Flying Supervisor role.\\\\",className:`w-1/2 flex items-center justify-center text-center px-1 py-1 text-sm font-semibold rounded-md btn-aluminium-brushed ${n===\\\\"SupervisorDashboard\\\\"?\\\\"active\\\\":\\\\"\\\\"} ${u?\\\\"\\\\":\\\\"opacity-50 cursor-not-allowed\\\\"}`,children:e.jsx(\\\\"span\\\\",{className:\\\\"leading-tight\\\\",children:\\\\"Supervisor Dashboard\\\\"})})]})}),e.jsxs(\\\\"nav\\\\",{className:\\\\"flex-1 overflow-y-auto py-4 px-2 space-y-1\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"Program Schedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center space-x-3 btn-green-brushed rounded-md ${n===\\\\"Program Schedule\\\\"&&!nt?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"DFP\\\\"})}),e.jsxs(\\\\"div\\\\",{ref:fe,onMouseLeave:dn,children:[e.jsxs(\\\\"button\\\\",{onClick:on,onMouseEnter:xt,className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center justify-between btn-aluminium-brushed rounded-md ${(Ct||kt)&&!nt?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Staff\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${kt?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${kt?\\\\"max-h-40\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>st(\\\\"Instructors\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${n===\\\\"Instructors\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Staff Profile\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>st(\\\\"InstructorSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${n===\\\\"InstructorSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Staff Schedule\\\\"})]})})]}),e.jsxs(\\\\"div\\\\",{ref:F,onMouseLeave:vt,children:[e.jsxs(\\\\"button\\\\",{onClick:Ht,onMouseEnter:ht,className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center justify-between btn-aluminium-brushed rounded-md ${(Ge||we)&&!nt?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Trainee\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${we?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${we?\\\\"max-h-40\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>We(\\\\"CourseRoster\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${n===\\\\"CourseRoster\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Trainee Profile\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>We(\\\\"TraineeSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${n===\\\\"TraineeSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Trainee Schedule\\\\"})]})})]}),ye.map(Re=>e.jsx(\\\\"button\\\\",{onClick:()=>t(Re.id),className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center space-x-3 btn-aluminium-brushed rounded-md ${n===Re.id&&!nt?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{className:Re.id===\\\\"TrainingRecords\\\\"?\\\\"text-xs\\\\":\\\\"\\\\",children:Re.label})},Re.id)),e.jsxs(\\\\"div\\\\",{className:\\\\"pt-12\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:ue,className:`w-full text-left px-4 py-1 text-sm font-semibold flex items-center justify-between btn-aluminium-brushed rounded-md ${X?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Next Day Build\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${ee?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${ee?\\\\"max-h-96\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"NextDayBuild\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"NextDayBuild\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Program Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"NextDayInstructorSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"NextDayInstructorSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Staff Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"NextDayTraineeSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"NextDayTraineeSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Trainee Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"Priorities\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"Priorities\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Priorities\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"ProgramData\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"ProgramData\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Program Data\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"BuildAnalysis\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"BuildAnalysis\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Build Analysis\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:d,className:\\\\"w-full text-left px-4 py-1 text-sm font-semibold btn-orange-brushed rounded-md\\\\",children:e.jsx(\\\\"span\\\\",{children:\\\\"NEO - Build\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:f,className:\\\\"w-full text-left px-4 py-1 text-sm font-semibold btn-green-brushed rounded-md\\\\",children:e.jsx(\\\\"span\\\\",{children:\\\\"Publish\\\\"})})]})})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-shrink-0 border-t border-gray-700\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"px-2 py-2 space-y-2\\\\",children:e.jsx(\\\\"div\\\\",{children:e.jsx(\\\\"button\\\\",{onClick:()=>t(\\\\"Settings\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${n===\\\\"Settings\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Settings\\\\"})},\\\\"Settings\\\\")})}),e.jsxs(\\\\"div\\\\",{className:\\\\"border-t border-gray-700 flex-shrink-0\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"px-4 pt-4 mb-2 flex justify-between items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:\\\\"text-xs font-semibold text-gray-500 uppercase tracking-wider\\\\",children:\\\\"Courses\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-1\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>T(!0),className:\\\\"p-1 rounded bg-gray-700 hover:bg-gray-600 transition-colors\\\\",\\\\"aria-label\\\\":\\\\"Add course\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4 text-gray-300\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"button\\\\",{onClick:()=>A(!0),className:\\\\"p-1 rounded bg-gray-700 hover:bg-gray-600 transition-colors\\\\",\\\\"aria-label\\\\":\\\\"Archive course\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4 text-gray-300\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\\\\",clipRule:\\\\"evenodd\\\\"})})})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-4 pb-2 flex space-x-4\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 min-w-0\\\\",children:tt.map(([Re,be])=>e.jsxs(\\\\"div\\\\",{className:\\\\"py-1 flex items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:`h-3 w-3 rounded-full ${be} mr-3 flex-shrink-0`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-xs text-gray-300 truncate\\\\",children:Kx(Re)})]},Re))}),Ve.length>0&&e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 min-w-0\\\\",children:Ve.map(([Re,be])=>e.jsxs(\\\\"div\\\\",{className:\\\\"py-1 flex items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:`h-3 w-3 rounded-full ${be} mr-3 flex-shrink-0`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-xs text-gray-300 truncate\\\\",children:Kx(Re)})]},Re))})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-t border-gray-700 flex-shrink-0 flex justify-between items-center text-xs text-gray-500\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"relative\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:()=>R(!_),className:\\\\"flex items-center space-x-1 text-gray-500 hover:text-gray-300 transition-colors\\\\",children:[e.jsxs(\\\\"span\\\\",{className:\\\\"truncate\\\\",children:[m,\\\\" \\\\",h]}),e.jsx(\\\\"svg\\\\",{className:`h-3 w-3 transform transition-transform ${_?\\\\"rotate-180\\\\":\\\\"\\\\"}`,fill:\\\\"none\\\\",stroke:\\\\"currentColor\\\\",viewBox:\\\\"0 0 24 24\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M19 9l-7 7-7-7\\\\"})})]}),_&&e.jsxs(\\\\"div\\\\",{className:\\\\"absolute bottom-full left-0 mb-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-50\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-3 border-b border-gray-700\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",placeholder:\\\\"Search users...\\\\",value:H,onChange:Re=>O(Re.target.value),className:\\\\"w-full pl-8 pr-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:ring-1 focus:ring-sky-500\\\\"}),e.jsx(\\\\"svg\\\\",{className:\\\\"absolute left-5 top-5 h-4 w-4 text-gray-400\\\\",fill:\\\\"none\\\\",stroke:\\\\"currentColor\\\\",viewBox:\\\\"0 0 24 24\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:\\\\"max-h-60 overflow-y-auto\\\\",children:Fe.map(Re=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"div\\\\",{className:\\\\"px-3 py-2 bg-gray-900 border-b border-gray-700 sticky top-0\\\\",children:e.jsx(\\\\"span\\\\",{className:\\\\"text-xs font-semibold text-gray-400 uppercase\\\\",children:Re})}),_e[Re].map(be=>e.jsxs(\\\\"button\\\\",{onClick:()=>pe(be),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-700 transition-colors flex items-center justify-between ${be.name===h?\\\\"bg-gray-700 text-sky-400\\\\":\\\\"text-gray-300\\\\"}`,children:[e.jsxs(\\\\"span\\\\",{children:[be.rank,\\\\" \\\\",be.name]}),be.name===h&&e.jsx(\\\\"svg\\\\",{className:\\\\"h-4 w-4 text-sky-400\\\\",fill:\\\\"currentColor\\\\",viewBox:\\\\"0 0 20 20\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})]},be.name))]},Re))}),e.jsx(\\\\"div\\\\",{className:\\\\"p-2 border-t border-gray-700\\\\",children:e.jsx(\\\\"button\\\\",{onClick:()=>R(!1),className:\\\\"w-full px-3 py-1 text-sm text-gray-400 hover:text-gray-300\\\\",children:\\\\"Cancel\\\\"})})]})]}),e.jsx(\\\\"span\\\\",{children:\\\\"v1.0.0\\\\"})]})]})]}),y&&e.jsx(kv,{onClose:()=>T(!1),onSave:Le,existingCourses:s}),E&&e.jsx(Y5,{onClose:()=>A(!1),onArchive:xe,activeCourses:s}),V&&W&&e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/70 z-[90] flex items-center justify-center\\\\",onClick:()=>U(!1),children:e.jsx(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700\\\\",onClick:Re=>Re.stopPropagation(),children:e.jsxs(\\\\"div\\\\",{className:\\\\"p-6\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-white mb-4\\\\",children:\\\\"Confirm User Switch\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"mb-6\\\\",children:[e.jsxs(\\\\"p\\\\",{className:\\\\"text-gray-300 mb-2\\\\",children:[\\\\"Switch from \\\\",e.jsxs(\\\\"span\\\\",{className:\\\\"font-semibold text-sky-400\\\\",children:[m,\\\\" \\\\",h]}),\\\\" to:\\\\"]}),e.jsxs(\\\\"p\\\\",{className:\\\\"font-semibold text-white text-lg\\\\",children:[W.rank,\\\\" \\\\",W.name]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"mb-6\\\\",children:[e.jsxs(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400 mb-2\\\\",children:[\\\\"Enter PIN for \\\\",W.name,\\\\":\\\\"]}),e.jsx(\\\\"input\\\\",{type:\\\\"password\\\\",value:D,onChange:Re=>$(Re.target.value),onKeyPress:Re=>Re.key===\\\\"Enter\\\\"&&ce(),placeholder:\\\\"Enter PIN\\\\",className:\\\\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-1 focus:ring-sky-500\\\\",autoFocus:!0}),M&&e.jsx(\\\\"p\\\\",{className:\\\\"mt-2 text-sm text-red-400\\\\",children:M})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>{U(!1),ne(null),$(\\\\"\\\\"),P(\\\\"\\\\")},className:\\\\"px-4 py-2 text-gray-400 hover:text-gray-300\\\\",children:\\\\"Cancel\\\\"}),e.jsx(\\\\"button\\\\",{onClick:ce,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700\\\\",children:\\\\"Switch User\\\\"})]})]})})})]})},X5=({onAddTile:n,onAddGroundEvent:t,showValidation:s,setShowValidation:i,locations:o,activeLocation:l,onLocationChange:d,isMagnifierEnabled:u,setIsMagnifierEnabled:f,isMultiSelectMode:h,setIsMultiSelectMode:m,isOracleMode:v,onToggleOracleMode:x,showAircraftAvailability:y,onToggleAircraftAvailability:T,showDepartureDensityOverlay:E,onToggleDepartureDensityOverlay:A})=>e.jsx(e.Fragment,{children:e.jsxs(\\\\"header\\\\",{className:\\\\"bg-gray-800 h-16 flex-shrink-0 flex items-center justify-between px-4 z-20\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-32\\\\",children:e.jsx(\\\\"select\\\\",{value:l,onChange:_=>d(_.target.value),className:\\\\"bg-gray-700 border-gray-600 rounded-md text-white py-1 px-2 text-sm focus:ring-sky-500 focus:border-sky-500 focus:outline-none w-full text-center\\\\",children:o.map(_=>e.jsx(\\\\"option\\\\",{value:_,children:_},_))})}),e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:e.jsx(Qa,{pageName:\\\\"Program Schedule\\\\",className:\\\\"\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>m(!h),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${h?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,title:\\\\"Toggle multi-select mode\\\\",children:e.jsx(\\\\"img\\\\",{src:\\\\"./multi-select-icon.png\\\\",alt:\\\\"Multi-select mode\\\\",style:{height:\\\\"20px\\\\",width:\\\\"20px\\\\",display:\\\\"block\\\\"}})}),e.jsx(\\\\"button\\\\",{onClick:()=>f(!u),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${u?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,\\\\"aria-label\\\\":\\\\"Toggle Magnifier\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8zm6-3a1 1 0 011 1v2h2a1 1 0 110 2H9v2a1 1 0 11-2 0V9H5a1 1 0 110-2h2V6a1 1 0 011-1z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"button\\\\",{onClick:()=>i(!s),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${s?\\\\"bg-orange-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,title:\\\\"Toggle validation\\\\",children:e.jsx(\\\\"img\\\\",{src:\\\\"./warning-icon.png\\\\",alt:\\\\"Validation mode\\\\",style:{height:\\\\"20px\\\\",width:\\\\"20px\\\\",display:\\\\"block\\\\"}})}),e.jsx(\\\\"button\\\\",{onClick:A,className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${E?\\\\"bg-purple-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,title:\\\\"When enabled, shows a translucent overlay in Validate mode that counts flight start times within a 1-hour window (30 minutes before/after mouse position).\\\\",children:e.jsxs(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 24 24\\\\",fill:\\\\"none\\\\",stroke:\\\\"white\\\\",strokeWidth:\\\\"2\\\\",children:[e.jsx(\\\\"circle\\\\",{cx:\\\\"12\\\\",cy:\\\\"12\\\\",r:\\\\"10\\\\"}),e.jsx(\\\\"polyline\\\\",{points:\\\\"12,6 12,12 16,14\\\\"})]})}),T&&e.jsx(\\\\"button\\\\",{onClick:T,className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${y?\\\\"bg-pink-600\\\\":\\\\"bg-gray-600 hover:bg-gray-500\\\\"}`,title:\\\\"Toggle aircraft availability\\\\",children:e.jsx(\\\\"svg\\\\",{className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 24 24\\\\",fill:\\\\"none\\\\",stroke:\\\\"currentColor\\\\",strokeWidth:\\\\"2\\\\",children:e.jsx(\\\\"path\\\\",{d:\\\\"M12 2 L12 8 M12 8 L4 10 L4 12 L12 10 M12 8 L20 10 L20 12 L12 10 M12 10 L12 18 M10 18 L10 20 L14 20 L14 18\\\\",strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\"})})})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:x,className:`w-36 text-center py-1 rounded-md text-sm font-semibold transition-all duration-200 shadow-lg flex items-center justify-center space-x-2 ${v?\\\\"btn-gold-brushed active animate-pulse\\\\":\\\\"btn-gold-brushed\\\\"}`,children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{d:\\\\"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 0011 7v10zM4 17a1 1 0 001.447.894l4-2A1 1 0 0010 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 004 7v10z\\\\"})}),e.jsx(\\\\"span\\\\",{children:\\\\"Oracle\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"w-36 text-center py-1 rounded-md text-sm font-semibold btn-aluminium-brushed\\\\",children:\\\\"Add Ground Event\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"w-36 text-center py-1 rounded-md text-sm font-semibold btn-aluminium-brushed\\\\",children:\\\\"Add Tile\\\\"})]})})]})}),Yf=n=>{const t=Math.floor(n),s=Math.round(n%1*60);return`${String(t).padStart(2,\\\\"0\\\\")}:${String(s).padStart(2,\\\\"0\\\\")}`},K5=(n,t)=>{if(n.type!==\\\\"flight\\\\")return\\\\"\\\\";const s=new Date().toISOString().split(\\\\"T\\\\")[0];if(n.date!==s)return\\\\"\\\\";const i=!!(n.authoSignedBy&&n.captainSignedBy),o=!!(n.authoSignedBy||n.isVerbalAuth),l=!o&&!n.captainSignedBy;if(i)return\\\\"text-green-400\\\\";const d=t.getHours()+t.getMinutes()/60,u=n.startTime+n.duration;if(d>=u)return\\\\"\\\\";if(o&&!n.captainSignedBy)return\\\\"text-sky-400\\\\";if(l){const f=n.startTime-d;if(f<=.25)return\\\\"text-red-500\\\\";if(f<=2)return\\\\"text-amber-400\\\\"}return\\\\"\\\\"},Gc=({event:n,traineesData:t,onSelectEvent:s,onMouseDown:i,onMouseEnter:o,onMouseLeave:l,pixelsPerHour:d,rowHeight:u,startHour:f,row:h,isDragging:m,isConflicting:v,conflictedPersonnelName:x,personnelData:y,seatConfigs:T,isDraggable:E=!0,currentTime:A,isUnavailabilityConflict:_,unavailablePersonnel:R,isSelected:H=!1,isChanged:O=!1,isPreview:W=!1})=>{try{const Ge=T}catch{}const ne=n,V=ne.segmentStartTime!==void 0?ne.segmentStartTime:n.startTime,U=ne.segmentDuration!==void 0?ne.segmentDuration:n.duration,D=(U||0)*d,$=n.resourceId===\\\\"Duty Sup\\\\",M=D<60,ae=ne.segmentType===\\\\"start\\\\"||V+U>22,Q={left:`${(V-f)*d}px`,top:`${h*u}px`,width:`${D}px`,height:`${u-4}px`,marginTop:\\\\"2px\\\\"},Te=()=>{if(v||_)return\\\\"ring-red-400\\\\";const Ge=new Date().toISOString().split(\\\\"T\\\\")[0];if(n.date!==Ge)return\\\\"ring-transparent\\\\";if(!!(n.authoSignedBy&&n.captainSignedBy))return\\\\"ring-green-400\\\\";const vt=A.getHours()+A.getMinutes()/60,Ht=n.startTime+n.duration;if(vt>=Ht||!!(n.authoSignedBy||n.isVerbalAuth))return\\\\"ring-transparent\\\\";const we=n.startTime-vt;return we<=.25?\\\\"ring-red-500\\\\":we<=2?\\\\"ring-amber-400\\\\":\\\\"ring-transparent\\\\"},Y=7,fe=13;let Ne=11;D<120?Ne=Y:D<160?Ne=9:(D<220||D<239)&&(Ne=10),Ne=Math.max(Y,Math.min(fe,Ne));const X=n.eventCategory===\\\\"sct\\\\",ee=X||n.flightType===\\\\"Solo\\\\"?n.pilot:n.instructor,K=n.flightType===\\\\"Solo\\\\"?\\\\"\\\\":X?n.student:n.student||\\\\"\\\\";let ue=\\\\"font-semibold truncate\\\\",ye=\\\\"truncate\\\\";if(W)ee!=null&&ee.includes(\\\\"\\\\u2713\\\\")?ue=\\\\"font-bold truncate text-green-400\\\\":ee!=null&&ee.includes(\\\\"\\\\u2715\\\\")&&(ue=\\\\"font-bold truncate text-red-500\\\\"),K!=null&&K.includes(\\\\"\\\\u2713\\\\")?ye=\\\\"font-bold truncate text-green-400\\\\":K!=null&&K.includes(\\\\"\\\\u2715\\\\")&&(ye=\\\\"font-bold truncate text-red-500\\\\");else{const Ge=K5(n,A),ht=R&&R.includes(ee||\\\\"\\\\"),vt=R&&R.includes(K||\\\\"\\\\"),Ht=A.getHours()+A.getMinutes()/60,We=n.startTime+n.duration,we=Ht>=We&&n.date===new Date().toISOString().split(\\\\"T\\\\")[0];x===ee||ht&&!we?ue=\\\\"font-bold truncate text-red-500\\\\":Ge&&(ue+=` ${Ge}`),x===K||vt&&!we?ye=\\\\"font-bold truncate text-red-500\\\\":ye+=\\\\" text-white/80\\\\"}const xe=(()=>{if(W)return K;if(n.flightType===\\\\"Solo\\\\")return e.jsx(\\\\"span\\\\",{className:\\\\"bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold\\\\",style:{fontSize:M?\\\\"10px\\\\":`${Ne*.85}px`},children:\\\\"SOLO\\\\"});if(X&&!n.student&&n.pilot)return e.jsx(\\\\"span\\\\",{className:\\\\"bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold\\\\",style:{fontSize:M?\\\\"10px\\\\":`${Ne*.85}px`},children:\\\\"SOLO\\\\"});if(X&&n.flightType===\\\\"Dual\\\\"&&n.student)return n.student.split(\\\\" \\\\u2013 \\\\")[0];if(n.pilot&&n.student&&n.pilot===n.student)return e.jsx(\\\\"span\\\\",{className:\\\\"bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold\\\\",style:{fontSize:M?\\\\"10px\\\\":`${Ne*.85}px`},children:\\\\"SOLO\\\\"});if(n.groupTraineeIds&&n.groupTraineeIds.length>1||n.attendees&&n.attendees.length>1||n.student===\\\\"Multiple\\\\")return\\\\"Group\\\\";if(n.student&&n.student!==\\\\"Multiple\\\\")return n.student.split(\\\\" \\\\u2013 \\\\")[0];if(n.attendees&&n.attendees.length===1)return n.attendees[0].split(\\\\" \\\\u2013 \\\\")[0];if(n.groupTraineeIds&&n.groupTraineeIds.length===1){const Ge=t.find(ht=>ht.idNumber===n.groupTraineeIds[0]);return Ge?Ge.name.split(\\\\",\\\\")[0]:\\\\"Group\\\\"}return\\\\"\\\\"})(),pe=Ge=>{if(!Ge)return\\\\"\\\\";const ht=T.get(Ge);if(!ht)return\\\\"\\\\";switch(ht){case\\\\"Normal\\\\":return\\\\" (N)\\\\";case\\\\"FWD/SHORT\\\\":return\\\\" (F/S)\\\\";case\\\\"FWD/LONG\\\\":return\\\\" (F/L)\\\\";case\\\\"REAR/SHORT\\\\":return\\\\" (R/S)\\\\";default:return\\\\"\\\\"}},ce=pe(ee),He=pe(typeof xe==\\\\"string\\\\"?xe:\\\\"\\\\"),_e=n.callsign||\\\\"\\\\",Z=ee?y.get(ee):void 0,Fe=Z&&Z.callsignNumber>0?`${Z.callsignPrefix} ${String(Z.callsignNumber).padStart(3,\\\\"0\\\\")}`:\\\\"\\\\",Xe=n.flightType===\\\\"Solo\\\\";let ft=_e||Fe;if(Xe&&n.pilot){const Ge=t.find(ht=>ht.fullName===n.pilot);Ge!=null&&Ge.traineeCallsign&&(ft=Ge.traineeCallsign)}const tt=()=>{var Re,be;if(M)return null;const Ge={fontSize:`${Ne}px`,lineHeight:\\\\"1.3\\\\"},ht=U<=1.1,vt=Ze=>{if(!Ze)return Ze;const ot=Ze.split(\\\\", \\\\");if(ot.length!==2)return Ze;const Vt=ot[0],yn=ot[1].charAt(0);return`${Vt}, ${yn}`},Ht=ht?vt(ee||\\\\"\\\\"):ee,We=ht?vt(K||\\\\"\\\\"):K,we=n.flightNumber.includes(\\\\"CPT\\\\")||n.flightNumber.includes(\\\\"MB\\\\")||n.flightNumber.includes(\\\\"TUT\\\\")||n.flightNumber.includes(\\\\"QUIZ\\\\");return n.type===\\\\"deployment\\\\"?e.jsx(\\\\"div\\\\",{className:\\\\"flex justify-center items-center h-full w-full px-2\\\\",style:Ge,children:e.jsxs(\\\\"div\\\\",{className:\\\\"overflow-hidden text-center\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"text-white/80 font-medium text-sm\\\\",children:\\\\"DEPLOYMENT\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-white/60 truncate\\\\",children:\\\\"deployed\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"text-xs text-white/50 mt-1\\\\",children:[(Re=n.deploymentStartTime)==null?void 0:Re.replace(/:/g,\\\\"\\\\"),\\\\" - \\\\",(be=n.deploymentEndTime)==null?void 0:be.replace(/:/g,\\\\"\\\\")]})]})}):n.type===\\\\"unavailability\\\\"?e.jsx(\\\\"div\\\\",{className:\\\\"flex justify-center items-center h-full w-full px-2\\\\",style:Ge,children:e.jsxs(\\\\"div\\\\",{className:\\\\"overflow-hidden text-center\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"text-red-300 font-medium text-sm\\\\",children:\\\\"UNAVAILABLE\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-red-400 truncate\\\\",children:(n.reason||\\\\"Other\\\\").toUpperCase()}),n.notes&&e.jsx(\\\\"div\\\\",{className:\\\\"text-xs text-red-500 mt-1 truncate\\\\",children:n.notes})]})}):n.type===\\\\"ftd\\\\"||n.type===\\\\"ground\\\\"||we?$?e.jsx(\\\\"div\\\\",{className:\\\\"flex justify-center items-center h-full w-full px-2\\\\",style:Ge,children:e.jsxs(\\\\"div\\\\",{className:\\\\"overflow-hidden text-center\\\\",children:[e.jsxs(\\\\"div\\\\",{className:ue,children:[ee==null?void 0:ee.split(\\\\" \\\\u2013 \\\\")[0],ce&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:ce})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 truncate\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Ne-2}px`},children:[\\\\"[\\\\",(n.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",n.flightNumber]})]})}):e.jsxs(\\\\"div\\\\",{className:\\\\"flex justify-between items-center h-full w-full px-2\\\\",style:Ge,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 overflow-hidden pr-1\\\\",style:{paddingLeft:\\\\"10%\\\\",minWidth:0},children:[e.jsxs(\\\\"div\\\\",{className:ue.replace(\\\\"truncate\\\\",\\\\"overflow-hidden text-ellipsis whitespace-nowrap\\\\"),children:[Ht==null?void 0:Ht.split(\\\\" \\\\u2013 \\\\")[0],ce&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:ce})]}),e.jsx(\\\\"div\\\\",{className:ye.replace(\\\\"truncate\\\\",\\\\"overflow-hidden text-ellipsis whitespace-nowrap\\\\"),children:typeof xe==\\\\"string\\\\"?e.jsxs(e.Fragment,{children:[We==null?void 0:We.split(\\\\" \\\\u2013 \\\\")[0],He&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:He})]}):xe})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex flex-col items-end justify-between h-full pl-1 flex-shrink-0\\\\",style:{minWidth:\\\\"fit-content\\\\"},children:[e.jsx(\\\\"div\\\\",{children:e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 text-right whitespace-nowrap\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Ne-2}px`},children:[\\\\"[\\\\",(n.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",n.flightNumber]})}),e.jsx(\\\\"div\\\\",{})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center justify-between h-full w-full px-2\\\\",style:Ge,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 overflow-hidden pr-1\\\\",style:{paddingLeft:\\\\"10%\\\\",minWidth:0},children:[e.jsxs(\\\\"div\\\\",{className:ue.replace(\\\\"truncate\\\\",\\\\"overflow-hidden text-ellipsis whitespace-nowrap\\\\"),children:[Ht==null?void 0:Ht.split(\\\\" \\\\u2013 \\\\")[0],ce&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:ce})]}),e.jsx(\\\\"div\\\\",{className:ye.replace(\\\\"truncate\\\\",\\\\"overflow-hidden text-ellipsis whitespace-nowrap\\\\"),children:typeof xe==\\\\"string\\\\"?e.jsxs(e.Fragment,{children:[We==null?void 0:We.split(\\\\" \\\\u2013 \\\\")[0],He&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:He})]}):xe})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex flex-col items-end justify-between h-full pl-1 flex-shrink-0\\\\",style:{minWidth:\\\\"fit-content\\\\"},children:e.jsx(\\\\"div\\\\",{children:e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 text-right whitespace-nowrap\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Ne-2}px`},children:[\\\\"[\\\\",(n.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",n.flightNumber]})})})]}),n.aircraftNumber&&e.jsxs(\\\\"div\\\\",{className:\\\\"absolute bottom-0.5 left-1 font-mono text-white/80\\\\",style:{fontSize:`${Ne-2}px`,lineHeight:\\\\"1\\\\",opacity:.8},children:[\\\\"#\\\\",n.aircraftNumber]}),e.jsxs(\\\\"div\\\\",{className:\\\\"absolute bottom-0.5 right-3 flex items-center gap-1\\\\",children:[n.area&&e.jsx(\\\\"div\\\\",{className:`font-sans font-light ${[\\\\"A\\\\",\\\\"B\\\\",\\\\"C\\\\",\\\\"D\\\\",\\\\"E\\\\",\\\\"F\\\\",\\\\"G\\\\",\\\\"H\\\\"].includes(n.area)?\\\\"text-white\\\\":\\\\"text-yellow-300\\\\"}`,style:{fontSize:`${Ne}px`,lineHeight:\\\\"1\\\\",opacity:.7},children:n.area}),ft&&e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-white/80\\\\",style:{fontSize:`${Ne-2}px`,lineHeight:\\\\"1\\\\",opacity:.8},children:ft})]})]})},Ke=`absolute rounded-sm ${E?\\\\"cursor-grab\\\\":\\\\"cursor-pointer\\\\"} transition-all duration-200 ${m?\\\\"opacity-80 z-50\\\\":\\\\"z-10\\\\"} ${m?\\\\"shadow-xl\\\\":\\\\"shadow-md\\\\"}`,nt=n.resourceId&&(n.resourceId.startsWith(\\\\"STBY\\\\")||n.resourceId.startsWith(\\\\"BNF-STBY\\\\")),Ct=n.type===\\\\"deployment\\\\"?\\\\"bg-gray-600/30 border border-white/60\\\\":n.type===\\\\"unavailability\\\\"?\\\\"bg-red-900/80 border border-red-600/60\\\\":_?\\\\"bg-red-800/90\\\\":v?\\\\"bg-red-600/70\\\\":n.color,xt=Te(),dn=$?\\\\"border border-black\\\\":\\\\"\\\\",on=H?\\\\"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900\\\\":\\\\"\\\\",st=[Ke];W?(st.push(n.color),st.push(\\\\"border-2 border-dashed border-sky-300\\\\")):(st.push(Ct),st.push(`ring-[0.92px] ${xt}`),st.push(dn),st.push(on)),M||st.push(\\\\"overflow-hidden\\\\");const kt=()=>{if(!M)return null;const Ge={position:\\\\"absolute\\\\",top:0,[ae?\\\\"right\\\\":\\\\"left\\\\"]:\\\\"100%\\\\",marginLeft:ae?0:\\\\"4px\\\\",marginRight:ae?\\\\"4px\\\\":0,whiteSpace:\\\\"nowrap\\\\",zIndex:60};return e.jsx(\\\\"div\\\\",{style:Ge,className:\\\\"flex items-center\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 border border-gray-600 rounded px-2 py-1 shadow-lg flex items-center space-x-3 text-xs\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsxs(\\\\"div\\\\",{className:`font-bold ${ue.replace(\\\\"truncate\\\\",\\\\"\\\\")}`,children:[ee==null?void 0:ee.split(\\\\" \\\\u2013 \\\\")[0],ce&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:ce})]}),e.jsx(\\\\"div\\\\",{className:ye.replace(\\\\"truncate\\\\",\\\\"\\\\"),children:typeof xe==\\\\"string\\\\"?e.jsxs(e.Fragment,{children:[xe,He&&e.jsx(\\\\"span\\\\",{style:{fontWeight:\\\\"normal\\\\",color:\\\\"rgba(255, 255, 255, 0.8)\\\\"},children:He})]}):xe})]}),e.jsx(\\\\"div\\\\",{className:\\\\"h-6 w-px bg-gray-600\\\\"}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"div\\\\",{className:\\\\"font-mono font-semibold text-sky-400\\\\",children:n.flightNumber}),e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-gray-400\\\\",children:Yf(V)})]}),ft&&e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-gray-500 text-[10px]\\\\",children:ft})]})})};return e.jsxs(\\\\"div\\\\",{\\\\"data-is-flight-tile\\\\":\\\\"true\\\\",style:Q,className:st.join(\\\\" \\\\"),onClick:s,onMouseDown:Ge=>{Ge.stopPropagation(),i(Ge)},onMouseEnter:o,onMouseLeave:l,children:[O&&!W&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute right-0 top-0 bottom-0 w-1.5 changed-bar-stripes z-20 pointer-events-none\\\\"}),nt&&!W&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute inset-0 pointer-events-none z-10\\\\",style:{backgroundImage:\\\\"repeating-linear-gradient(45deg, rgba(209, 213, 219, 0.4) 0px, rgba(209, 213, 219, 0.4) 3px, transparent 3px, transparent 8px)\\\\"}}),n.isCancelled&&!W&&e.jsxs(\\\\"svg\\\\",{className:\\\\"absolute inset-0 pointer-events-none z-20\\\\",style:{width:\\\\"100%\\\\",height:\\\\"100%\\\\"},children:[e.jsx(\\\\"line\\\\",{x1:\\\\"0\\\\",y1:\\\\"0\\\\",x2:\\\\"100%\\\\",y2:\\\\"100%\\\\",stroke:\\\\"rgb(239, 68, 68)\\\\",strokeWidth:\\\\"2\\\\"}),e.jsx(\\\\"line\\\\",{x1:\\\\"100%\\\\",y1:\\\\"0\\\\",x2:\\\\"0\\\\",y2:\\\\"100%\\\\",stroke:\\\\"rgb(239, 68, 68)\\\\",strokeWidth:\\\\"2\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"relative w-full h-full text-white\\\\",children:[$?e.jsxs(e.Fragment,{children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1 left-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Ne*.825}px`},children:Yf(V)}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1 right-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Ne*.825}px`},children:Yf(V+U)})]}):!M&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-px left-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Ne*.75}px`},children:Yf(V)}),tt(),kt()]})]})},Zx=n=>!n||typeof n!=\\\\"string\\\\"?\\\\"Other\\\\":n.startsWith(\\\\"PC-21\\\\")||n.startsWith(\\\\"Deployed\\\\")?\\\\"PC-21\\\\":n.startsWith(\\\\"STBY\\\\")?\\\\"STBY\\\\":n===\\\\"Duty Sup\\\\"?\\\\"Duty Sup\\\\":n===\\\\"TWR DI\\\\"?\\\\"TWR DI\\\\":n.startsWith(\\\\"FTD\\\\")?\\\\"FTD\\\\":n.startsWith(\\\\"CPT\\\\")?\\\\"CPT\\\\":n.startsWith(\\\\"Ground\\\\")?\\\\"Ground\\\\":\\\\"Other\\\\",Dv=({resources:n,onReorder:t,rowHeight:s,airframeCount:i,standbyCount:o,ftdCount:l,cptCount:d,events:u=[]})=>{const[f,h]=C.useState(null),m=E=>{h(E)},v=E=>{E.preventDefault()},x=E=>{if(f===null||f===E){h(null);return}const A=[...n],_=A.splice(f,1)[0];A.splice(E,0,_),t(A),h(null)},y=[];for(let E=1;E<=24;E++)y.push(`PC-21 ${E}`);y.push(\\\\"Duty Sup\\\\"),y.push(\\\\"TWR DI\\\\");let T=4;if(u.length>0){const E=u.filter(_=>(_==null?void 0:_.resourceId)&&(_.resourceId.startsWith(\\\\"STBY\\\\")||_.resourceId.startsWith(\\\\"BNF-STBY\\\\"))),A=new Set(E.map(_=>_.resourceId));T=Math.max(A.size,4)}for(let E=0;E<T;E++)y.push(\\\\"STBY\\\\");for(let E=0;E<5;E++)y.push(\\\\"FTD\\\\");for(let E=0;E<4;E++)y.push(\\\\"CPT\\\\");if(u.length>0){const E=u.filter(_=>(_==null?void 0:_.resourceId)&&_.resourceId.startsWith(\\\\"Ground\\\\"));new Set(E.map(_=>_.resourceId)).forEach(()=>y.push(\\\\"Ground\\\\"))}return e.jsx(\\\\"div\\\\",{className:\\\\"w-36 bg-gray-800 flex-shrink-0 h-full\\\\",children:e.jsx(\\\\"ul\\\\",{children:y.map((E,A)=>{var P;let _=E,R=\\\\"text-gray-400\\\\",H=!0;E===\\\\"Duty Sup\\\\"?(R=\\\\"text-amber-300 font-semibold\\\\",H=!1):E===\\\\"TWR DI\\\\"?(R=\\\\"text-green-300 font-semibold\\\\",H=!1):E.startsWith(\\\\"Deployed\\\\")?(R=\\\\"text-purple\\\\nbg-purple-500/20 pointer-events-none\\\\",style:{left:`${O}px`,width:`${W-O}px`}})]})},sr=200,zi=32,ur=0,El=24,tw=El-ur,ey=144,ty=40,nw=(n,t)=>{if(!n||!t||n.duration<=0||t.duration<=0)return!1;const s=n.startTime+n.duration,i=t.startTime+t.duration;return n.startTime<i&&s>t.startTime},Y0=n=>{const t=[];return n.flightType===\\\\"Solo\\\\"?n.pilot&&t.push(n.pilot):(n.instructor&&t.push(n.instructor),n.student&&t.push(n.student)),n.attendees&&t.push(...n.attendees),t},sw=(n,t)=>{if(!t)return!1;const s=t.find(o=>o.id===n.id);if(!s)return!0;const i=.001;return Math.abs(n.startTime-s.startTime)>i||Math.abs(n.duration-s.duration)>i?!0:n.resourceId!==s.resourceId||n.instructor!==s.instructor||n.student!==s.student||n.pilot!==s.pilot||(n.area||\\\\"\\\\")!==(s.area||\\\\"\\\\")},ny=n=>n.startsWith(\\\\"PC-21\\\\")||n.startsWith(\\\\"Deployed\\\\")?\\\\"PC-21\\\\":n.startsWith(\\\\"STBY\\\\")?\\\\"STBY\\\\":n===\\\\"Duty Sup\\\\"?\\\\"Duty Sup\\\\":n===\\\\"TWR DI\\\\"?\\\\"TWR DI\\\\":n.startsWith(\\\\"FTD\\\\")?\\\\"FTD\\\\":n.startsWith(\\\\"CPT\\\\")?\\\\"CPT\\\\":n.startsWith(\\\\"Ground\\\\")?\\\\"Ground\\\\":\\\\"Other\\\\",rw=({date:n,onDateChange:t,events:s,resources:i,instructors:o,traineesData:l,airframeCount:d,standbyCount:u,ftdCount:f,cptCount:h,onUpdateEvent:m,onSelectEvent:v,onReorderResources:x,zoomLevel:y,showValidation:T,showPrePost:E,syllabusDetails:A,personnelData:_,seatConfigs:R,daylightTimes:H,personnelConflicts:O,personnelConflictIds:W,unavailabilityConflicts:ne,onCptConflict:V,isMultiSelectMode:U,selectedEventIds:D,setSelectedEventIds:$,baselineEvents:M,isVisualAdjustMode:P=!1,visualAdjustEvent:ae=null,onVisualAdjustTimeChange:Q,isOracleMode:Te,oraclePreviewEvent:Y,onOracleMouseDown:fe,onOracleMouseMove:ge,onOracleMouseUp:Ne,detectConflictsForEvent:Oe,showDepartureDensityOverlay:se,showAircraftAvailability:F,plannedAvailability:J,dayFlyingStart:X,dayFlyingEnd:ee,onAvailabilityChange:K,timezoneOffset:ue=11})=>{const ye=C.useRef(null),Le=C.useRef(null),[xe,pe]=C.useState(()=>{const Tt=new Date,lt=ue*60*60*1e3;return new Date(Tt.getTime()+lt)}),ce=C.useRef(!0),He=C.useRef(y);C.useEffect(()=>{const Tt=()=>{const Et=new Date,Bt=ue*60*60*1e3,Kt=new Date(Et.getTime()+Bt);pe(Kt)};Tt();const lt=setInterval(Tt,1e3);return()=>clearInterval(lt)},[ue]);const[_e,Z]=C.useState(null),[Fe,Xe]=C.useState(null),[ft,tt]=C.useState(null),[Ve,Ke]=C.useState(null),nt=C.useRef(!1),Ct=C.useRef(null),[xt,dn]=C.useState(null),[on,st]=C.useState(null);C.useEffect(()=>{const Tt=setInterval(()=>{const Bt=new Date,Kt=ue*60*60*1e3,Mt=new Date(Bt.getTime()+Kt);pe(Mt)},1e3),lt=Bt=>{_e&&(console.log(\\\\"Global mouse move - drag state active\\\\"),vt(Bt))},Et=Bt=>{console.log(\\\\"Global mouse up called, draggingState exists:\\\\",!!_e),_e&&(console.log(\\\\"Global mouse up - ending drag\\\\"),document.body.classList.remove(\\\\"no-select\\\\"),Z(null),Xe(null),tt(null),Ke(null))};return document.addEventListener(\\\\"mousemove\\\\",lt),document.addEventListener(\\\\"mouseup\\\\",Et),()=>{clearInterval(Tt),document.removeEventListener(\\\\"mousemove\\\\",lt),document.removeEventListener(\\\\"mouseup\\\\",Et)}},[_e]);const kt=C.useMemo(()=>{const[Tt,lt,Et]=n.split(\\\\"-\\\\").map(Number);return new Date(Date.UTC(Tt,lt-1,Et)).toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\",timeZone:\\\\"UTC\\\\"})},[n]);C.useEffect(()=>{const Tt=ye.current;if(Tt){if(ce.current){const Et=(8-ur)*sr*y;Tt.scrollLeft=Et,ce.current=!1}else{const lt=He.current;if(lt===y)return;const{scrollLeft:Et,clientWidth:Bt}=Tt,Mt=(Et+Bt/2)/(sr*lt)*sr*y-Bt/2;Tt.scrollLeft=Mt}He.current=y}},[y]);const Ge=C.useCallback((Tt,lt)=>{for(const Et of Tt){const Bt=A.find(ze=>ze.id===Et.flightNumber);if(!Bt)continue;const Kt=Et.startTime-(Bt.preFlightTime||0),Mt=Et.startTime+Et.duration+(Bt.postFlightTime||0);for(const ze of lt){const qt=A.find(je=>je.id===ze.flightNumber);if(!qt)continue;const Mn=ze.startTime-(qt.preFlightTime||0),jn=ze.startTime+ze.duration+(qt.postFlightTime||0);if(Kt<jn&&Mt>Mn){const je=Y0(Et),$e=Y0(ze),Ye=je.find(Dt=>$e.includes(Dt));if(Ye)return{conflictingEvent:ze,personName:Ye}}}}return null},[A]),ht=(Tt,lt)=>{if(console.log(\\\\"handleMouseDown called, event:\\\\",lt==null?void 0:lt.id,\\\\"isMultiSelectMode:\\\\",U),console.log(\\\\"Event target:\\\\",Tt.target),console.log(\\\\"Current target:\\\\",Tt.currentTarget),Tt.button===0){if(nt.current=!1,document.body.classList.add(\\\\"no-select\\\\"),Te&&!lt){if(!Le.current)return;const Et=Le.current.getBoundingClientRect(),Kt=(Tt.clientX-Et.left)/(sr*y)+ur,Mt=Tt.clientY-Et.top,ze=Math.floor(Mt/zi),qt=i[ze]||i[0];fe(Kt,qt);return}if(lt){const Bt=Tt.currentTarget.getBoundingClientRect(),Kt=new Map,Mt=new Map,ze=qt=>{console.log(\\\\"\\\\ud83d\\\\udc0d Processing event for drag:\\\\",qt.id,\\\\"resourceId:\\\\",qt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Available resources:\\\\",i);const Mn=i.indexOf(qt.resourceId);console.log(\\\\"\\\\ud83d\\\\udc0d Found row index:\\\\",Mn),Mn!==-1?(Kt.set(qt.id,{startTime:qt.startTime,rowIndex:Mn}),Mt.set(qt.id,qt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Event added to initialPositions\\\\")):console.log(\\\\"\\\\ud83d\\\\udc0d Event NOT added - resourceId not found in resources\\\\")};U&&D.has(lt.id)?D.forEach(qt=>{const Mn=s.find(jn=>jn.id===qt);Mn&&ze(Mn)}):ze(lt),Kt.size>0?(console.log(\\\\"Setting dragging state with\\\\",Kt.size,\\\\"events for event:\\\\",lt.id),console.log(\\\\"initialPositions:\\\\",Kt),Z({mainEventId:lt.id,xOffset:(Tt.clientX-Bt.left)/y,yOffset:Tt.clientY-Bt.top,initialPositions:Kt,originalResourceIds:Mt}),console.log(\\\\"setDraggingState called with:\\\\",_e)):console.log(\\\\"No initial positions - drag state not set\\\\")}else{if(!U||!Le.current)return;const Et=Le.current.getBoundingClientRect(),Bt=Tt.clientX-Et.left,Kt=Tt.clientY-Et.top;Ct.current={x:Bt,y:Kt},dn({x:Bt,y:Kt,width:0,height:0})}}},vt=Tt=>{if(console.log(\\\\"handleMouseMove called, draggingState exists:\\\\",!!_e),!Le.current){console.log(\\\\"Early return: no scheduleGridRef\\\\");return}nt.current=!0;const lt=Le.current.getBoundingClientRect(),Et=Tt.clientX-lt.left,Bt=Tt.clientY-lt.top;if(T){const Kt=Et/(sr*y)+ur;st(Kt)}if(Te&&Y){console.log(\\\\"Early return: Oracle mode with preview event\\\\");const Kt=Et/(sr*y)+ur,Mt=i[Math.floor(Bt/zi)]||i[0];ge(Kt,Mt)}else{if(Ct.current){console.log(\\\\"Early return: selectionStartPoint active (marquee selection)\\\\");const Ye=Tt.clientX-lt.left,Dt=Tt.clientY-lt.top,St=Math.min(Ct.current.x,Ye),hn=Math.min(Ct.current.y,Dt),Ce=Math.abs(Ye-Ct.current.x),At=Math.abs(Dt-Ct.current.y);dn({x:St,y:hn,width:Ce,height:At});const B=St,Ae=St+Ce,rt=hn,yt=hn+At,et=new Set;s.forEach($t=>{const pn=i.indexOf($t.resourceId);if(pn===-1)return;const kn=pn*zi,ts=kn+zi,un=($t.startTime-ur)*sr*y,Nn=un+$t.duration*sr*y;B<Nn&&Ae>un&&rt<ts&&yt>kn&&et.add($t.id)}),$(et);return}if(!_e){console.log(\\\\"Early return: no draggingState\\\\");return}const Kt=_e.initialPositions.get(_e.mainEventId);if(!Kt)return;const Mt=(Et/y-_e.xOffset)/sr-Kt.startTime,ze=Math.floor((Bt-_e.yOffset+zi/2)/zi)-Kt.rowIndex;console.log(\\\\"Drag calculation - timeShift:\\\\",Mt,\\\\"rowShift:\\\\",ze,\\\\"xInGrid:\\\\",Et,\\\\"yInGrid:\\\\",Bt);const qt=[],Mn=[...s];let jn=null,je=null;for(const[Ye,Dt]of _e.initialPositions.entries()){const St=s.find(yt=>yt.id===Ye);if(!St)continue;let hn=Dt.startTime+Mt,Ce=Dt.rowIndex+ze;Ce<0&&(Ce=0),Ce>=i.length&&(Ce=i.length-1),hn<ur&&(hn=ur),hn+St.duration>El&&(hn=El-St.duration);const At=Math.round(hn*12)/12,B=i[Ce];qt.push({eventId:Ye,newStartTime:At,newResourceId:B});const Ae=Mn.findIndex(yt=>yt.id===Ye);Ae!==-1&&(Mn[Ae]={...Mn[Ae],startTime:At,resourceId:B});const rt=s.find(yt=>yt.id!==Ye&&!_e.initialPositions.has(yt.id)&&yt.resourceId===B&&nw({...St,startTime:At},yt));rt&&(jn=rt.id)}if(qt.find(Ye=>Ye.eventId===_e.mainEventId)){const Ye=Mn.find(hn=>hn.id===_e.mainEventId),Dt=Mn.filter(hn=>!_e.initialPositions.has(hn.id));let St=null;if(Oe)if(St=Oe(Ye,Dt),console.log(\\\\"\\\\ud83d\\\\udd0d Drag conflict check:\\\\",{eventId:Ye.id,hasConflict:St.hasConflict,conflictType:St.conflictType}),St.hasConflict){if(Xe({conflictingEventId:St.conflictingEventId,conflictedPersonName:St.conflictedPersonnel||\\\\"\\\\"}),Ye.flightNumber.includes(\\\\"CPT\\\\")&&St.conflictType===\\\\"personnel\\\\"){const hn=Dt.find(Ce=>Ce.id===St.conflictingEventId);hn&&(je={conflictingEvent:hn,newEvent:Ye,conflictedPerson:\\\\"trainee\\\\"})}}else Xe(null);else{const hn=Ge([Ye],Dt);hn?(Xe({conflictingEventId:hn.conflictingEvent.id,conflictedPersonName:hn.personName}),Ye.flightNumber.includes(\\\\"CPT\\\\")&&(je={conflictingEvent:hn.conflictingEvent,newEvent:Ye,conflictedPerson:\\\\"trainee\\\\",personName:hn.personName})):Xe(null)}}tt(jn),Ke(je),console.log(\\\\"\\\\ud83d\\\\udc0d DRAG COMPLETE - Calling onUpdateEvent with\\\\",qt.length,\\\\"updates:\\\\"),console.log(\\\\"\\\\ud83d\\\\udc0d Updates:\\\\",qt),m(qt)}},Ht=Tt=>{if(console.log(\\\\"Local handleMouseUp called - ignoring when dragState exists:\\\\",!!_e),_e){console.log(\\\\"Ignoring local mouse up - global handler will manage\\\\");return}document.body.classList.remove(\\\\"no-select\\\\"),Te&&Ne(),Ve&&V(Ve),console.log(\\\\"Clearing drag state in local handleMouseUp\\\\"),Z(null),Xe(null),tt(null),Ke(null),st(null),Ct.current&&U&&(Ct.current=null,dn(null),!nt.current&&!Tt.shiftKey&&(Tt.target.closest(\\\'[data-is-flight-tile=\\\\"true\\\\"]\\\')||$(new Set))),setTimeout(()=>{nt.current=!1},0)},We=C.useCallback(Tt=>{if(!Tt||!/^\\\\\\\\d{2}:\\\\\\\\d{2}$/.test(Tt))return null;const[lt,Et]=Tt.split(\\\\":\\\\").map(Number);return lt+Et/60},[]),we=()=>{const Tt=[];for(let Bt=ur;Bt<=El;Bt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-gray-500 flex items-center\\\\",style:{left:(Bt-ur)*sr*y},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`${String(Bt).padStart(2,\\\\"0\\\\")}:00`})},Bt));const lt=We(H.firstLight),Et=We(H.lastLight);if(lt!==null){const Bt=(lt-ur)*sr*y;Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:Bt},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`FL ${H.firstLight}`})},\\\\"fl-label\\\\"))}if(Et!==null){const Bt=(Et-ur)*sr*y;Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0 text-xs text-white font-bold flex items-center\\\\",style:{left:Bt},children:e.jsx(\\\\"span\\\\",{className:\\\\"-translate-x-1/2\\\\",children:`LL ${H.lastLight}`})},\\\\"ll-label\\\\"))}return Tt},Re=()=>{const Tt=[];for(let lt=ur;lt<=El;lt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(lt-ur)*sr*y},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/50\\\\"})},`v-${lt}`)),lt<El&&Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute h-full top-0\\\\",style:{left:(lt-ur+.5)*sr*y},children:e.jsx(\\\\"div\\\\",{className:\\\\"w-px h-full bg-gray-700/25\\\\"})},`v-${lt}-30`));for(let lt=1;lt<=i.length;lt++)Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full bg-gray-700/25\\\\",style:{top:lt*zi,height:\\\\"1px\\\\"}},`h-${lt}`));return Tt},be=()=>{const Tt=[];let lt=ny(i[0]);for(let Et=1;Et<i.length;Et++){const Bt=ny(i[Et]);Bt!==lt&&(Tt.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute left-0 w-full border-t-2 border-gray-500 z-10\\\\",style:{top:Et*zi}},`sep-${Et}`)),lt=Bt)}return Tt},Ze=()=>{const Tt=We(H.firstLight),lt=We(H.lastLight);return e.jsxs(e.Fragment,{children:[Tt!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(Tt-ur)*sr*y}px`}}),lt!==null&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[5] pointer-events-none border-l border-dashed border-white/30\\\\",style:{left:`${(lt-ur)*sr*y}px`}})]})},ot=()=>{const Tt=We(H.firstLight),lt=We(H.lastLight),Et=[];if(Tt!==null&&Tt>ur){const Bt=(Tt-ur)*sr*y;Et.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 left-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{width:`${Bt}px`}},\\\\"night-shade-morning\\\\"))}if(lt!==null&&lt<El){const Bt=(lt-ur)*sr*y,Kt=(El-lt)*sr*y;Et.push(e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/5 pointer-events-none z-[1]\\\\",style:{left:`${Bt}px`,width:`${Kt}px`}},\\\\"night-shade-evening\\\\"))}return e.jsx(e.Fragment,{children:Et})},Vt=()=>{const lt=(Mt=>{const ze=Mt.getUTCFullYear(),qt=String(Mt.getUTCMonth()+1).padStart(2,\\\\"0\\\\"),Mn=String(Mt.getUTCDate()).padStart(2,\\\\"0\\\\");return`${ze}-${qt}-${Mn}`})(xe);if(n!==lt)return null;const Et=xe,Bt=Et.getUTCHours()+Et.getUTCMinutes()/60+Et.getUTCSeconds()/3600;if(Bt<ur||Bt>El)return null;const Kt=(Bt-ur)*sr*y;return e.jsxs(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full z-[30] pointer-events-none\\\\",style:{left:`${Kt}px`},children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-0.5 h-full bg-white animate-pulse\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-2.5 -translate-x-1/2 w-0 h-0\\\\",style:{borderLeft:\\\\"5px solid transparent\\\\",borderRight:\\\\"5px solid transparent\\\\",borderTop:\\\\"7px solid white\\\\"}})]})},Pt=()=>{if(!T||on===null||!se)return null;const Tt=on-.5,lt=on+.5,Et=s.filter(ze=>ze.type!==\\\\"flight\\\\"?!1:ze.startTime>=Tt&&ze.startTime<lt).length,Bt=(Tt-ur)*sr*y,Kt=(lt-ur)*sr*y,Mt=Kt-Bt;return e.jsxs(e.Fragment,{children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full bg-white/10 pointer-events-none z-[25]\\\\",style:{left:`${Bt}px`,width:`${Mt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full w-0.5 bg-white/40 pointer-events-none z-[26]\\\\",style:{left:`${Bt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-0 h-full w-0.5 bg-white/40 pointer-events-none z-[26]\\\\",style:{left:`${Kt}px`}}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-2 bg-gray-800/95 border border-white/30 rounded px-3 py-1.5 shadow-lg pointer-events-none z-[27]\\\\",style:{left:`${Bt+Mt/2}px`,transform:\\\\"translateX(-50%)\\\\"},children:e.jsxs(\\\\"div\\\\",{className:\\\\"text-white text-xs font-semibold whitespace-nowrap\\\\",children:[\\\\"Flights starting in this hour: \\\\",e.jsx(\\\\"span\\\\",{className:\\\\"text-sky-400\\\\",children:Et})]})})]})},yn=()=>i.flatMap((Tt,lt)=>s.filter(Bt=>Bt.resourceId===Tt).map(Bt=>{const Kt=!!(_e&&_e.initialPositions.has(Bt.id)),Mt=Bt.id===(Fe==null?void 0:Fe.conflictingEventId)||Bt.id===ft,ze=T&&W.has(Bt.id)||Mt||Kt&&!!(Fe||ft),qt=ne.get(Bt.id),Mn=!!qt,jn=qt||[];let je=null;if(Fe){const Dt=Y0(Bt);(Kt||Mt)&&Dt.includes(Fe.conflictedPersonName)&&(je=Fe.conflictedPersonName)}const $e=D.has(Bt.id),Ye=sw(Bt,M);return e.jsx(Gc,{event:Bt,traineesData:l,onSelectEvent:()=>{if(!nt.current)if(U){const Dt=new Set(D);Dt.has(Bt.id)?Dt.delete(Bt.id):Dt.add(Bt.id),$(Dt)}else v(Bt)},onMouseDown:Dt=>ht(Dt,Bt),onMouseEnter:()=>{},onMouseLeave:()=>{},pixelsPerHour:sr*y,rowHeight:zi,startHour:ur,row:lt,isDragging:Kt,isConflicting:ze,isUnavailabilityConflict:Mn,unavailablePersonnel:jn,conflictedPersonnelName:je,personnelData:_,seatConfigs:R,isDraggable:!0,currentTime:xe,isSelected:$e,isChanged:Ye},Bt.id)}));return e.jsx(\\\\"div\\\\",{ref:ye,className:\\\\"flex-1 overflow-auto relative bg-gray-900 select-none\\\\",children:e.jsxs(\\\\"div\\\\",{style:{width",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}