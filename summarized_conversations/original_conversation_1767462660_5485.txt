{'role': 'user', 'content': '<tool_result> <execute-command> ToolResult(success=True, output=\'{\\n  "output": "./static-demo/assets/index-BkFkfBtP.js:98:    `;S.document.write(T),S.document.close(),S.print()},v=()=>{const S=Xb(t),T=new Blob([S],{type:\\\\"text/csv\\\\"}),j=window.URL.createObjectURL(T),D=document.createElement(\\\\"a\\\\");D.href=j,D.download=`audit-log-${page}-${new Date().toISOString().split(\\\\"T\\\\")[0]}.csv`,document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL(j)};return Wb.createPortal(e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-[999999] flex items-center justify-center\\\\",style:{zIndex:999999},onClick:n,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-2xl w-full max-w-6xl border border-gray-700 flex flex-col max-h-[90vh] relative\\\\",style:{zIndex:999999},onClick:S=>S.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900 rounded-t-lg\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-white\\\\",children:\\\\"Audit Log\\\\"}),e.jsxs(\\\\"p\\\\",{className:\\\\"text-sm text-gray-400 mt-1\\\\",children:[\\\\"Page: \\\\",t]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:v,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors\\\\",title:\\\\"Export to CSV\\\\",children:\\\\"Export CSV\\\\"}),e.jsx(\\\\"button\\\\",{onClick:y,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors\\\\",title:\\\\"Print Audit Log\\\\",children:\\\\"Print\\\\"}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"px-3 py-1.5 text-sm font-medium text-white bg-gray-600 hover:bg-gray-700 rounded transition-colors\\\\",children:\\\\"Close\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 overflow-auto p-4\\\\",children:g.length===0?e.jsxs(\\\\"div\\\\",{className:\\\\"text-center py-12 text-gray-400\\\\",children:[e.jsx(\\\\"svg\\\\",{className:\\\\"mx-auto h-12 w-12 mb-4\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\\\\"})}),e.jsx(\\\\"p\\\\",{className:\\\\"text-lg font-medium\\\\",children:\\\\"No audit logs found\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"text-sm mt-2\\\\",children:\\\\"Activity on this page will be recorded here\\\\"})]}):e.jsx(\\\\"div\\\\",{className:\\\\"overflow-x-auto\\\\",children:e.jsxs(\\\\"table\\\\",{className:\\\\"w-full text-sm\\\\",children:[e.jsx(\\\\"thead\\\\",{className:\\\\"bg-gray-700 sticky top-0\\\\",children:e.jsxs(\\\\"tr\\\\",{children:[e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>p(\\\\"timestamp\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"Date/Time\\\\",a===\\\\"timestamp\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:f===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>p(\\\\"user\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"User\\\\",a===\\\\"user\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:f===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-600\\\\",onClick:()=>p(\\\\"action\\\\"),children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:[\\\\"Action\\\\",a===\\\\"action\\\\"&&e.jsx(\\\\"span\\\\",{className:\\\\"ml-1\\\\",children:f===\\\\"asc\\\\"?\\\\"\\\\u2191\\\\":\\\\"\\\\u2193\\\\"})]})}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Description\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Changes\\\\"})]})}),e.jsx(\\\\"tbody\\\\",{className:\\\\"bg-gray-800 divide-y divide-gray-700\\\\",children:g.map(S=>e.jsxs(\\\\"tr\\\\",{className:\\\\"hover:bg-gray-700/50\\\\",children:[e.jsxs(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap text-gray-300\\\\",children:[e.jsx(\\\\"div\\\\",{children:S.timestamp.toLocaleDateString()}),e.jsx(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:S.timestamp.toLocaleTimeString()})]}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap text-gray-300\\\\",children:S.user}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 whitespace-nowrap\\\\",children:e.jsx(\\\\"span\\\\",{className:`px-2 py-1 text-xs font-medium rounded ${S.action===\\\\"View\\\\"?\\\\"bg-blue-900/50 text-blue-300\\\\":S.action===\\\\"Edit\\\\"?\\\\"bg-yellow-900/50 text-yellow-300\\\\":S.action===\\\\"Add\\\\"?\\\\"bg-green-900/50 text-green-300\\\\":S.action===\\\\"Delete\\\\"?\\\\"bg-red-900/50 text-red-300\\\\":S.action===\\\\"Archive\\\\"?\\\\"bg-purple-900/50 text-purple-300\\\\":S.action===\\\\"Restore\\\\"?\\\\"bg-cyan-900/50 text-cyan-300\\\\":\\\\"bg-gray-900/50 text-gray-300\\\\"}`,children:S.action})}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-300\\\\",children:S.description}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-400 text-sm\\\\",children:S.changes||\\\\"-\\\\"})]},S.id))})]})})}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-3 border-t border-gray-700 bg-gray-900 rounded-b-lg flex justify-between items-center\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:[\\\\"Total entries: \\\\",e.jsx(\\\\"span\\\\",{className:\\\\"font-medium text-white\\\\",children:g.length})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:[\\\\"Last updated: \\\\",new Date().toLocaleString()]})]})]})}),document.body)},_l=({pageName:t,className:n=\\\\"\\\\"})=>{const[i,o]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"button\\\\",{onClick:()=>o(!0),className:`inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-200 bg-gray-700/50 hover:bg-gray-600/50 rounded border border-gray-600 hover:border-gray-500 transition-colors ${n}`,title:\\\\"View Audit Log\\\\",children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-3.5 w-3.5 mr-1\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\\\\"})}),\\\\"Audit\\\\"]}),i&&e.jsx(Kb,{pageName:t,onClose:()=>o(!1)})]})},Zb=({person:t,events:n,onBack:i})=>{const o=new Date,a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,\\\\"0\\\\")}`,d=`${o.getFullYear()}-01`,[f,h]=N.useState(d),[p,g]=N.useState(a),y=\\\\"fullName\\\\"in t?t.fullName:t.name,v=\\\\"role\\\\"in t?\\\\"Instructor\\\\":\\\\"Trainee\\\\",S=N.useMemo(()=>{if(!f||!p)return[];const A=new Date(`${f}-01`),O=new Date(`${p}-01`);return O.setMonth(O.getMonth()+1),O.setDate(0),n.filter(k=>{var B;if(k.type!==\\\\"flight\\\\"&&k.type!==\\\\"ftd\\\\"||!(k.instructor===y||k.student===y||k.pilot===y||((B=k.attendees)==null?void 0:B.includes(y))))return!1;const V=new Date(k.date);return V>=A&&V<=O}).sort((k,_)=>new Date(_.date).getTime()-new Date(k.date).getTime())},[n,y,f,p]),T=A=>A&&A>.01?A.toFixed(1):\\\\"-\\\\",j=A=>{const O=A.type===\\\\"flight\\\\",k=A.type===\\\\"ftd\\\\",_=A.duration,V=A.startTime>=18;let B=0,he=0,J=0,R=0,L=0,X=0,K=0,z=0,De=0,Ee=0,ot=0,P=0;return O?v===\\\\"Instructor\\\\"?A.flightType===\\\\"Dual\\\\"?(ot=_,P=_,V?R=_:B=_):(P=_,V?R=_:B=_):A.flightType===\\\\"Solo\\\\"?(P=_,V?R=_:B=_):V?X=_:J=_:k&&(Ee=_,v===\\\\"Instructor\\\\"?(ot=_,K=_):De=_),{date:A.date,type:O?\\\\"PC-21\\\\":k?\\\\"FTD\\\\":\\\\"Ground\\\\",tail:O?A.resourceId.includes(\\\\"PC-21\\\\")?`A54-${A.resourceId.split(\\\\" \\\\")[1].padStart(3,\\\\"0\\\\")}`:\\\\"A54-XXX\\\\":A.resourceId,captain:(A.instructor||A.pilot||\\\\"Self\\\\").split(\\\\" \\\\u2013 \\\\")[0].split(\\\\",\\\\")[0],crew:(A.student||(A.flightType===\\\\"Solo\\\\"?\\\\"Solo\\\\":\\\\"\\\\")).split(\\\\" \\\\u2013 \\\\")[0].split(\\\\",\\\\")[0],duty:`${A.origin||\\\\"ESL\\\\"}-${A.destination||\\\\"ESL\\\\"} : ${A.flightNumber}`,dayP1:B,dayP2:he,dayDual:J,nightP1:R,nightP2:L,nightDual:X,total:O?_:0,captainTime:P,instructorTime:ot,simP1:K,simP2:z,simDual:De,simTotal:Ee,simActual:0,app2D:0,app3D:0,ifSim:0}},D=async()=>{const A=await Kd();A.some(Q=>Q.name.includes(\\\\"Logbook\\\\")&&Q.folderId===\\\\"logbook_templates\\\\")||console.warn(\\\\"Logbook Template file not found.\\\\");let k={dayP1:0,dayP2:0,dayDual:0,nightP1:0,nightP2:0,nightDual:0,total:0,captainTime:0,instructorTime:0,simP1:0,simP2:0,simDual:0,simTotal:0,simActual:0,app2D:0,app3D:0};const _=v===\\\\"Instructor\\\\"?\\\\"staff_logbook\\\\":\\\\"trainee_logbook\\\\",B=`Logbook_${t.name.replace(/,\\\\\\\\s/g,\\\\"_\\\\")}_${t.idNumber}.json`,he=A.find(Q=>Q.name===B&&Q.folderId===_);if(he)try{const Q=await zd(he.id);if(Q){const Ae=await Q.content.text(),ae=JSON.parse(Ae);k={dayP1:ae.day.p1||0,dayP2:ae.day.p2||0,dayDual:ae.day.dual||0,nightP1:ae.night.p1||0,nightP2:ae.night.p2||0,nightDual:ae.night.dual||0,total:ae.total||0,captainTime:ae.captain||0,instructorTime:ae.instructor||0,simP1:ae.simulator.p1||0,simP2:ae.simulator.p2||0,simDual:ae.simulator.dual||0,simTotal:ae.simulator.total||0,simActual:ae.instrument.actual||0,app2D:0,app3D:0}}}catch(Q){console.error(\\\\"Error reading logbook file:\\\\",Q)}const J=n.filter(Q=>{var Ae;return(Q.type===\\\\"flight\\\\"||Q.type===\\\\"ftd\\\\")&&(Q.instructor===y||Q.student===y||Q.pilot===y||((Ae=Q.attendees)==null?void 0:Ae.includes(y)))}).sort((Q,Ae)=>new Date(Q.date).getTime()-new Date(Ae.date).getTime()),R=new Date(`${f}-01`),L=new Date(`${p}-01`);L.setMonth(L.getMonth()+1),L.setDate(0);const X=[];if(J.forEach(Q=>{const Ae=new Date(Q.date);if(Ae<R){const ae=j(Q);k.dayP1+=ae.dayP1,k.dayP2+=ae.dayP2,k.dayDual+=ae.dayDual,k.nightP1+=ae.nightP1,k.nightP2+=ae.nightP2,k.nightDual+=ae.nightDual,k.total+=ae.total,k.captainTime+=ae.captainTime,k.instructorTime+=ae.instructorTime,k.simP1+=ae.simP1,k.simP2+=ae.simP2,k.simDual+=ae.simDual,k.simTotal+=ae.simTotal,k.simActual+=ae.simActual}else Ae<=L&&X.push(Q)}),typeof jspdf>\\\\"u\\\\"){alert(\\\\"PDF library not loaded.\\\\");return}const{jsPDF:K}=jspdf,z=new K({orientation:\\\\"landscape\\\\",unit:\\\\"mm\\\\",format:\\\\"a4\\\\"}),De={};X.forEach(Q=>{const Ae=new Date(Q.date),ae=`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,\\\\"0\\\\")}`;De[ae]||(De[ae]=[]),De[ae].push(Q)});const Ee=Object.keys(De).sort();Ee.length===0&&f&&Ee.push(f),Ee.forEach((Q,Ae)=>{Ae>0&&z.addPage(),z.setFontSize(14),z.setTextColor(0,0,0),z.text(`Logbook: ${t.rank} ${y}`,14,15),z.setFontSize(10);const[ae,Le]=Q.split(\\\\"-\\\\"),F=new Date(Date.UTC(parseInt(ae),parseInt(Le)-1,1)).toLocaleString(\\\\"en-GB\\\\",{month:\\\\"long\\\\",year:\\\\"numeric\\\\"});z.text(`Period: ${F}`,14,20);const W=[{content:\\\\"Totals brought Forward\\\\",colSpan:7,styles:{fontStyle:\\\\"bold\\\\",halign:\\\\"right\\\\"}},T(k.dayP1),T(k.dayP2),T(k.dayDual),T(k.nightP1),T(k.nightP2),T(k.nightDual),T(k.total),T(k.captainTime),T(k.instructorTime),\\\\"\\\\",T(k.simActual),\\\\"\\\\",\\\\"\\\\",T(k.simP1),T(k.simP2),T(k.simDual),T(k.simTotal)],ce=De[Q]||[],ne={dayP1:0,dayP2:0,dayDual:0,nightP1:0,nightP2:0,nightDual:0,total:0,captainTime:0,instructorTime:0,simP1:0,simP2:0,simDual:0,simTotal:0,simActual:0},Z=ce.map(be=>{const oe=j(be);ne.dayP1+=oe.dayP1,ne.dayP2+=oe.dayP2,ne.dayDual+=oe.dayDual,ne.nightP1+=oe.nightP1,ne.nightP2+=oe.nightP2,ne.nightDual+=oe.nightDual,ne.total+=oe.total,ne.captainTime+=oe.captainTime,ne.instructorTime+=oe.instructorTime,ne.simP1+=oe.simP1,ne.simP2+=oe.simP2,ne.simDual+=oe.simDual,ne.simTotal+=oe.simTotal,ne.simActual+=oe.simActual;const $=new Date(be.date),se=$.getFullYear().toString().slice(-2),te=$.toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\"});return[se,te,oe.type,oe.tail,oe.captain,oe.crew,oe.duty,T(oe.dayP1),T(oe.dayP2),T(oe.dayDual),T(oe.nightP1),T(oe.nightP2),T(oe.nightDual),T(oe.total),T(oe.captainTime),T(oe.instructorTime),\\\\"\\\\",T(oe.simActual),oe.app2D>0?oe.app2D:\\\\"\\\\",oe.app3D>0?oe.app3D:\\\\"\\\\",T(oe.simP1),T(oe.simP2),T(oe.simDual),T(oe.simTotal)]});k.dayP1+=ne.dayP1,k.dayP2+=ne.dayP2,k.dayDual+=ne.dayDual,k.nightP1+=ne.nightP1,k.nightP2+=ne.nightP2,k.nightDual+=ne.nightDual,k.total+=ne.total,k.captainTime+=ne.captainTime,k.instructorTime+=ne.instructorTime,k.simP1+=ne.simP1,k.simP2+=ne.simP2,k.simDual+=ne.simDual,k.simTotal+=ne.simTotal,k.simActual+=ne.simActual;const Ie=[\\\\"\\\\",\\\\"MONTH TOTAL\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",T(ne.dayP1),T(ne.dayP2),T(ne.dayDual),T(ne.nightP1),T(ne.nightP2),T(ne.nightDual),T(ne.total),T(ne.captainTime),T(ne.instructorTime),\\\\"\\\\",T(ne.simActual),\\\\"\\\\",\\\\"\\\\",T(ne.simP1),T(ne.simP2),T(ne.simDual),T(ne.simTotal)],ke=[\\\\"\\\\",\\\\"GRAND TOTAL\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",\\\\"\\\\",T(k.dayP1),T(k.dayP2),T(k.dayDual),T(k.nightP1),T(k.nightP2),T(k.nightDual),T(k.total),T(k.captainTime),T(k.instructorTime),\\\\"\\\\",T(k.simActual),\\\\"\\\\",\\\\"\\\\",T(k.simP1),T(k.simP2),T(k.simDual),T(k.simTotal)];z.autoTable({startY:25,head:[[{content:\\\\"Year\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Date\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Type\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:`Tail\\\\n./static-demo/assets/index-BkFkfBtP.js:101:Crew`,rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Duty\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Day Flying\\\\",colSpan:3,styles:{halign:\\\\"center\\\\"}},{content:\\\\"Night Flying\\\\",colSpan:3,styles:{halign:\\\\"center\\\\"}},{content:\\\\"TOTAL\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Captain\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Instructor\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Sim\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Actual\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"2D App\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"3D App\\\\",rowSpan:2,styles:{valign:\\\\"middle\\\\"}},{content:\\\\"Simulator\\\\",colSpan:4,styles:{halign:\\\\"center\\\\"}}],[{content:\\\\"P1\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"P2\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"Dual\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"P1\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"P2\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"Dual\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"TOTAL\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"P1\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"P2\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"Dual\\\\",styles:{halign:\\\\"center\\\\"}},{content:\\\\"TOTAL\\\\",styles:{halign:\\\\"center\\\\"}}]],body:[W,...Z,Ie,ke],theme:\\\\"grid\\\\",styles:{fontSize:7,cellPadding:1,lineColor:[150,150,150],lineWidth:.1},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:\\\\"bold\\\\"},footStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:\\\\"bold\\\\"},columnStyles:{0:{cellWidth:10},1:{cellWidth:12},2:{cellWidth:12},3:{cellWidth:15},4:{cellWidth:20},5:{cellWidth:20},6:{cellWidth:25}}})});const ot=z.output(\\\\"blob\\\\"),P=URL.createObjectURL(ot);window.open(P,\\\\"_blank\\\\")};return e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex flex-col bg-gray-900 overflow-hidden\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-shrink-0 bg-gray-800 p-4 flex justify-between items-center border-b border-gray-700\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsxs(\\\\"h1\\\\",{className:\\\\"text-2xl font-bold text-white\\\\",children:[\\\\"Logbook: \\\\",y]}),e.jsxs(\\\\"p\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:[v,\\\\" - \\\\",t.rank]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"label\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:\\\\"From:\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"month\\\\",value:f,onChange:A=>h(A.target.value),className:\\\\"bg-gray-700 border border-gray-600 rounded-md px-2 py-1 text-white text-sm focus:outline-none focus:ring-sky-500\\\\",style:{colorScheme:\\\\"dark\\\\"}}),e.jsx(\\\\"label\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:\\\\"To:\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"month\\\\",value:p,onChange:A=>g(A.target.value),className:\\\\"bg-gray-700 border border-gray-600 rounded-md px-2 py-1 text-white text-sm focus:outline-none focus:ring-sky-500\\\\",style:{colorScheme:\\\\"dark\\\\"}})]}),e.jsxs(\\\\"button\\\\",{onClick:D,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition-colors text-sm font-semibold shadow-md flex items-center space-x-2\\\\",children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\\\\"})}),e.jsx(\\\\"span\\\\",{children:\\\\"Print\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:i,className:\\\\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm font-semibold shadow-md\\\\",children:\\\\"\\\\u2190 Back\\\\"}),e.jsx(_l,{pageName:\\\\"Logbook\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 p-6 overflow-y-auto\\\\",children:e.jsx(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-lg border border-gray-700 overflow-x-auto\\\\",children:e.jsxs(\\\\"table\\\\",{className:\\\\"min-w-full divide-y divide-gray-700 text-sm whitespace-nowrap\\\\",children:[e.jsx(\\\\"thead\\\\",{className:\\\\"bg-gray-700/50\\\\",children:e.jsxs(\\\\"tr\\\\",{children:[e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Date\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Type\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Tail\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Captain/Inst\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Crew/Trainee\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Duty\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Day P1\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Day P2\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Day Dual\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Night P1\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Night P2\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Night Dual\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Total\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Captain\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Instructor\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"IF Sim\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"IF Actual\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Sim P1\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Sim P2\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Sim Dual\\\\"}),e.jsx(\\\\"th\\\\",{className:\\\\"px-2 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\\\\",children:\\\\"Sim Total\\\\"})]})}),e.jsxs(\\\\"tbody\\\\",{className:\\\\"divide-y divide-gray-700\\\\",children:[S.map(A=>{const O=j(A);return e.jsxs(\\\\"tr\\\\",{className:\\\\"hover:bg-gray-700/30\\\\",children:[e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-300\\\\",children:O.date}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-white font-medium\\\\",children:O.type}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-400 font-mono\\\\",children:O.tail}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-300 truncate max-w-[100px]\\\\",title:O.captain,children:O.captain}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-300 truncate max-w-[100px]\\\\",title:O.crew,children:O.crew}),e.jsx(\\\\"td\\\\",{className:\\\\"px-4 py-3 text-gray-400 text-xs truncate max-w-[150px]\\\\",title:O.duty,children:O.duty}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.dayP1)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.dayP2)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.dayDual)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.nightP1)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.nightP2)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.nightDual)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center font-bold text-sky-400 font-mono\\\\",children:T(O.total)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.captainTime)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.instructorTime)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.ifSim)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.simActual)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.simP1)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.simP2)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-gray-300 font-mono\\\\",children:T(O.simDual)}),e.jsx(\\\\"td\\\\",{className:\\\\"px-2 py-3 text-center text-indigo-400 font-mono font-bold\\\\",children:T(O.simTotal)})]},A.id)}),S.length===0&&e.jsx(\\\\"tr\\\\",{children:e.jsx(\\\\"td\\\\",{colSpan:21,className:\\\\"px-4 py-8 text-center text-gray-500 italic\\\\",children:\\\\"No events found for this period.\\\\"})})]})]})})})]})},ev=()=>({id:ts(),name:\\\\"New Primitive Currency\\\\",description:\\\\"\\\\",type:\\\\"primitive\\\\",isVisible:!0,validityDays:365,eventCodes:[],requiredCount:1,expiryRule:\\\\"LAST_EVENT_PLUS_PERIOD\\\\"}),tv=()=>({id:ts(),name:\\\\"New Composite Currency\\\\",description:\\\\"\\\\",type:\\\\"composite\\\\",isVisible:!0,expiryCalculation:\\\\"EARLIEST_CHILD\\\\",logicTree:{operator:\\\\"AND\\\\",children:[]}}),nv=({onBack:t,masterCurrencies:n,currencyRequirements:i,onSave:o,onDelete:a})=>{const[d,f]=N.useState([]),[h,p]=N.useState(null),[g,y]=N.useState(\\\\"\\\\"),[v,S]=N.useState(!1);N.useEffect(()=>{const _=[...n,...i];f(_),h&&!_.some(V=>V.id===h)&&p(null)},[n,i,h]);const T=N.useMemo(()=>d.filter(_=>_.name.toLowerCase().includes(g.toLowerCase())).sort((_,V)=>_.name.localeCompare(V.name)),[d,g]),j=N.useMemo(()=>d.find(_=>_.id===h)||null,[h,d]),D=_=>{f(V=>V.map(B=>B.id===_.id?_:B)),S(!0)},A=_=>{const V=_===\\\\"primitive\\\\"?ev():tv();f(B=>[...B,V]),p(V.id),S(!0)},O=()=>{if(!h)return;if(d.some(V=>{if(V.type===\\\\"composite\\\\"){const B=he=>he.children.some(J=>typeof J==\\\\"string\\\\"?J===h:B(J));return B(V.logicTree)}return!1})){alert(\\\\"This currency cannot be deleted because it is used as a dependency in another composite currency.\\\\");return}window.confirm(`Are you sure you want to delete \\\\"${j==null?void 0:j.name}\\\\"? This action cannot be undone.`)&&(a(h),p(null))},k=()=>{o(d),S(!1)};return e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex flex-col bg-gray-900 overflow-hidden h-full\\\\",children:[e.jsxs(\\\\"header\\\\",{className:\\\\"flex-shrink-0 bg-gray-800 p-4 flex justify-between items-center border-b border-gray-700\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"h1\\\\",{className:\\\\"text-2xl font-bold text-white\\\\",children:\\\\"Currency Builder\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"text-sm text-gray-400\\\\",children:\\\\"Define primitive and composite currency rules.\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[v&&e.jsxs(\\\\"button\\\\",{onClick:k,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition-colors text-sm font-semibold shadow-md flex items-center space-x-2\\\\",children:[e.jsxs(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:[e.jsx(\\\\"path\\\\",{d:\\\\"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6a1 1 0 10-2 0v5.586L7.707 10.293z\\\\"}),e.jsx(\\\\"path\\\\",{d:\\\\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\\\\"})]}),e.jsx(\\\\"span\\\\",{children:\\\\"Save Changes\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm font-semibold shadow-md\\\\",children:\\\\"\\\\u2190 Back to Settings\\\\"}),e.jsx(_l,{pageName:\\\\"Currency Builder\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 flex overflow-hidden\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"w-1/3 border-r border-gray-700 flex flex-col\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",placeholder:\\\\"Search currencies...\\\\",value:g,onChange:_=>y(_.target.value),className:\\\\"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex mt-2 space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>A(\\\\"primitive\\\\"),className:\\\\"flex-1 text-center py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-xs font-semibold\\\\",children:\\\\"+ Primitive\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>A(\\\\"composite\\\\"),className:\\\\"flex-1 text-center py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-xs font-semibold\\\\",children:\\\\"+ Composite\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 overflow-y-auto\\\\",children:T.map(_=>e.jsxs(\\\\"div\\\\",{draggable:!0,onDragStart:V=>{V.dataTransfer.setData(\\\\"application/currency-id\\\\",_.id),V.dataTransfer.effectAllowed=\\\\"copy\\\\"},onClick:()=>p(_.id),className:`p-3 cursor-pointer border-l-4 ${h===_.id?\\\\"bg-sky-700 border-sky-400\\\\":\\\\"border-transparent hover:bg-gray-700/50\\\\"}`,children:[e.jsx(\\\\"p\\\\",{className:`font-semibold ${_.type===\\\\"composite\\\\"?\\\\"text-purple-300\\\\":\\\\"text-green-300\\\\"}`,children:_.name}),e.jsx(\\\\"p\\\\",{className:\\\\"text-xs text-gray-400\\\\",children:_.description||\\\\"No description\\\\"})]},_.id))})]}),e.jsx(\\\\"div\\\\",{className:\\\\"w-2/3 overflow-y-auto p-6\\\\",children:j?e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-6\\\\",children:[j.type===\\\\"primitive\\\\"?e.jsx(sv,{currency:j,onUpdate:D}):e.jsx(lv,{currency:j,onUpdate:D,allCurrencies:d}),e.jsx(iv,{currencyId:j.id,allCurrencies:d}),e.jsx(\\\\"div\\\\",{className:\\\\"pt-6 border-t border-gray-700\\\\",children:e.jsx(\\\\"button\\\\",{onClick:O,className:\\\\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-semibold\\\\",children:\\\\"Delete Currency\\\\"})})]}):e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center justify-center h-full text-gray-500 italic\\\\",children:\\\\"Select a currency to edit, or add a new one.\\\\"})})]})]})},sv=({currency:t,onUpdate:n})=>{const i=(o,a)=>{n({...t,[o]:a})};return e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-2xl font-bold text-green-400\\\\",children:\\\\"Edit Primitive Currency\\\\"}),e.jsx(Er,{label:\\\\"Name\\\\",value:t.name,onChange:o=>i(\\\\"name\\\\",o)}),e.jsx(Er,{label:\\\\"Description\\\\",value:t.description,onChange:o=>i(\\\\"description\\\\",o)}),e.jsx(Fx,{label:\\\\"Visible in Main List\\\\",checked:t.isVisible,onChange:o=>i(\\\\"isVisible\\\\",o)}),e.jsx(Er,{label:\\\\"Validity (Days)\\\\",type:\\\\"number\\\\",value:t.validityDays,onChange:o=>i(\\\\"validityDays\\\\",Number(o))}),e.jsx(Er,{label:\\\\"Required Count\\\\",type:\\\\"number\\\\",value:t.requiredCount,onChange:o=>i(\\\\"requiredCount\\\\",Number(o))}),e.jsxs(Px,{label:\\\\"Expiry Rule\\\\",value:t.expiryRule,onChange:o=>i(\\\\"expiryRule\\\\",o),children:[e.jsx(\\\\"option\\\\",{value:\\\\"LAST_EVENT_PLUS_PERIOD\\\\",children:\\\\"Last Event + Period\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"ROLLING_WINDOW\\\\",children:\\\\"Rolling Window\\\\"})]}),e.jsx(Er,{label:\\\\"Event Codes (comma-separated)\\\\",value:t.eventCodes.join(\\\\", \\\\"),onChange:o=>i(\\\\"eventCodes\\\\",o.split(\\\\",\\\\").map(a=>a.trim()).filter(Boolean))})]})},lv=({currency:t,onUpdate:n,allCurrencies:i})=>{const o=(d,f)=>{n({...t,[d]:f})},a=d=>{o(\\\\"logicTree\\\\",d)};return e.jsxs(\\\\"div\\\\",{className:\\\\"space-y-4\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-2xl font-bold text-purple-400\\\\",children:\\\\"Edit Composite Currency\\\\"}),e.jsx(Er,{label:\\\\"Name\\\\",value:t.name,onChange:d=>o(\\\\"name\\\\",d)}),e.jsx(Er,{label:\\\\"Description\\\\",value:t.description,onChange:d=>o(\\\\"description\\\\",d)}),e.jsx(Fx,{label:\\\\"Visible in Main List\\\\",checked:t.isVisible,onChange:d=>o(\\\\"isVisible\\\\",d)}),e.jsxs(Px,{label:\\\\"Expiry Calculation\\\\",value:t.expiryCalculation,onChange:d=>o(\\\\"expiryCalculation\\\\",d),children:[e.jsx(\\\\"option\\\\",{value:\\\\"EARLIEST_CHILD\\\\",children:\\\\"Use Earliest Expiry\\\\"}),e.jsx(\\\\"option\\\\",{value:\\\\"LATEST_CHILD\\\\",children:\\\\"Use Latest Expiry\\\\"})]}),e.jsx(Rx,{node:t.logicTree,path:[],onUpdate:a,allCurrencies:i})]})},Rx=({node:t,path:n,onUpdate:i,allCurrencies:o})=>{const a=v=>{v.preventDefault(),v.dataTransfer.dropEffect=\\\\"copy\\\\"},d=v=>{v.preventDefault();const S=v.dataTransfer.getData(\\\\"application/currency-id\\\\");if(S&&!t.children.includes(S)){const T=[...t.children,S];i({...t,children:T},n)}},f=(v,S)=>{const T=[...t.children];T[S]=v,i({...t,children:T},n)},h=v=>{const S=t.children.filter((T,j)=>j!==v);i({...t,children:S},n)},p=()=>{const v=[...t.children,\\\\"new_condition_placeholder\\\\"];i({...t,children:v},n)},g=()=>{const v={operator:\\\\"AND\\\\",children:[]},S=[...t.children,v];i({...t,children:S},n)},y=v=>{i({...t,operator:v},n)};return e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg bg-gray-700/30 space-y-3\\\\",onDragOver:a,onDrop:d,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center justify-between\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>y(\\\\"AND\\\\"),className:`px-3 py-1 text-xs font-bold rounded ${t.operator===\\\\"AND\\\\"?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-gray-300\\\\"}`,children:\\\\"ALL of these (AND)\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>y(\\\\"OR\\\\"),className:`px-3 py-1 text-xs font-bold rounded ${t.operator===\\\\"OR\\\\"?\\\\"bg-purple-600 text-white\\\\":\\\\"bg-gray-600 text-gray-300\\\\"}`,children:\\\\"ANY of these (OR)\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:p,className:\\\\"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded\\\\",children:\\\\"+ Condition\\\\"}),e.jsx(\\\\"button\\\\",{onClick:g,className:\\\\"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded\\\\",children:\\\\"+ Group\\\\"})]})]}),e.jsx(\\\\"div\\\\",{className:\\\\"space-y-2 pl-4 border-l-2 border-gray-500\\\\",children:t.children.length>0?t.children.map((v,S)=>{var T;return e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center group\\\\",children:[typeof v==\\\\"string\\\\"?e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 p-2 bg-gray-800 rounded text-sm text-gray-300\\\\",children:((T=o.find(j=>j.id===v))==null?void 0:T.name)||\\\\"Unlinked Condition\\\\"}):e.jsx(Rx,{node:v,path:[...n,\\\\"children\\\\",S],onUpdate:(j,D)=>f(j,S),allCurrencies:o}),e.jsx(\\\\"button\\\\",{onClick:()=>h(S),className:\\\\"ml-2 p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\\\\",clipRule:\\\\"evenodd\\\\"})})})]},S)}):e.jsx(\\\\"div\\\\",{className:\\\\"text-xs text-gray-500 italic p-4 text-center\\\\",children:\\\\"Drag currencies here or add conditions/groups.\\\\"})})]})},iv=({currencyId:t,allCurrencies:n})=>{const i=N.useMemo(()=>{const o=[],a=n.filter(d=>d.type===\\\\"composite\\\\");for(const d of a){const f=h=>h.children.some(p=>typeof p==\\\\"string\\\\"?p===t:f(p));f(d.logicTree)&&o.push(d.name)}return o},[t,n]);return i.length===0?null:e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg bg-gray-700/30\\\\",children:[e.jsx(\\\\"h3\\\\",{className:\\\\"text-sm font-semibold text-gray-300 mb-2\\\\",children:\\\\"Used In:\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"flex flex-wrap gap-2\\\\",children:i.map(o=>e.jsx(\\\\"span\\\\",{className:\\\\"px-2 py-1 bg-purple-800 text-purple-200 text-xs font-medium rounded-full\\\\",children:o},o))})]})},Er=({label:t,value:n,onChange:i,type:o=\\\\"text\\\\"})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:t}),e.jsx(\\\\"input\\\\",{type:o,value:n,onChange:a=>i(a.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\"})]}),Fx=({label:t,checked:n,onChange:i})=>e.jsxs(\\\\"label\\\\",{className:\\\\"flex items-center space-x-3\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"checkbox\\\\",checked:n,onChange:o=>i(o.target.checked),className:\\\\"h-4 w-4 bg-gray-600 border-gray-500 rounded accent-sky-500\\\\"}),e.jsx(\\\\"span\\\\",{className:\\\\"text-white\\\\",children:t})]}),Px=({label:t,value:n,onChange:i,children:o})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:t}),e.jsx(\\\\"select\\\\",{value:n,onChange:a=>i(a.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500\\\\",children:o})]}),ov=()=>{Ut(\\\\"Program Schedule\\\\",\\\\"Add\\\\",\\\\"Added new flight event BGF5 for PLTOFF Smith\\\\",\\\\"Event: BGF5, Time: 0800, Duration: 1.2hrs, Instructor: SQNLDR Jones\\\\"),Ut(\\\\"Program Schedule\\\\",\\\\"Edit\\\\",\\\\"Modified flight event BGF3 start time\\\\",\\\\"Changed start time from 0900 to 1000\\\\"),Ut(\\\\"Program Schedule\\\\",\\\\"Delete\\\\",\\\\"Removed ground event for Course 301\\\\",\\\\"Event: Ground School, Time: 1400\\\\"),Ut(\\\\"Next Day Build\\\\",\\\\"View\\\\",\\\\"Viewed Next Day Build schedule for 2024-12-30\\\\",null),Ut(\\\\"Next Day Build\\\\",\\\\"Add\\\\",\\\\"Added SCT event for FLTLT Brown\\\\",\\\\"Event: SCT GF, Time: 0730, Type: Solo\\\\"),Ut(\\\\"Priorities\\\\",\\\\"Edit\\\\",\\\\"Updated course priority order\\\\",\\\\"Moved Course 302 above Course 301\\\\"),Ut(\\\\"Priorities\\\\",\\\\"Edit\\\\",\\\\"Changed flying window times\\\\",\\\\"Start: 0700 \\\\u2192 0730, End: 1700 \\\\u2192 1730\\\\"),console.log(\\\\"\\\\u2705 Test audit logs seeded successfully\\\\")},Dr=new Map,li=(t,n,i)=>{const o=Dr.get(t);if(o){clearTimeout(o.timer);const a=n,d={...a,originalValues:o.originalParams.originalValues||a.originalValues,newValues:a.newValues},f=setTimeout(()=>{let h=n.changes;if(d.originalValues&&d.newValues){const p=[];if(d.originalValues.startTime!==void 0&&d.newValues.startTime!==void 0){const g=y=>{const v=Math.floor(y),S=Math.round((y-v)*60);return`${v.toString().padStart(2,\\\\"0\\\\")}${S.toString().padStart(2,\\\\"0\\\\")}`};p.push(`Start time: ${g(d.originalValues.startTime)} \\\\u2192 ${g(d.newValues.startTime)}`)}d.originalValues.resourceId!==void 0&&d.newValues.resourceId!==void 0&&p.push(`Resource: ${d.originalValues.resourceId} \\\\u2192 ${d.newValues.resourceId}`),h=p.join(\\\\", \\\\")}i(d.page,d.action,d.description,h),Dr.delete(t)},3e3);Dr.set(t,{timer:f,originalParams:o.originalParams,latestParams:d})}else{const a=setTimeout(()=>{i(n.page,n.action,n.description,n.changes),Dr.delete(t)},3e3),d=n;Dr.set(t,{timer:a,originalParams:d,latestParams:d})}},Sm=()=>{Dr.forEach(({timer:t})=>{clearTimeout(t)}),Dr.clear()},rv=[\\\\"bg-sky-400/50\\\\",\\\\"bg-purple-400/50\\\\",\\\\"bg-yellow-400/50\\\\",\\\\"bg-pink-400/50\\\\",\\\\"bg-teal-400/50\\\\",\\\\"bg-indigo-400/50\\\\",\\\\"bg-cyan-400/50\\\\",\\\\"bg-fuchsia-400/50\\\\",\\\\"bg-blue-400/50\\\\"],av=[\\\\"CSE\\\\",\\\\"FIC\\\\",\\\\"WSO\\\\",\\\\"IFIC\\\\",\\\\"OFI\\\\",\\\\"Pilot Conversion\\\\"],vc=({label:t,value:n,onChange:i,children:o,id:a})=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:a,className:\\\\"block text-sm font-medium text-gray-400\\\\",children:t}),e.jsx(\\\\"select\\\\",{id:a,value:n,onChange:i,className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",children:o})]}),cv=({onClose:t,onSave:n,existingCourses:i})=>{const[o,a]=N.useState(\\\\"CSE\\\\"),[d,f]=N.useState(\\\\"\\\\"),[h,p]=N.useState(\\\\"\\\\"),[g,y]=N.useState(\\\\"\\\\"),[v,S]=N.useState(\\\\"\\\\"),[T,j]=N.useState(0),[D,A]=N.useState(0),[O,k]=N.useState(0),_=N.useMemo(()=>{const R=new Set(Object.values(i));return rv.find(L=>!R.has(L))||\\\\"bg-gray-400/50\\\\"},[i]),V=N.useMemo(()=>T+D+O,[T,D,O]),B=N.useMemo(()=>{const R=[],L=Object.keys(i).filter(X=>X.startsWith(\\\\"CSE \\\\")).map(X=>X.replace(\\\\"CSE \\\\",\\\\"\\\\"));for(let X=290;X<=500;X++)L.includes(String(X))||R.push(X);return R},[i]),he=N.useMemo(()=>Array.from({length:41},(R,L)=>L),[]);N.useEffect(()=>{o===\\\\"CSE\\\\"&&B.length>0?f(String(B[0])):f(\\\\"\\\\")},[o,B]);const J=()=>{let R;if(o===\\\\"CSE\\\\"){if(!d){alert(\\\\"Please select a CSE course number.\\\\");return}R=`CSE ${d}`}else{const L=h.trim();if(!L){alert(\\\\"Please enter a course number.\\\\");return}R=`${o} ${L}`}if(Object.keys(i).includes(R)){alert(`Course \\\\"${R}\\\\" already exists.`);return}if(!g||!v){alert(\\\\"Please fill in all required date fields.\\\\");return}if(new Date(v)<=new Date(g)){alert(\\\\"Graduation date must be after the start date.\\\\");return}n({number:R,color:_,startDate:g,gradDate:v,raafStart:T,navyStart:D,armyStart:O})};return e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center animate-fade-in\\\\",onClick:t,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-lg border border-gray-700\\\\",onClick:R=>R.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-sky-400\\\\",children:\\\\"Add New Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"text-white hover:text-gray-300\\\\",\\\\"aria-label\\\\":\\\\"Close\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M6 18L18 6M6 6l12 12\\\\"})})})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-6 space-y-4 max-h-[70vh] overflow-y-auto\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 gap-4\\\\",children:[e.jsx(vc,{label:\\\\"Course Type\\\\",id:\\\\"course-type\\\\",value:o,onChange:R=>a(R.target.value),children:av.map(R=>e.jsx(\\\\"option\\\\",{value:R,children:R},R))}),o===\\\\"CSE\\\\"?e.jsx(vc,{label:\\\\"Course Number\\\\",id:\\\\"course-number\\\\",value:d,onChange:R=>f(R.target.value),children:B.length>0?B.map(R=>e.jsx(\\\\"option\\\\",{value:R,children:R},R)):e.jsx(\\\\"option\\\\",{disabled:!0,children:\\\\"No courses available\\\\"})}):e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"manual-course-number\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Course Number\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",id:\\\\"manual-course-number\\\\",value:h,onChange:R=>p(R.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",placeholder:\\\\"e.g., 210\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Allocated Colour\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"mt-1 flex items-center space-x-2 p-2 bg-gray-700/50 rounded-md h-[38px]\\\\",children:[e.jsx(\\\\"div\\\\",{className:`w-5 h-5 rounded-full ${_}`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-white font-mono text-sm\\\\",children:_})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 gap-4\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"start-date\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Start Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",id:\\\\"start-date\\\\",value:g,onChange:R=>y(R.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"grad-date\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Graduation Date\\\\"}),e.jsx(\\\\"input\\\\",{type:\\\\"date\\\\",id:\\\\"grad-date\\\\",value:v,onChange:R=>S(R.target.value),style:{colorScheme:\\\\"dark\\\\"},className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\"})]})]}),e.jsxs(\\\\"fieldset\\\\",{className:\\\\"p-4 border border-gray-600 rounded-lg\\\\",children:[e.jsx(\\\\"legend\\\\",{className:\\\\"px-2 text-sm font-semibold text-gray-300\\\\",children:\\\\"Initial Student Numbers\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2\\\\",children:[e.jsx(vc,{label:\\\\"RAAF\\\\",id:\\\\"raaf-start\\\\",value:T,onChange:R=>j(parseInt(R.target.value)),children:he.map(R=>e.jsx(\\\\"option\\\\",{value:R,children:R},R))}),e.jsx(vc,{label:\\\\"Navy\\\\",id:\\\\"navy-start\\\\",value:D,onChange:R=>A(parseInt(R.target.value)),children:he.map(R=>e.jsx(\\\\"option\\\\",{value:R,children:R},R))}),e.jsx(vc,{label:\\\\"Army\\\\",id:\\\\"army-start\\\\",value:O,onChange:R=>k(parseInt(R.target.value)),children:he.map(R=>e.jsx(\\\\"option\\\\",{value:R,children:R},R))}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Total\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"mt-1 p-2 bg-gray-700/50 rounded-md text-white h-[38px] flex items-center justify-center font-semibold\\\\",children:V})]})]})]}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Total Remaining on Course\\\\"}),e.jsx(\\\\"p\\\\",{className:\\\\"mt-1 p-2 bg-gray-700/50 rounded-md text-white h-[38px] flex items-center font-semibold\\\\",children:V}),e.jsx(\\\\"p\\\\",{className:\\\\"mt-1 text-xs text-gray-500\\\\",children:\\\\"This will be updated from Trainee profiles once they are assigned to this course.\\\\"})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-6 py-4 bg-gray-800/50 border-t border-gray-700 flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:J,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition-colors text-sm font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed\\\\",children:\\\\"Save Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"px-4 py-2 bg-transparent border border-gray-600 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white transition-colors text-sm\\\\",children:\\\\"Cancel\\\\"})]})]})})},dv=({onClose:t,onArchive:n,activeCourses:i})=>{const o=N.useMemo(()=>Object.keys(i),[i]),[a,d]=N.useState(o[0]||\\\\"\\\\"),f=()=>{a&&n(a)};return e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center animate-fade-in\\\\",onClick:t,children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700\\\\",onClick:h=>h.stopPropagation(),children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-amber-400\\\\",children:\\\\"Archive a Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"text-white hover:text-gray-300\\\\",\\\\"aria-label\\\\":\\\\"Close\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-6 w-6\\\\",fill:\\\\"none\\\\",viewBox:\\\\"0 0 24 24\\\\",stroke:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M6 18L18 6M6 6l12 12\\\\"})})})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-6 space-y-4\\\\",children:[e.jsx(\\\\"p\\\\",{className:\\\\"text-gray-300\\\\",children:\\\\"Which course would you like to move to the archive?\\\\"}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"label\\\\",{htmlFor:\\\\"course-to-archive\\\\",className:\\\\"block text-sm font-medium text-gray-400\\\\",children:\\\\"Active Courses\\\\"}),e.jsx(\\\\"select\\\\",{id:\\\\"course-to-archive\\\\",value:a,onChange:h=>d(h.target.value),className:\\\\"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm\\\\",children:o.length>0?o.map(h=>e.jsx(\\\\"option\\\\",{value:h,children:h},h)):e.jsx(\\\\"option\\\\",{disabled:!0,children:\\\\"No active courses\\\\"})})]}),e.jsx(\\\\"p\\\\",{className:\\\\"text-xs text-gray-500\\\\",children:\\\\"Archived courses are removed from the main list but are not deleted from the system.\\\\"})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-6 py-4 bg-gray-800/50 border-t border-gray-700 flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:f,disabled:!a,className:\\\\"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition-colors text-sm font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed\\\\",children:\\\\"Archive Course\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"px-4 py-2 bg-transparent border border-gray-600 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white transition-colors text-sm\\\\",children:\\\\"Cancel\\\\"})]})]})})},D0=t=>t.startsWith(\\\\"Course \\\\")?t.replace(\\\\"Course \\\\",\\\\"CSE\\\\"):t.replace(\\\\" \\\\",\\\\"\\\\"),uv=({activeView:t,onNavigate:n,courseColors:i,onAddCourse:o,onArchiveCourse:a,onNextDayBuildClick:d,onBuildDfpClick:f,isSupervisor:h,onPublish:p,currentUserName:g,currentUserRank:y,instructorsList:v,onUserChange:S})=>{const[T,j]=N.useState(!1),[D,A]=N.useState(!1),[O,k]=N.useState(!1),[_,V]=N.useState(\\\\"\\\\"),[B,he]=N.useState(null),[J,R]=N.useState(!1),[L,X]=N.useState(\\\\"\\\\"),[K,z]=N.useState(\\\\"\\\\"),[De,Ee]=N.useState(!1),[ot,P]=N.useState(!1),Q=N.useRef(null),[Ae,ae]=N.useState(!1),[Le,F]=N.useState(!1),W=N.useRef(null),ne=[\\\\"NextDayBuild\\\\",\\\\"Priorities\\\\",\\\\"ProgramData\\\\",\\\\"BuildAnalysis\\\\",\\\\"NextDayInstructorSchedule\\\\",\\\\"NextDayTraineeSchedule\\\\"].includes(t),[Z,Ie]=N.useState(ne);N.useEffect(()=>{const Ne=Pe=>{Q.current&&!Q.current.contains(Pe.target)&&(P(!1),Ee(!1)),W.current&&!W.current.contains(Pe.target)&&(F(!1),ae(!1))};return document.addEventListener(\\\\"mousedown\\\\",Ne),()=>{document.removeEventListener(\\\\"mousedown\\\\",Ne)}},[]),N.useEffect(()=>{ne&&Ie(!0)},[ne]);const ke=()=>{Ie(Ne=>!Ne)},be=[{id:\\\\"Syllabus\\\\",label:\\\\"Syllabus\\\\"},{id:\\\\"CourseProgress\\\\",label:\\\\"Course Progress\\\\"}],oe=Ne=>{o(Ne),j(!1)},$=Ne=>{a(Ne),A(!1)},se=Ne=>{if(Ne.name===g){k(!1);return}he(Ne),R(!0),X(\\\\"\\\\"),z(\\\\"\\\\")},te=()=>{B&&L===B.pin?(S(B.name),R(!1),k(!1),he(null),X(\\\\"\\\\"),z(\\\\"\\\\")):z(\\\\"Invalid PIN\\\\")},Ye=v.filter(Ne=>Ne.name.toLowerCase().includes(_.toLowerCase())||Ne.rank.toLowerCase().includes(_.toLowerCase())||Ne.unit&&Ne.unit.toLowerCase().includes(_.toLowerCase())).reduce((Ne,Pe)=>{const ht=Pe.unit||\\\\"Unassigned\\\\";return Ne[ht]||(Ne[ht]=[]),Ne[ht].push(Pe),Ne},{}),ye=[\\\\"1FTS\\\\",\\\\"CFS\\\\",\\\\"2FTS\\\\"],Ce=Object.keys(Ye).sort((Ne,Pe)=>{const ht=ye.indexOf(Ne),ut=ye.indexOf(Pe);return ht!==-1&&ut!==-1?ht-ut:ht!==-1?-1:ut!==-1?1:Ne.localeCompare(Pe)}),Qe=Object.entries(i),yt=5,xe=Qe.slice(0,yt),ge=Qe.slice(yt,yt*2),Oe=[\\\\"MyDashboard\\\\",\\\\"SupervisorDashboard\\\\"].includes(t),Ge=[\\\\"Instructors\\\\",\\\\"InstructorSchedule\\\\"].includes(t),bt=()=>Ee(!0),It=()=>{ot||Ee(!1)},lt=()=>{const Ne=!ot;P(Ne),Ne&&Ee(!0)},U=Ne=>{n(Ne),P(!1),Ee(!1)},We=De||ot,Ue=[\\\\"CourseRoster\\\\",\\\\"TraineeSchedule\\\\"].includes(t),xt=()=>ae(!0),wt=()=>{Le||ae(!1)},qt=()=>{const Ne=!Le;F(Ne),Ne&&ae(!0)},re=Ne=>{n(Ne),F(!1),ae(!1)},we=Ae||Le;return e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"aside\\\\",{className:\\\\"w-[12.71rem] bg-gray-900 flex-shrink-0 flex flex-col border-r border-gray-700\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"h-16 flex items-center justify-center flex-shrink-0 px-4 border-b border-gray-800\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex w-full space-x-2 mt-2\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"MyDashboard\\\\"),className:`w-1/2 flex items-center justify-center text-center px-1 py-1 text-sm font-semibold rounded-md btn-aluminium-brushed ${t===\\\\"MyDashboard\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{className:\\\\"leading-tight\\\\",children:\\\\"My Dashboard\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>h&&n(\\\\"SupervisorDashboard\\\\"),disabled:!h,title:h?\\\\"View Supervisor Dashboard\\\\":\\\\"Access denied: Requires Flying Supervisor role.\\\\",className:`w-1/2 flex items-center justify-center text-center px-1 py-1 text-sm font-semibold rounded-md btn-aluminium-brushed ${t===\\\\"SupervisorDashboard\\\\"?\\\\"active\\\\":\\\\"\\\\"} ${h?\\\\"\\\\":\\\\"opacity-50 cursor-not-allowed\\\\"}`,children:e.jsx(\\\\"span\\\\",{className:\\\\"leading-tight\\\\",children:\\\\"Supervisor Dashboard\\\\"})})]})}),e.jsxs(\\\\"nav\\\\",{className:\\\\"flex-1 overflow-y-auto py-4 px-2 space-y-1\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"Program Schedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center space-x-3 btn-green-brushed rounded-md ${t===\\\\"Program Schedule\\\\"&&!Oe?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"DFP\\\\"})}),e.jsxs(\\\\"div\\\\",{ref:Q,onMouseLeave:It,children:[e.jsxs(\\\\"button\\\\",{onClick:lt,onMouseEnter:bt,className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center justify-between btn-aluminium-brushed rounded-md ${(Ge||We)&&!Oe?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Staff\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${We?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${We?\\\\"max-h-40\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>U(\\\\"Instructors\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${t===\\\\"Instructors\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Staff Profile\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>U(\\\\"InstructorSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${t===\\\\"InstructorSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Staff Schedule\\\\"})]})})]}),e.jsxs(\\\\"div\\\\",{ref:W,onMouseLeave:wt,children:[e.jsxs(\\\\"button\\\\",{onClick:qt,onMouseEnter:xt,className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center justify-between btn-aluminium-brushed rounded-md ${(Ue||we)&&!Oe?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Trainee\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${we?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${we?\\\\"max-h-40\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>re(\\\\"CourseRoster\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${t===\\\\"CourseRoster\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Trainee Profile\\\\"}),e.jsx(\\\\"button\\\\",{onClick:()=>re(\\\\"TraineeSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-medium btn-aluminium-brushed rounded-md ${t===\\\\"TraineeSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:\\\\"Trainee Schedule\\\\"})]})})]}),be.map(Ne=>e.jsx(\\\\"button\\\\",{onClick:()=>n(Ne.id),className:`w-full text-left px-4 py-1 text-sm font-medium flex items-center space-x-3 btn-aluminium-brushed rounded-md ${t===Ne.id&&!Oe?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:Ne.label})},Ne.id)),e.jsxs(\\\\"div\\\\",{className:\\\\"pt-12\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:ke,className:`w-full text-left px-4 py-1 text-sm font-semibold flex items-center justify-between btn-aluminium-brushed rounded-md ${ne?\\\\"active\\\\":\\\\"\\\\"}`,children:[e.jsx(\\\\"span\\\\",{children:\\\\"Next Day Build\\\\"}),e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:`h-5 w-5 transform transition-transform duration-200 ${Z?\\\\"rotate-180\\\\":\\\\"\\\\"}`,viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\\\\",clipRule:\\\\"evenodd\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:`overflow-hidden transition-[max-height] duration-300 ease-in-out ${Z?\\\\"max-h-96\\\\":\\\\"max-h-0\\\\"}`,children:e.jsxs(\\\\"div\\\\",{className:\\\\"pl-4 pr-2 pt-1 space-y-1 bg-black/10\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"NextDayBuild\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"NextDayBuild\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Program Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"NextDayInstructorSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"NextDayInstructorSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Staff Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"NextDayTraineeSchedule\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"NextDayTraineeSchedule\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Trainee Schedule\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"Priorities\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"Priorities\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Priorities\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"ProgramData\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"ProgramData\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Program Data\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"BuildAnalysis\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"BuildAnalysis\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Build Analysis\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:f,className:\\\\"w-full text-left px-4 py-1 text-sm font-semibold btn-orange-brushed rounded-md\\\\",children:e.jsx(\\\\"span\\\\",{children:\\\\"NEO - Build\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:p,className:\\\\"w-full text-left px-4 py-1 text-sm font-semibold btn-green-brushed rounded-md\\\\",children:e.jsx(\\\\"span\\\\",{children:\\\\"Publish\\\\"})})]})})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex-shrink-0 border-t border-gray-700\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"px-2 py-2 space-y-2\\\\",children:e.jsx(\\\\"div\\\\",{children:e.jsx(\\\\"button\\\\",{onClick:()=>n(\\\\"Settings\\\\"),className:`w-full text-left px-4 py-1 text-sm font-semibold btn-aluminium-brushed rounded-md ${t===\\\\"Settings\\\\"?\\\\"active\\\\":\\\\"\\\\"}`,children:e.jsx(\\\\"span\\\\",{children:\\\\"Settings\\\\"})},\\\\"Settings\\\\")})}),e.jsxs(\\\\"div\\\\",{className:\\\\"border-t border-gray-700 flex-shrink-0\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"px-4 pt-4 mb-2 flex justify-between items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:\\\\"text-xs font-semibold text-gray-500 uppercase tracking-wider\\\\",children:\\\\"Courses\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-1\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>j(!0),className:\\\\"p-1 rounded bg-gray-700 hover:bg-gray-600 transition-colors\\\\",\\\\"aria-label\\\\":\\\\"Add course\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4 text-gray-300\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"button\\\\",{onClick:()=>A(!0),className:\\\\"p-1 rounded bg-gray-700 hover:bg-gray-600 transition-colors\\\\",\\\\"aria-label\\\\":\\\\"Archive course\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-4 w-4 text-gray-300\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\\\\",clipRule:\\\\"evenodd\\\\"})})})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"px-4 pb-2 flex space-x-4\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 min-w-0\\\\",children:xe.map(([Ne,Pe])=>e.jsxs(\\\\"div\\\\",{className:\\\\"py-1 flex items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:`h-3 w-3 rounded-full ${Pe} mr-3 flex-shrink-0`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-xs text-gray-300 truncate\\\\",children:D0(Ne)})]},Ne))}),ge.length>0&&e.jsx(\\\\"div\\\\",{className:\\\\"flex-1 min-w-0\\\\",children:ge.map(([Ne,Pe])=>e.jsxs(\\\\"div\\\\",{className:\\\\"py-1 flex items-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:`h-3 w-3 rounded-full ${Pe} mr-3 flex-shrink-0`}),e.jsx(\\\\"span\\\\",{className:\\\\"text-xs text-gray-300 truncate\\\\",children:D0(Ne)})]},Ne))})]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"p-4 border-t border-gray-700 flex-shrink-0 flex justify-between items-center text-xs text-gray-500\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"relative\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:()=>k(!O),className:\\\\"flex items-center space-x-1 text-gray-500 hover:text-gray-300 transition-colors\\\\",children:[e.jsxs(\\\\"span\\\\",{className:\\\\"truncate\\\\",children:[y,\\\\" \\\\",g]}),e.jsx(\\\\"svg\\\\",{className:`h-3 w-3 transform transition-transform ${O?\\\\"rotate-180\\\\":\\\\"\\\\"}`,fill:\\\\"none\\\\",stroke:\\\\"currentColor\\\\",viewBox:\\\\"0 0 24 24\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M19 9l-7 7-7-7\\\\"})})]}),O&&e.jsxs(\\\\"div\\\\",{className:\\\\"absolute bottom-full left-0 mb-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-50\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"p-3 border-b border-gray-700\\\\",children:[e.jsx(\\\\"input\\\\",{type:\\\\"text\\\\",placeholder:\\\\"Search users...\\\\",value:_,onChange:Ne=>V(Ne.target.value),className:\\\\"w-full pl-8 pr-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:ring-1 focus:ring-sky-500\\\\"}),e.jsx(\\\\"svg\\\\",{className:\\\\"absolute left-5 top-5 h-4 w-4 text-gray-400\\\\",fill:\\\\"none\\\\",stroke:\\\\"currentColor\\\\",viewBox:\\\\"0 0 24 24\\\\",children:e.jsx(\\\\"path\\\\",{strokeLinecap:\\\\"round\\\\",strokeLinejoin:\\\\"round\\\\",strokeWidth:2,d:\\\\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\\\\"})})]}),e.jsx(\\\\"div\\\\",{className:\\\\"max-h-60 overflow-y-auto\\\\",children:Ce.map(Ne=>e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"div\\\\",{className:\\\\"px-3 py-2 bg-gray-900 border-b border-gray-700 sticky top-0\\\\",children:e.jsx(\\\\"span\\\\",{className:\\\\"text-xs font-semibold text-gray-400 uppercase\\\\",children:Ne})}),Ye[Ne].map(Pe=>e.jsxs(\\\\"button\\\\",{onClick:()=>se(Pe),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-700 transition-colors flex items-center justify-between ${Pe.name===g?\\\\"bg-gray-700 text-sky-400\\\\":\\\\"text-gray-300\\\\"}`,children:[e.jsxs(\\\\"span\\\\",{children:[Pe.rank,\\\\" \\\\",Pe.name]}),Pe.name===g&&e.jsx(\\\\"svg\\\\",{className:\\\\"h-4 w-4 text-sky-400\\\\",fill:\\\\"currentColor\\\\",viewBox:\\\\"0 0 20 20\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\\\\",clipRule:\\\\"evenodd\\\\"})})]},Pe.name))]},Ne))}),e.jsx(\\\\"div\\\\",{className:\\\\"p-2 border-t border-gray-700\\\\",children:e.jsx(\\\\"button\\\\",{onClick:()=>k(!1),className:\\\\"w-full px-3 py-1 text-sm text-gray-400 hover:text-gray-300\\\\",children:\\\\"Cancel\\\\"})})]})]}),e.jsx(\\\\"span\\\\",{children:\\\\"v1.0.0\\\\"})]})]})]}),T&&e.jsx(cv,{onClose:()=>j(!1),onSave:oe,existingCourses:i}),D&&e.jsx(dv,{onClose:()=>A(!1),onArchive:$,activeCourses:i}),J&&B&&e.jsx(\\\\"div\\\\",{className:\\\\"fixed inset-0 bg-black/70 z-[90] flex items-center justify-center\\\\",onClick:()=>R(!1),children:e.jsx(\\\\"div\\\\",{className:\\\\"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700\\\\",onClick:Ne=>Ne.stopPropagation(),children:e.jsxs(\\\\"div\\\\",{className:\\\\"p-6\\\\",children:[e.jsx(\\\\"h2\\\\",{className:\\\\"text-xl font-bold text-white mb-4\\\\",children:\\\\"Confirm User Switch\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"mb-6\\\\",children:[e.jsxs(\\\\"p\\\\",{className:\\\\"text-gray-300 mb-2\\\\",children:[\\\\"Switch from \\\\",e.jsxs(\\\\"span\\\\",{className:\\\\"font-semibold text-sky-400\\\\",children:[y,\\\\" \\\\",g]}),\\\\" to:\\\\"]}),e.jsxs(\\\\"p\\\\",{className:\\\\"font-semibold text-white text-lg\\\\",children:[B.rank,\\\\" \\\\",B.name]})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"mb-6\\\\",children:[e.jsxs(\\\\"label\\\\",{className:\\\\"block text-sm font-medium text-gray-400 mb-2\\\\",children:[\\\\"Enter PIN for \\\\",B.name,\\\\":\\\\"]}),e.jsx(\\\\"input\\\\",{type:\\\\"password\\\\",value:L,onChange:Ne=>X(Ne.target.value),onKeyPress:Ne=>Ne.key===\\\\"Enter\\\\"&&te(),placeholder:\\\\"Enter PIN\\\\",className:\\\\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-1 focus:ring-sky-500\\\\",autoFocus:!0}),K&&e.jsx(\\\\"p\\\\",{className:\\\\"mt-2 text-sm text-red-400\\\\",children:K})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex justify-end space-x-3\\\\",children:[e.jsx(\\\\"button\\\\",{onClick:()=>{R(!1),he(null),X(\\\\"\\\\"),z(\\\\"\\\\")},className:\\\\"px-4 py-2 text-gray-400 hover:text-gray-300\\\\",children:\\\\"Cancel\\\\"}),e.jsx(\\\\"button\\\\",{onClick:te,className:\\\\"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700\\\\",children:\\\\"Switch User\\\\"})]})]})})})]})},fv=({onAddTile:t,onAddGroundEvent:n,showValidation:i,setShowValidation:o,locations:a,activeLocation:d,onLocationChange:f,isMagnifierEnabled:h,setIsMagnifierEnabled:p,isMultiSelectMode:g,setIsMultiSelectMode:y,isOracleMode:v,onToggleOracleMode:S})=>e.jsx(e.Fragment,{children:e.jsxs(\\\\"header\\\\",{className:\\\\"bg-gray-800 h-16 flex-shrink-0 flex items-center justify-between px-4 z-20\\\\",children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-4\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"w-32\\\\",children:e.jsx(\\\\"select\\\\",{value:d,onChange:T=>f(T.target.value),className:\\\\"bg-gray-700 border-gray-600 rounded-md text-white py-1 px-2 text-sm focus:ring-sky-500 focus:border-sky-500 focus:outline-none w-full text-center\\\\",children:a.map(T=>e.jsx(\\\\"option\\\\",{value:T,children:T},T))})}),e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center\\\\",children:e.jsx(_l,{pageName:\\\\"Program Schedule\\\\",className:\\\\"\\\\"})}),e.jsx(\\\\"button\\\\",{onClick:()=>y(!g),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${g?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,title:\\\\"Toggle multi-select mode\\\\",children:e.jsx(\\\\"img\\\\",{src:\\\\"./multi-select-icon.png\\\\",alt:\\\\"Multi-select mode\\\\",style:{height:\\\\"20px\\\\",width:\\\\"20px\\\\",display:\\\\"block\\\\"}})}),e.jsx(\\\\"button\\\\",{onClick:()=>p(!h),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${h?\\\\"bg-sky-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,\\\\"aria-label\\\\":\\\\"Toggle Magnifier\\\\",children:e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{fillRule:\\\\"evenodd\\\\",d:\\\\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8zm6-3a1 1 0 011 1v2h2a1 1 0 110 2H9v2a1 1 0 11-2 0V9H5a1 1 0 110-2h2V6a1 1 0 011-1z\\\\",clipRule:\\\\"evenodd\\\\"})})}),e.jsx(\\\\"button\\\\",{onClick:()=>o(!i),className:`p-1.5 rounded-md transition-colors text-xs font-semibold shadow-sm ${i?\\\\"bg-orange-600 text-white\\\\":\\\\"bg-gray-600 text-white hover:bg-gray-500\\\\"}`,title:\\\\"Toggle validation\\\\",children:e.jsx(\\\\"img\\\\",{src:\\\\"./warning-icon.png\\\\",alt:\\\\"Validation mode\\\\",style:{height:\\\\"20px\\\\",width:\\\\"20px\\\\",display:\\\\"block\\\\"}})})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center space-x-2\\\\",children:[e.jsxs(\\\\"button\\\\",{onClick:S,className:`w-36 text-center py-1 rounded-md text-sm font-semibold transition-all duration-200 shadow-lg flex items-center justify-center space-x-2 ${v?\\\\"btn-gold-brushed active animate-pulse\\\\":\\\\"btn-gold-brushed\\\\"}`,children:[e.jsx(\\\\"svg\\\\",{xmlns:\\\\"http://www.w3.org/2000/svg\\\\",className:\\\\"h-5 w-5\\\\",viewBox:\\\\"0 0 20 20\\\\",fill:\\\\"currentColor\\\\",children:e.jsx(\\\\"path\\\\",{d:\\\\"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 0011 7v10zM4 17a1 1 0 001.447.894l4-2A1 1 0 0010 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 004 7v10z\\\\"})}),e.jsx(\\\\"span\\\\",{children:\\\\"Oracle\\\\"})]}),e.jsx(\\\\"button\\\\",{onClick:n,className:\\\\"w-36 text-center py-1 rounded-md text-sm font-semibold btn-aluminium-brushed\\\\",children:\\\\"Add Ground Event\\\\"}),e.jsx(\\\\"button\\\\",{onClick:t,className:\\\\"w-36 text-center py-1 rounded-md text-sm font-semibold btn-aluminium-brushed\\\\",children:\\\\"Add Tile\\\\"})]})})]})}),Bd=t=>{const n=Math.floor(t),i=Math.round(t%1*60);return`${String(n).padStart(2,\\\\"0\\\\")}:${String(i).padStart(2,\\\\"0\\\\")}`},mv=(t,n)=>{if(t.type!==\\\\"flight\\\\")return\\\\"\\\\";const i=new Date().toISOString().split(\\\\"T\\\\")[0];if(t.date!==i)return\\\\"\\\\";const o=!!(t.authoSignedBy&&t.captainSignedBy),a=!!(t.authoSignedBy||t.isVerbalAuth),d=!a&&!t.captainSignedBy;if(o)return\\\\"text-green-400\\\\";const f=n.getHours()+n.getMinutes()/60,h=t.startTime+t.duration;if(f>=h)return\\\\"\\\\";if(a&&!t.captainSignedBy)return\\\\"text-sky-400\\\\";if(d){const p=t.startTime-f;if(p<=.25)return\\\\"text-red-500\\\\";if(p<=2)return\\\\"text-amber-400\\\\"}return\\\\"\\\\"},Zo=({event:t,traineesData:n,onSelectEvent:i,onMouseDown:o,onMouseEnter:a,onMouseLeave:d,pixelsPerHour:f,rowHeight:h,startHour:p,row:g,isDragging:y,isConflicting:v,conflictedPersonnelName:S,personnelData:T,seatConfigs:j,isDraggable:D=!0,currentTime:A,isUnavailabilityConflict:O,unavailablePersonnel:k,isSelected:_=!1,isChanged:V=!1,isPreview:B=!1})=>{const he=t,J=he.segmentStartTime!==void 0?he.segmentStartTime:t.startTime,R=he.segmentDuration!==void 0?he.segmentDuration:t.duration,L=(R||0)*f,X=t.resourceId===\\\\"Duty Sup\\\\",K=L<60,De=he.segmentType===\\\\"start\\\\"||J+R>22,Ee={left:`${(J-p)*f}px`,top:`${g*h}px`,width:`${L}px`,height:`${h-4}px`,marginTop:\\\\"2px\\\\"},ot=()=>{if(v||O)return\\\\"ring-red-400\\\\";const Oe=new Date().toISOString().split(\\\\"T\\\\")[0];if(t.date!==Oe)return\\\\"ring-transparent\\\\";if(!!(t.authoSignedBy&&t.captainSignedBy))return\\\\"ring-green-400\\\\";const bt=A.getHours()+A.getMinutes()/60,It=t.startTime+t.duration;if(bt>=It||!!(t.authoSignedBy||t.isVerbalAuth))return\\\\"ring-transparent\\\\";const U=t.startTime-bt;return U<=.25?\\\\"ring-red-500\\\\":U<=2?\\\\"ring-amber-400\\\\":\\\\"ring-transparent\\\\"},Le=Math.max(7,Math.min(13,L/200*8)),F=t.eventCategory===\\\\"sct\\\\";F&&console.log(\\\\"\\\\ud83c\\\\udfaf FlightTile rendering SCT event:\\\\",{id:t.id,flightType:t.flightType,pilot:t.pilot,student:t.student,instructor:t.instructor,eventCategory:t.eventCategory,fullEvent:t});const W=F||t.flightType===\\\\"Solo\\\\"?t.pilot:t.instructor,ce=F?t.student:t.student||(t.flightType===\\\\"Solo\\\\"?t.pilot:\\\\"\\\\");let ne=\\\\"font-semibold truncate\\\\",Z=\\\\"truncate\\\\";if(B)W!=null&&W.includes(\\\\"\\\\u2713\\\\")?ne=\\\\"font-bold truncate text-green-400\\\\":W!=null&&W.includes(\\\\"\\\\u2715\\\\")&&(ne=\\\\"font-bold truncate text-red-500\\\\"),ce!=null&&ce.includes(\\\\"\\\\u2713\\\\")?Z=\\\\"font-bold truncate text-green-400\\\\":ce!=null&&ce.includes(\\\\"\\\\u2715\\\\")&&(Z=\\\\"font-bold truncate text-red-500\\\\");else{const Oe=mv(t,A),Ge=k&&k.includes(W||\\\\"\\\\"),bt=k&&k.includes(ce||\\\\"\\\\"),It=A.getHours()+A.getMinutes()/60,lt=t.startTime+t.duration,U=It>=lt&&t.date===new Date().toISOString().split(\\\\"T\\\\")[0];S===W||Ge&&!U?ne=\\\\"font-bold truncate text-red-500\\\\":Oe&&(ne+=` ${Oe}`),S===ce||bt&&!U?Z=\\\\"font-bold truncate text-red-500\\\\":Z+=\\\\" text-white/80\\\\"}const ke=(()=>{if(B)return ce;if(F&&t.flightType===\\\\"Solo\\\\")return e.jsx(\\\\"span\\\\",{className:\\\\"bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold\\\\",style:{fontSize:K?\\\\"10px\\\\":`${Le*.85}px`},children:\\\\"SOLO\\\\"});if(F&&t.flightType===\\\\"Dual\\\\"&&t.student)return t.student.split(\\\\" \\\\u2013 \\\\")[0];if(t.flightType===\\\\"Solo\\\\")return e.jsx(\\\\"span\\\\",{className:\\\\"bg-yellow-500/20 text-yellow-100 px-1.5 py-0.5 rounded-sm font-bold\\\\",style:{fontSize:K?\\\\"10px\\\\":`${Le*.85}px`},children:\\\\"SOLO\\\\"});if(t.groupTraineeIds&&t.groupTraineeIds.length>1||t.attendees&&t.attendees.length>1||t.student===\\\\"Multiple\\\\")return\\\\"Group\\\\";if(t.student&&t.student!==\\\\"Multiple\\\\")return t.student.split(\\\\" \\\\u2013 \\\\")[0];if(t.attendees&&t.attendees.length===1)return t.attendees[0].split(\\\\" \\\\u2013 \\\\")[0];if(t.groupTraineeIds&&t.groupTraineeIds.length===1){const Oe=n.find(Ge=>Ge.idNumber===t.groupTraineeIds[0]);return Oe?Oe.name.split(\\\\",\\\\")[0]:\\\\"Group\\\\"}return\\\\"\\\\"})(),be=t.callsign||\\\\"\\\\",oe=W?T.get(W):void 0,$=oe&&oe.callsignNumber>0?`${oe.callsignPrefix} ${String(oe.callsignNumber).padStart(3,\\\\"0\\\\")}`:\\\\"\\\\",se=be||$,te=()=>{var bt,It;if(K)return null;const Oe={fontSize:`${Le}px`,lineHeight:\\\\"1.3\\\\"},Ge=t.flightNumber.includes(\\\\"CPT\\\\")||t.flightNumber.includes(\\\\"MB\\\\")||t.flightNumber.includes(\\\\"TUT\\\\")||t.flightNumber.includes(\\\\"QUIZ\\\\");return t.type===\\\\"deployment\\\\"?e.jsx(\\\\"div\\\\",{className:\\\\"flex justify-center items-center h-full w-full px-2\\\\",style:Oe,children:e.jsxs(\\\\"div\\\\",{className:\\\\"overflow-hidden text-center\\\\",children:[e.jsx(\\\\"div\\\\",{className:\\\\"text-white/80 font-medium text-sm\\\\",children:\\\\"DEPLOYMENT\\\\"}),e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-white/60 truncate\\\\",children:\\\\"deployed\\\\"}),e.jsxs(\\\\"div\\\\",{className:\\\\"text-xs text-white/50 mt-1\\\\",children:[(bt=t.deploymentStartTime)==null?void 0:bt.replace(/:/g,\\\\"\\\\"),\\\\" - \\\\",(It=t.deploymentEndTime)==null?void 0:It.replace(/:/g,\\\\"\\\\")]})]})}):t.type===\\\\"ftd\\\\"||t.type===\\\\"ground\\\\"||Ge?X?e.jsx(\\\\"div\\\\",{className:\\\\"flex justify-center items-center h-full w-full px-2\\\\",style:Oe,children:e.jsxs(\\\\"div\\\\",{className:\\\\"overflow-hidden text-center\\\\",children:[e.jsx(\\\\"div\\\\",{className:ne,children:W==null?void 0:W.split(\\\\" \\\\u2013 \\\\")[0]}),e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 truncate\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Le-2}px`},children:[\\\\"[\\\\",(t.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",t.flightNumber]})]})}):e.jsxs(\\\\"div\\\\",{className:\\\\"flex justify-between items-center h-full w-full px-2\\\\",style:Oe,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 overflow-hidden pr-2\\\\",style:{paddingLeft:\\\\"12%\\\\"},children:[e.jsx(\\\\"div\\\\",{className:ne,children:W==null?void 0:W.split(\\\\" \\\\u2013 \\\\")[0]}),e.jsx(\\\\"div\\\\",{className:Z,children:ke})]}),e.jsxs(\\\\"div\\\\",{className:\\\\"flex flex-col items-end justify-between h-full ml-2 flex-shrink-0 w-20\\\\",children:[e.jsx(\\\\"div\\\\",{children:e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 truncate text-right\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Le-2}px`},children:[\\\\"[\\\\",(t.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",t.flightNumber]})}),e.jsx(\\\\"div\\\\",{})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex items-center justify-between h-full w-full px-2\\\\",style:Oe,children:[e.jsxs(\\\\"div\\\\",{className:\\\\"flex-1 overflow-hidden pr-2\\\\",style:{paddingLeft:\\\\"12%\\\\"},children:[e.jsx(\\\\"div\\\\",{className:ne,children:W==null?void 0:W.split(\\\\" \\\\u2013 \\\\")[0]}),e.jsx(\\\\"div\\\\",{className:Z,children:ke})]}),e.jsx(\\\\"div\\\\",{className:\\\\"flex flex-col items-end justify-between h-full pl-2 flex-shrink-0 w-20\\\\",children:e.jsx(\\\\"div\\\\",{children:e.jsxs(\\\\"div\\\\",{className:\\\\"font-mono text-white/80 truncate text-right\\\\",children:[e.jsxs(\\\\"span\\\\",{style:{fontSize:`${Le-2}px`},children:[\\\\"[\\\\",(t.duration||0).toFixed(1),\\\\"]\\\\"]}),\\\\" \\\\",t.flightNumber]})})})]}),t.area&&e.jsx(\\\\"div\\\\",{className:`absolute bottom-0.5 left-1 font-sans font-light ${[\\\\"A\\\\",\\\\"B\\\\",\\\\"C\\\\",\\\\"D\\\\",\\\\"E\\\\",\\\\"F\\\\",\\\\"G\\\\",\\\\"H\\\\"].includes(t.area)?\\\\"text-white\\\\":\\\\"text-yellow-300\\\\"}`,style:{fontSize:`${Le}px`,lineHeight:\\\\"1\\\\",opacity:.7},children:t.area}),se&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute bottom-0.5 right-3 font-mono text-white/80\\\\",style:{fontSize:`${Le-2}px`,lineHeight:\\\\"1\\\\",opacity:.8},children:se})]})},Ye=`absolute rounded-sm ${D?\\\\"cursor-grab\\\\":\\\\"cursor-pointer\\\\"} transition-all duration-200 ${y?\\\\"opacity-80 z-50\\\\":\\\\"z-10\\\\"} ${y?\\\\"shadow-xl\\\\":\\\\"shadow-md\\\\"}`,ye=t.resourceId&&(t.resourceId.startsWith(\\\\"STBY\\\\")||t.resourceId.startsWith(\\\\"BNF-STBY\\\\")),Ce=t.type===\\\\"deployment\\\\"?\\\\"bg-gray-600/30 border border-white/60\\\\":O?\\\\"bg-red-800/90\\\\":v?\\\\"bg-red-600/70\\\\":t.color,Qe=ot(),yt=X?\\\\"border border-black\\\\":\\\\"\\\\",xe=_?\\\\"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900\\\\":\\\\"\\\\",ge=[Ye];B?(ge.push(t.color),ge.push(\\\\"border-2 border-dashed border-sky-300\\\\")):(ge.push(Ce),ge.push(`ring-[0.92px] ${Qe}`),ge.push(yt),ge.push(xe)),K||ge.push(\\\\"overflow-hidden\\\\");const Re=()=>{if(!K)return null;const Oe={position:\\\\"absolute\\\\",top:0,[De?\\\\"right\\\\":\\\\"left\\\\"]:\\\\"100%\\\\",marginLeft:De?0:\\\\"4px\\\\",marginRight:De?\\\\"4px\\\\":0,whiteSpace:\\\\"nowrap\\\\",zIndex:60};return e.jsx(\\\\"div\\\\",{style:Oe,className:\\\\"flex items-center\\\\",children:e.jsxs(\\\\"div\\\\",{className:\\\\"bg-gray-800 border border-gray-600 rounded px-2 py-1 shadow-lg flex items-center space-x-3 text-xs\\\\",children:[e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"div\\\\",{className:`font-bold ${ne.replace(\\\\"truncate\\\\",\\\\"\\\\")}`,children:W==null?void 0:W.split(\\\\" \\\\u2013 \\\\")[0]}),e.jsx(\\\\"div\\\\",{className:Z.replace(\\\\"truncate\\\\",\\\\"\\\\"),children:ke})]}),e.jsx(\\\\"div\\\\",{className:\\\\"h-6 w-px bg-gray-600\\\\"}),e.jsxs(\\\\"div\\\\",{children:[e.jsx(\\\\"div\\\\",{className:\\\\"font-mono font-semibold text-sky-400\\\\",children:t.flightNumber}),e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-gray-400\\\\",children:Bd(J)})]}),se&&e.jsx(\\\\"div\\\\",{className:\\\\"font-mono text-gray-500 text-[10px]\\\\",children:se})]})})};return e.jsxs(\\\\"div\\\\",{\\\\"data-is-flight-tile\\\\":\\\\"true\\\\",style:Ee,className:ge.join(\\\\" \\\\"),onClick:i,onMouseDown:Oe=>{console.log(\\\\"FlightTile onMouseDown called for event:\\\\",t.id),Oe.stopPropagation(),o(Oe)},onMouseEnter:a,onMouseLeave:d,children:[V&&!B&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute right-0 top-0 bottom-0 w-1.5 changed-bar-stripes z-20 pointer-events-none\\\\"}),ye&&!B&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute inset-0 pointer-events-none z-10\\\\",style:{backgroundImage:\\\\"repeating-linear-gradient(45deg, rgba(209, 213, 219, 0.4) 0px, rgba(209, 213, 219, 0.4) 3px, transparent 3px, transparent 8px)\\\\"}}),e.jsxs(\\\\"div\\\\",{className:\\\\"relative w-full h-full text-white\\\\",children:[X?e.jsxs(e.Fragment,{children:[e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1 left-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Le*.825}px`},children:Bd(J)}),e.jsx(\\\\"div\\\\",{className:\\\\"absolute top-1 right-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Le*.825}px`},children:Bd(J+R)})]}):!K&&e.jsx(\\\\"div\\\\",{className:\\\\"absolute -top-px left-1 font-mono text-white/60 pointer-events-none\\\\",style:{fontSize:`${Le*.75}px`},children:Bd(J)}),te(),Re()]})]})},A0=t=>!t||typeof t!=\\\\"string\\\\"?\\\\"Other\\\\":t.startsWith(\\\\"PC-21\\\\")||t.startsWith(\\\\"Deployed\\\\")?\\\\"PC-21\\\\":t.startsWith(\\\\"STBY\\\\")?\\\\"STBY\\\\":t===\\\\"Duty Sup\\\\"?\\\\"Duty Sup\\\\":t.startsWith(\\\\"FTD\\\\")?\\\\"FTD\\\\":t.startsWith(\\\\"CPT\\\\")?\\\\"CPT\\\\":t.startsWith(\\\\"Ground\\\\")?\\\\"Ground\\\\":\\\\"Other\\\\",Lx=({resources:t,onReorder:n,rowHeight:i,airframeCount:o,standbyCount:a,ftdCount:d,cptCount:f,events:h=[]})=>{const[p,g]=N.useState(null),y=D=>{g(D)},v=D=>{D.preventDefault()},S=D=>{if(p===null||p===D){g(null);return}const A=[...t],O=A.splice(p,1)[0];A.splice(D,0,O),n(A),g(null)},T=[];for(let D=1;D<=24;D++)T.push(`PC-21 ${D}`);T.push(\\\\"Duty Sup\\\\");let j=4;if(h.length>0){const D=h.filter(O=>(O==null?void 0:O.resourceId)&&(O.resourceId.startsWith(\\\\"STBY\\\\")||O.resourceId.startsWith(\\\\"BNF-STBY\\\\"))),A=new Set(D.map(O=>O.resourceId));j=Math.max(A.size,4)}for(let D=0;D<j;D++)T.push(\\\\"STBY\\\\");for(let D=0;D<5;D++)T.push(\\\\"FTD\\\\");for(let D=0;D<4;D++)T.push(\\\\"CPT\\\\");if(h.length>0){const D=h.filter(O=>(O==null?void 0:O.resourceId)&&O.resourceId.startsWith(\\\\"Ground\\\\"));new Set(D.map(O=>O.resourceId)).forEach(()=>T.push(\\\\"Ground\\\\"))}return e.jsx(\\\\"div\\\\",{className:\\\\"w-36 bg-gray-800 flex-shrink-0 h-full\\\\",children:e.jsx(\\\\"ul\\\\",{children:T.map((D,A)=>{var z;let O=D,k=\\\\"text-gray-400\\\\",_=!0;D===\\\\"Duty Sup\\\\"?(k=\\\\"text-amber-300 font-semibold\\\\",_=!1):D.startsWith(\\\\"Deployed\\\\")?(k=\\\\"text-purple-300 font-semibold\\\\",_=!1):D.startsWith(\\\\"PC-21\\\\")?(k=\\\\"text-gray-400\\\\",_=!0):D===\\\\"STBY\\\\"?(k=\\\\"text-gray-400\\\\",_=!1):D===\\\\"FTD\\\\"?(k=\\\\"text-indigo-300\\\\",_=!0):D===\\\\"CPT\\\\"?(k=\\\\"text-cyan-300\\\\",_=!1):D===\\\\"Ground\\\\"&&(k=\\\\"text-gray-400\\\\",_=!1);const V=A0(D),B=A>0?A0(T[A-1]):V,he=A>0&&V!==B,J=\\\\"flex items-center justify-center text-xs font-mono transition-all duration-150\\\\",R=_?\\\\"cursor-move\\\\":\\\\"\\\\",L=he?\\\\"border-t-2 border-t-gray-500 border-b border-b-gray-700/50\\\\":\\\\"border-b border-gray-700/50\\\\",X=_?\\\\"hover:bg-gray-700\\\\":\\\\"\\\\",K=p===A?\\\\"opacity-50 bg-sky-900\\\\":\\\\"\\\\";return e.jsx(\\\\"li\\\\",{draggable:_,onDragStart:()=>_&&y(A),onDragOver:v,onDrop:()=>_&&S(A),onDragEnd:()=>g(null),className:`${J} ${k} ${R} ${L} ${X} ${K}`,style:{height:i},children:D.startsWith(\\\\"PC-21\\\\")?e.jsxs(\\\\"div\\\\",{className:\\\\"relative w-full text-center\\\\",children:[e.jsx(\\\\"span\\\\",{className:\\\\"absolute left-1 top-1/2 -translate-y-1/2 text-gray-400 text-xs\\\\",children:((z=D.match(/\\\\\\\\d+$/))==null?void 0:z[0])||\\\\"\\\\"}),e.jsx(\\\\"span\\\\",{children:\\\\"PC-21\\\\"})]}):e.jsx(\\\\"div\\\\",{className:\\\\"w-full text-center\\\\",children:e.jsx(\\\\"span\\\\",{children:O})})},`${D}-${A}`)})})})},qn=200,tl=32,Jn=0,co=24,hv=co-Jn,k0=144,M0=40,gv=(t,n)=>{if(!t||!n||t.duration<=0||n.duration<=0)return!1;const i=t.startTime+t.duration,o=n.startTime+n.duration;return t.startTime<o&&i>n.startTime},Gf=t=>{const n=[];return t.flightType===\\\\"Solo\\\\"?t.pilot&&n.push(t.pilot):(t.instructor&&n.push(t.instructor),t.student&&n.push(t.student)),t.attendees&&n.push(...t.attendees),n},pv=(t,n)=>{if(!n)return!1;const i=n.find(a=>a.id===t.id);if(!i)return!0;const o=.001;return Math.abs(t.startTime-i.startTime)>o||Math.abs(t.duration-i.duration)>o?!0:t.resourceId!==i.resourceId||t.instructor!==i.instructor||t.student!==i.student||t.pilot!==i.pilot||(t.area||\\\\"\\\\")!==(i.area||\\\\"\\\\")},I0=t=>t.startsWith(\\\\"PC-21\\\\")||t.startsWith(\\\\"Deployed\\\\")?\\\\"PC-21\\\\":t.startsWith(\\\\"STBY\\\\")?\\\\"STBY\\\\":t===\\\\"Duty Sup\\\\"?\\\\"Duty Sup\\\\":t.startsWith(\\\\"FTD\\\\")?\\\\"FTD\\\\":t.startsWith(\\\\"CPT\\\\")?\\\\"CPT\\\\":t.startsWith(\\\\"Ground\\\\")?\\\\"Ground\\\\":\\\\"Other\\\\",xv=({date:t,onDateChange:n,events:i,resources:o,instructors:a,traineesData:d,airframeCount:f,standbyCount:h,ftdCount:p,cptCount:g,onUpdateEvent:y,onSelectEvent:v,onReorderResources:S,zoomLevel:T,showValidation:j,showPrePost:D,syllabusDetails:A,personnelData:O,seatConfigs:k,daylightTimes:_,personnelConflicts:V,personnelConflictIds:B,unavailabilityConflicts:he,onCptConflict:J,isMultiSelectMode:R,selectedEventIds:L,setSelectedEventIds:X,baselineEvents:K,isOracleMode:z,oraclePreviewEvent:De,onOracleMouseDown:Ee,onOracleMouseMove:ot,onOracleMouseUp:P,detectConflictsForEvent:Q,showDepartureDensityOverlay:Ae})=>{const ae=N.useRef(null),Le=N.useRef(null),[F,W]=N.useState(new Date),ce=N.useRef(!0),ne=N.useRef(T),[Z,Ie]=N.useState(null),[ke,be]=N.useState(null),[oe,$]=N.useState(null),[se,te]=N.useState(null),ve=N.useRef(!1),Ye=N.useRef(null),[ye,Ce]=N.useState(null),[Qe,yt]=N.useState(null);N.useEffect(()=>{const re=setInterval(()=>W(new Date),1e3),we=Pe=>{Z&&(console.log(\\\\"Global mouse move - drag state active\\\\"),Oe(Pe))},Ne=Pe=>{console.log(\\\\"Global mouse up called, draggingState exists:\\\\",!!Z),Z&&(console.log(\\\\"Global mouse up - ending drag\\\\"),document.body.classList.remove(\\\\"no-select\\\\"),Ie(null),be(null),$(null),te(null))};return document.addEventListener(\\\\"mousemove\\\\",we),document.addEventListener(\\\\"mouseup\\\\",Ne),()=>{clearInterval(re),document.removeEventListener(\\\\"mousemove\\\\",we),document.removeEventListener(\\\\"mouseup\\\\",Ne)}},[Z]);const xe=N.useMemo(()=>{const[re,we,Ne]=t.split(\\\\"-\\\\").map(Number);return new Date(Date.UTC(re,we-1,Ne)).toLocaleDateString(\\\\"en-GB\\\\",{day:\\\\"2-digit\\\\",month:\\\\"short\\\\",timeZone:\\\\"UTC\\\\"})},[t]);N.useEffect(()=>{const re=ae.current;if(re){if(ce.current){const Ne=(8-Jn)*qn*T;re.scrollLeft=Ne,ce.current=!1}else{const we=ne.current;if(we===T)return;const{scrollLeft:Ne,clientWidth:Pe}=re,ut=(Ne+Pe/2)/(qn*we)*qn*T-Pe/2;re.scrollLeft=ut}ne.current=T}},[T]);const ge=N.useCallback((re,we)=>{for(const Ne of re){const Pe=A.find(qe=>qe.id===Ne.flightNumber);if(!Pe)continue;const ht=Ne.startTime-(Pe.preFlightTime||0),ut=Ne.startTime+Ne.duration+(Pe.postFlightTime||0);for(const qe of we){const gt=A.find(Mt=>Mt.id===qe.flightNumber);if(!gt)continue;const zt=qe.startTime-(gt.preFlightTime||0),Qt=qe.startTime+qe.duration+(gt.postFlightTime||0);if(ht<Qt&&ut>zt){const Mt=Gf(Ne),Fn=Gf(qe),Jt=Mt.find($t=>Fn.includes($t));if(Jt)return{conflictingEvent:qe,personName:Jt}}}}return null},[A]),Re=(re,we)=>{if(console.log(\\\\"handleMouseDown called, event:\\\\",we==null?void 0:we.id,\\\\"isMultiSelectMode:\\\\",R),console.log(\\\\"Event target:\\\\",re.target),console.log(\\\\"Current target:\\\\",re.currentTarget),re.button===0){if(ve.current=!1,document.body.classList.add(\\\\"no-select\\\\"),z&&!we){if(!Le.current)return;const Ne=Le.current.getBoundingClientRect(),ht=(re.clientX-Ne.left)/(qn*T)+Jn,ut=re.clientY-Ne.top,qe=Math.floor(ut/tl),gt=o[qe]||o[0];Ee(ht,gt);return}if(we){const Pe=re.currentTarget.getBoundingClientRect(),ht=new Map,ut=new Map,qe=gt=>{console.log(\\\\"\\\\ud83d\\\\udc0d Processing event for drag:\\\\",gt.id,\\\\"resourceId:\\\\",gt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Available resources:\\\\",o);const zt=o.indexOf(gt.resourceId);console.log(\\\\"\\\\ud83d\\\\udc0d Found row index:\\\\",zt),zt!==-1?(ht.set(gt.id,{startTime:gt.startTime,rowIndex:zt}),ut.set(gt.id,gt.resourceId),console.log(\\\\"\\\\ud83d\\\\udc0d Event added to initialPositions\\\\")):console.log(\\\\"\\\\ud83d\\\\udc0d Event NOT added - resourceId not found in resources\\\\")};R&&L.has(we.id)?L.forEach(gt=>{const zt=i.find(Qt=>Qt.id===gt);zt&&qe(zt)}):qe(we),ht.size>0?(console.log(\\\\"Setting dragging state with\\\\",ht.size,\\\\"events for event:\\\\",we.id),console.log(\\\\"initialPositions:\\\\",ht),Ie({mainEventId:we.id,xOffset:(re.clientX-Pe.left)/T,yOffset:re.clientY-Pe.top,initialPositions:ht,originalResourceIds:ut}),console.log(\\\\"setDraggingState called with:\\\\",Z)):console.log(\\\\"No initial positions - drag state not set\\\\")}else{if(!R||!Le.current)return;const Ne=Le.current.getBoundingClientRect(),Pe=re.clientX-Ne.left,ht=re.clientY-Ne.top;Ye.current={x:Pe,y:ht},Ce({x:Pe,y:ht,width:0,height:0})}}},Oe=re=>{if(console.log(\\\\"handleMouseMove called, draggingState exists:\\\\",!!Z),!Le.current){console.log(\\\\"Early return: no scheduleGridRef\\\\");return}ve.current=!0;const we=Le.current.getBoundingClientRect(),Ne=re.clientX-we.left,Pe=re.clientY-we.top;if(j){const ht=Ne/(qn*T)+Jn;yt(ht)}if(z&&De){console.log(\\\\"Early return: Oracle mode with preview event\\\\");const ht=Ne/(qn*T)+Jn,ut=o[Math.floor(Pe/tl)]||o[0];ot(ht,ut)}else{if(Ye.current){console.log(\\\\"Early return: selectionStartPoint active (marquee selection)\\\\");const Jt=re.clientX-we.left,$t=re.clientY-we.top,at=Math.min(Ye.current.x,Jt),dt=Math.min(Ye.current.y,$t),H=Math.abs(Jt-Ye.current.x),ie=Math.abs($t-Ye.current.y);Ce({x:at,y:dt,width:H,height:ie});const Se=at,Ke=at+H,Y=dt,et=dt+ie,_e=new Set;i.forEach(ft=>{const vt=o.indexOf(ft.resourceId);if(vt===-1)return;const Ct=vt*tl,fe=Ct+tl,nt=(ft.startTime-Jn)*qn*T,Tt=nt+ft.duration*qn*T;Se<Tt&&Ke>nt&&Y<fe&&et>Ct&&_e.add(ft.id)}),X(_e);return}if(!Z){console.log(\\\\"Early return: no draggingState\\\\");return}const ht=Z.initialPositions.get(Z.mainEventId);if(!ht)return;const ut=(Ne/T-Z.xOffset)/qn-ht.startTime,qe=Math.floor((Pe-Z.yOffset+tl/2)/tl)-ht.rowIndex;console.log(\\\\"Drag calculation - timeShift:\\\\",ut,\\\\"rowShift:\\\\",qe,\\\\"xInGrid:\\\\",Ne,\\\\"yInGrid:\\\\",Pe);const gt=[],zt=[...i];let Qt=null,Mt=null;for(const[Jt,$t]of Z.initialPositions.entries()){const at=i.find(et=>et.id===Jt);if(!at)continue;let dt=$t.startTime+ut,H=$t.rowIndex+qe;H<0&&(H=0),H>=o.length&&(H=o.length-1),dt<Jn&&(dt=Jn),dt+at.duration>co&&(dt=co-at.duration);const ie=Math.round(dt*12)/12,Se=o[H];gt.push({eventId:Jt,newStartTime:ie,newResourceId:Se});const Ke=zt.findIndex(et=>et.id===Jt);Ke!==-1&&(zt[Ke]={...zt[Ke],startTime:ie,resourceId:Se});const Y=i.find(et=>et.id!==Jt&&!Z.initialPositions.has(et.id)&&et.resourceId===Se&&gv({...at,startTime:ie},et));Y&&(Qt=Y.id)}if(gt.find(Jt=>Jt.eventId===Z.mainEventId)){const Jt=zt.find(dt=>dt.id===Z.mainEventId),$t=zt.filter(dt=>!Z.initialPositions.has(dt.id));let at=null;if(Q)if(at=Q(Jt,$t),console.log(\\\\"\\\\ud83d\\\\udd0d Drag conflict check:\\\\",{eventId:Jt.id,hasConflict:at.hasConflict,conflictType:at.conflictType}),at.hasConflict){if(be({conflictingEventId:at.conflictingEventId,conflictedPersonName:at.conflictedPersonnel||\\\\"\\\\"}),Jt.flightNumber.includes(\\\\"CPT\\\\")&&at.conflictType===\\\\"personne",\\n  "exit_code": 0,\\n  "cwd": "/workspace"\\n}\') </execute-command> </tool_result>'}